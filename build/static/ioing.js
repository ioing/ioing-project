!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){var n,s,o;s=[i(1)],void 0===(o="function"==typeof(n=function(t){"use strict";!function(t){t&&t.__esModule}(t)})?n.apply(e,s):n)||(t.exports=o)},function(t,i,n){"use strict";n.r(i);const s=t=>{let e={},i={},n={},s={},o=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/gi;function r(t,e,i,n){this.name=t,this.body=n,this.deps=e,this.model=i,this.exports={__esModule:!0},this.created=!1}function a(){let t=0,i=arguments[0],n=arguments[1],s=arguments[2],r=arguments[3];switch(arguments.length){case 1:i=null,s=arguments[0],n=null;break;case 2:s=arguments[1],"string"==typeof i?n=null:(i=null,n=arguments[0])}n=n||function(t){let e=[],i=o.exec(t);for(;null!=i;)e.push(i[1]),i=o.exec(t);return e}(s.toString())||[],-1!==["module","exports"].indexOf(n[0])&&(t=1),i?(e.call=null,h(i,n,t,s,r)):e.call=function(e){h(e,n,t,s,r)}}function h(t,e,s,o,a){let h=new r(t,e,s,o);i[t]=h,c("moduleLoad",h);let u=[];for(let t=0;t<e.length;t++){let n=e[t];null==i[n]&&-1==["module","exports"].indexOf(n)&&u.push(n)}0==u.length?h._create():(!function(t,e){let i=0;for(let s=0;s<t.length;s++){let o=t[s],r=n[o];null==r&&(n[o]=[]),n[o].push(function(n){return++i===t.length?e(n):null})}}(u,function(){h._create()}),setTimeout(function(){for(let t=0;t<u.length;t++){let e=u[t];i[e]||l(e,a)}},0))}function l(i,n){if(s[i])return;s[i]=!0;let o=function(t){return 0===t.indexOf("~/")?__dir+t.substr(2):t}(i)+(-1!==i.split("/").pop().indexOf(".js")?"":".js"),r=t.document.head,a=t.document.createElement("SCRIPT");c("scriptLoad",o),a.async=!0,a.src=o,r.appendChild(a),a.onload=function(){c("scriptLoaded",o),e.call&&e.call(i),r.removeChild(a),a=null},a.onerror=function(){n&&n(),r.removeChild(a),a=null}}function c(t,e){let i=n[t];if(null!=i)for(let t=0;t<i.length;t++)i[t](e)}function u(t,e,n){return e?(a("argument",t,function(t){e(t)},n),this):function(t){return i[t]?function(e){return(e=i[t].exports).default||e}():null}(t)}return r.prototype={_get:function(t,e,i){switch(t=t||this.name){case"module":return this;case"exports":t=this.name}return u.call(this,t,e,i)},_deps:function(){let t=[];for(let e=0,i=this.deps.length;e<i;e++){let i=this.deps[e];t.push(this._get(i))}switch(this.model){case 1:return t;case 0:default:return[this._get,this,this._get()]}},_create:function(){this.created||(this.created=!0,c("moduleExecute",this),this.body.apply(this.body,this._deps()),c(this.name,this))}},a.amd=!0,a.require=u,t.define=a},o=((t,e,i,n)=>{let s={};return s.webkit=!!e.match(/WebKit\/([\d.]+)/),s.ipod=!(!/iPod/i.test(i)&&!e.match(/(iPod).*OS\s([\d_]+)/)),s.ipad=!(!/iPad/i.test(t.userAgent)&&!e.match(/(iPad).*OS\s([\d_]+)/)),s.iphone=!!(/iPhone/i.test(i)||!s.ipad&&e.match(/(iPhone\sOS)\s([\d_]+)/)),s.ie=!!e.match(/MSIE 10.0/i),s.mac=/Mac/i.test(i),s.ios=s.ipod||s.ipad||s.iphone,s.android=!(!e.match(/(Android)\s+([\d.]+)/)&&!e.match(/Silk-Accelerated/)),s.android=s.android&&!s.webkit,s.androidICS=!(!s.android||!e.match(/(Android)\s4/)),s.chrome=!!e.match(/Chrome/),s.safari=!(!e.match(/Safari/)||s.chrome),s.mobileSafari=s.ios&&!!n.match(/(?:Version\/)([\w\._]+)/),s.opera=!!e.match(/Opera/),s.fennec=!!e.match(/fennec/i)||!!e.match(/Firefox/),s.MSApp="object"==typeof MSApp,s.wechat=!!e.match(/MicroMessenger/i),s.ieTouch=!(!s.ie||!e.toLowerCase().match(/touch/i)),s.supportsTouch=window.DocumentTouch&&document instanceof window.DocumentTouch||"ontouchstart"in window,s.webos=!!e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),s.touchpad=!(!s.webos||!e.match(/TouchPad/)),s.playbook=!!e.match(/PlayBook/),s.blackberry10=!!e.match(/BB10/),s.blackberry=!!(s.playbook||s.blackberry10||e.match(/BlackBerry/)),s.ios&&(s.iosVersion=parseFloat(n.slice(n.indexOf("Version/")+8))||-1),s.android&&(s.androidVersion=parseFloat(n.slice(n.indexOf("Android")+8))||-1),s.safari&&(s.safariVersion=n.match(/Safari\/([\d.]+)/)[1]),s.chrome&&(s.chromeVersion=n.match(/Chrome\/([\d.]+)/)[1]),s.chrome&&(s.chromeVersion=n.match(/Chrome\/([\d.]+)/)[1]),s.webkit&&(s.webKitVersion=n.match(/WebKit\/([\d.]+)/)[1]),s})(navigator,navigator.userAgent,navigator.platform,navigator.appVersion||navigator.userAgent),r=function(t,e){let i={OS:o},n=e.createElement("div"),s=n.style;s.position="fixed",s.top="0",s.left="0",s.zIndex="1",e.documentElement.appendChild(n),i.touch="ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch,i.vendor=o.webkit?"Webkit":o.fennec?"Moz":o.ie?"ms":o.opera?"O":"",i.prefix=o.webkit?"-webkit-":o.fennec?"-moz-":o.ie?"-ms-":o.opera?"-O-":"",i.cssTransformStart=o.opera?"(":"3d(",i.cssTransformEnd=o.opera?")":",0)",i.viewportScale=t.viewportScale;let r={},a={},h=["webkit","Moz","ms","O"],l=["-webkit-","-moz-","-ms-","-O-"];return i.CSSSupport=i.prefixStyle=function(t,e){if(e&&t in a)return a[t];if(!e&&t in r)return r[t];let i=0,n=h.length+1;for(;i<n;){let n=((h[i]?h[i]+"-":"")+t).replace(/-(\w)/g,function(){return arguments[1].toUpperCase()}),o=(l[i]||"")+t;if(n in s)return e?a[t]=o:r[t]=n;i++}return e?a[t]=t:r[t]=!1},i.hasTranslate3d=!(!i.prefixStyle("transform")||!t.getComputedStyle),i.isBadTransition=o.android?!!(o.webkit&&parseFloat(o.webKitVersion)<535.19)||!!(o.chrome&&parseFloat(o.chromeVersion)<53)||!!(o.safari&&parseFloat(o.safariVersion)<535.19):!o.ios,i.dynamicImport=o.chromeVersion>=63,i.observer=!!(t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver),i.shadowRoot=!!e.documentElement.createShadowRoot,i.svg=!!t.SVGAngle,i.keyframesPrefix=t.CSSRule.WEBKIT_KEYFRAMES_RULE?"-webkit-":t.CSSRule.MOZ_KEYFRAMES_RULE?"-moz-":t.CSSRule.MS_KEYFRAMES_RULE?"-ms-":t.CSSRule.O_KEYFRAMES_RULE?"-o-":!!t.CSSRule.KEYFRAMES_RULE&&"",i.keyframes=!1!==i.keyframesPrefix,i.keyframesPrefix=i.keyframesPrefix||"",i.supportTransition=i.keyframes,i.iframeInputBlurBug=o.ios&&o.iosVersion<9,i.supportSizeUnits=(()=>{let t,i,s={px:!0,dp:!1,vw:!1,vh:!1,vmin:!1,vmax:!1,mm:!1,cm:!1,pt:!1,pc:!1,in:!1,"%":!0};return t=n.offsetWidth,i=n.offsetHeight,n.style.width=0,n.style.width="10vw",s.vw=s.vh=n.offsetWidth==Math.round(e.documentElement.offsetWidth/10),n.style.width=0,n.style.width="10vmin",s.vmin=n.offsetWidth==Math.round(Math.min(t,i)/10),n.style.width=0,n.style.width="10vmax",s.vmax=n.offsetWidth==Math.round(Math.max(t,i)/10),n.style.width=0,n.style.width="10mm",s.mm=n.offsetWidth>0,n.style.width=0,n.style.width="10cm",s.cm=n.offsetWidth>0,n.style.width=0,n.style.width="10pt",s.pt=n.offsetWidth>0,n.style.width=0,n.style.width="10pc",s.pc=n.offsetWidth>0,n.style.width=0,n.style.width="10in",s.in=n.offsetWidth>0,s})(),i.supportSizeCalc=function(){let t,e;return n.style.width="100%",t=n.offsetWidth,n.style.width="calc((100vw/10 - 1px) / 2)",e=n.offsetWidth==Math.round((t/10-1)/2)}(),e.documentElement.removeChild(n),i}(window,document),a=new RegExp("^"+r.vendor,"ig"),h=r.vendor.length,l=function(t){for(let e in t){if(a.exec(e)){let i=e.charAt(h),n=e.substr(h).replace(/(\w)/,function(t){return t.toLowerCase()});if(i>"A"||i<"Z")try{t[n]||(Object.defineProperty(t,n,{configurable:!0,writable:!0}),t[n]=t[e])}catch(t){}}}},c=function(t){t.trim||t.extendProperty("trim",function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),t.splitCells||t.extendProperty("splitCells",function(){var t=/(['"])[^'"]*\1/;return function(e){var i=this;return(i=(i=i.replace(t,function(t){return encodeURIComponent(t)})).split(e)).map(function(t){return decodeURIComponent(t)})}}()),t.extendProperty("paramsToObject",function(t,e){for(var i=this.split(t||/[\?\#\,\&\:\=\/]/),n=0,s=(e||i).length,o={};n<s;)o[(e||i)[n]]=i[e?n:n+1],n+=e?1:2;return o}),t.extendProperty("repeat",function(t){return new Array(1+t).join(this)}),t.extendProperty("staticAnalysis",function(){var t=/\.|\[/,e=/^[a-zA-Z_$]+\w*$/,i=/^[0-9]*\.?[0-9]*$/,n=/window|top/,s=new RegExp("\\b(?:"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".split(",").join("|")+")\\b");return function(){var o=this.split(t)[0],r=window.sandboxWindow[o];return r?typeof r:i.test(o)?"number":s.test(o)?"token":n.test(o)?"object":e.test(o)?"variable":"unknown"}}())};const u=function(t,e,i){if(null!=t.__lookupGetter__(e))return!0;var n=t[e],s=n,o=this,r=function(){return s},a=function(r){"[object Array]"===Object.prototype.toString.call(r)&&(r=function(t,e,i){if(!0!==t.__wasExtended)return t.updated=function(t,n){e.call(this,"items",t,this,i)},t.concat=n(t,"concat"),t.join=n(t,"join"),t.pop=n(t,"pop"),t.push=n(t,"push"),t.reverse=n(t,"reverse"),t.shift=n(t,"shift"),t.slice=n(t,"slice"),t.sort=n(t,"sort"),t.splice=n(t,"splice"),t.unshift=n(t,"unshift"),t.__wasExtended=!0,t;function n(t,e,n){return function(){var n=Array.prototype.concat.apply(t),s=Array.prototype[e].apply(t,arguments);return t.updated(n,i),s}}}(r,i,o)),n=s,s=r,i.call(t,e,n,r)};return delete t[e]&&(Object.defineProperty?Object.defineProperty(t,e,{get:r,set:a,enumerable:!0,configurable:!0}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(t,e,r),Object.prototype.__defineSetter__.call(t,e,a))),this},d=function(t,e){t.extendProperty("getInstanceType",function(e){return t.toString.call(e||this).match(/^\[object\s(.*)\]$/)[1]}),t.extendProperty("extend",function(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];for(var n in i)this[n]=i[n]}return this}),"function"!==e.assign&&e.extendProperty("assign",function(t){if(void 0===t||null===t)throw new TypeError("Can not convert undefined or null to object");for(var i=e(t),n=1,s=arguments.length;index<s;n++){var o=arguments[n];if(void 0!==o&&null!==o)for(var r in o)e.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i}),t.extendProperty("objectToParams",function(t,e){var i="",n=[],s=encodeURIComponent;if("string"==typeof(t=t||this))i=t;else{for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];switch(typeof r){case"object":r=JSON.stringify(t[o]);break;case"string":r=r}n.push(o+(e?"/":"=")+s(r))}i=n.join(e?"/":"&")}return i}),t.extendProperty("countProperties",function(){var t=0;for(var e in this)this.hasOwnProperty(e)&&t++;return t}),t.extendProperty("each",function(t,e){var i,n,s,o;switch(e=e||this,this.getInstanceType()){case"Object":for(n in i=0,s=this.countProperties(),this)if(this.hasOwnProperty(n)){if(!1===t.call(e,n,this[n],i+1,s))return this;i++}break;default:for(o=this.nodeType?this.childNodes:this,i=0;i<o.length;i++)if(!1===t.call(e,i,o[i],i+1,o.length))return this}return this}),t.extendProperty("equals",function(t,i){if(1==arguments.length&&(i=this),t===i)return!0;if(!(t instanceof e&&i instanceof e))return!1;if(t.constructor!==i.constructor)return!1;for(var n in t)if(t.hasOwnProperty(n)){if(!i.hasOwnProperty(n))return!1;if(t[n]===i[n])continue;if("object"!=typeof t[n])return!1;if(!e.equals(t[n],i[n]))return!1}for(n in i)if(i.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}),t.extendProperty("clone",function(){return e.create(this)}),t.extendProperty("watch",function(t,e){u(this,t,e)}),t.extendProperty("unwatch",function(t){!function(t,e){var i=t[e];delete t[e],t[e]=i}(this,t)}),t.extendProperty("initial",function(t,e){return this[t]||(this[t]=e)}),t.extendProperty("setValueOfHref",function(t,e){new Function("scope","value","scope."+t+" = value")(this,e)}),t.extendProperty("getValueByRoute",function(){var t=/[^\w|\.$]+/,e=/(['"])[^'"]*\1/,i=/\.|\[/,n=/^[\w\_\$\.]*$/;return function(s,o,r){var a;if(!s)return this;if(n.test(s))return a=this.getValueByLink(s),o?{factory:null,result:a}:a;if(a=this[s])return o?{factory:null,result:a}:a;var h,l,c,u=[this],d=["scope"],p={},f=s.replace(e,"").split(t).unique();for(h=f.length-1;h>=0;h--)p[c=f[h].split(i)[0]]||(c&&c.length&&(this[c]||"variable"==c.staticAnalysis())&&(c in this?(d.push(c),u.push(this[c])):(d.push(c),u.push(void 0))),p[c]=!0);try{a=(l="function"==typeof o?o:new window.SandboxFunction(d.join(","),"try { return ("+s+") } catch (e) {}")).apply(this,u)}catch(t){r&&r(t)}return o?{factory:l,result:a}:a}}()),t.extendProperty("getValueByRoutes",function(t,e,i){var n=[];"string"==typeof t&&(t=[t]);for(var s=0,o=t.length;s<o;s++)n.push(this.getValueByRoute(t[s],e,i));return n}),t.extendProperty("getFunctionByRoute",function(t,e,i){return this.getValueByRoute(t,e||!0,i)}),t.extendProperty("getFunctionByRoutes",function(t,e,i){return this.getValueByRoutes(t,e||!0,i)}),t.extendProperty("getValueByLink",function(){var t=/\./;return function(e){for(var i=e.split(t),n=this,s=0,o=i.length;s<o&&n;s++)if(n=n[i[s]],1==o)["true"].consistOf(i[s])&&(n=!0),["false","null","undefined"].consistOf(i[s])&&(n=!1);else if("object"!=typeof n&&s<o-1){n=void 0;break}return n}}())},p=function(t){t.extendProperty("parseFromStringToNode",function(){let e,i=t.parseFromString;try{(new DOMParser).parseFromString("","text/html")&&(e=!0)}catch(t){}return function(t,n){switch(n){case"text/html":let s,o={body:null};if(e&&(s=i.apply(this,arguments)||o),!s.body&&((s=document.implementation.createHTMLDocument("")||o).documentElement.innerHTML=t,!s.body)){let t,e=document.createNodeIterator(s.documentElement,NodeFilter.SHOW_ALL,null,!1);for(;(t=e.nextNode())&&"BODY"!==t.nodeName;);e.body=t,s=e}return s;default:return i.apply(this,arguments)}}}())},f=function(){},m=function(t){return t.stopPropagation()},g=function(t){return t.preventDefault()},v=function(t){t.Object.defineProperty(t.Object.prototype,"extendProperty",{configurable:!0,writable:!0}),t.Object.prototype.extendProperty=function(e,i){try{t.Object.defineProperty(this,e,{configurable:!0,writable:!0}),void 0!==i&&(this[e]=i)}catch(t){}},t.Object.defineProperty(t.Object.prototype,"extendProperties",{configurable:!0,writable:!0}),t.Object.prototype.extendProperties=function(t){for(var e in t)this.extendProperty(e,t[e])};let e=t.document,i=t.Array,n=t.Object,o=t.String,a=t.Node,h=t.Element,u=t.DOMParser,v=(t.Function,t.CSSStyleDeclaration);t.noop=f,t.keyboard={},t.stopPropagation=m,t.preventDefaultEvent=g,e.head||e.extendProperty("head",e.getElementsByTagName("head")[0]||e.documentElement),t.Date.now||t.Date.extendProperty("now",function(){return(new Date).getTime()}),s(t),function(t){const e=r.OS,i={os:e,dpi:t.devicePixelRatio,scale:t.viewportScale,width:t.innerWidth,height:t.innerHeight,orientation:t.orientation},n=i.scale;i.viewportWidth=t.viewportWidth=i.width/i.scale,i.viewportHeight=t.viewportHeight=i.height/i.scale;const s={px:1,dp:n,mm:3.76562*n,cm:37.7812*n,pt:1.32812*n,pc:16*n,in:96*n,dpi:n,vw:i.width/100,vh:i.height/100,vmin:Math.min(i.width,i.height)/100,vmax:Math.max(i.width,i.height)/100,__unitRegExp__:/(?=\b|\-|\.)(\-?\.?[0-9]+\.?[0-9]*)(px|mm|cm|pt|pc|in|dp|dpi|vw|vh|vm|vmin|vmax|%)\b/gi,__nativeUnits__:r.supportSizeUnits};t.UI=i,t.UNIT=s,t.DP=function(t){return t*i.scale},t.device={ui:i,os:e,feat:r,unit:s}}(t),l(t),function(t){t.requestAnimationFrame&&t.cancelAnimationFrame||(t.extendProperty("requestAnimationFrame",function(){var t=0;return function(e){var i=Date.now(),n=Math.max(t+16.78,i);return setTimeout(function(){e(t=n)},n-i)}}()),t.extendProperty("cancelAnimationFrame",t.clearTimeout))}(t),function(t){t.requestIdleCallback||t.extendProperty("requestIdleCallback",function(t){return setTimeout(function(){t({timeRemaining:function(){return Number.MAX_VALUE}})},0)})}(t),c(o.prototype),d(n.prototype,n),function(t){t.consistOf||t.extendProperty("consistOf",function(t){for(var e=this.length;e--;)if(this[e]===t)return!0;return!1}),t.map||t.extendProperty("map",function(t){for(var e=[],i=0;i<this.length;i++){var n=t(this[i],i);null!=n&&e.push(n)}return e}),t.unique||t.extendProperty("unique",function(){for(var t,e=[],i={},n=0;null!=(t=this[n]);n++)i[t]||(e.push(t),i[t]=!0);return e})}(i.prototype),function(t){t.extendProperty("observer",function(t,e){var i=window.MutationObserver;t=t||{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,attributeFilter:["id","class","style","src","width","height"]};try{if(i)new i(function(t){e(t)}).observe(this,t);else{var n=[],s=[];t?(t.each(function(t,e){switch(t){case"attributes":e&&s.push("DOMAttrModified");break;case"childList":e&&s.push("DOMNodeInserted"),e&&s.push("DOMNodeRemoved");break;case"characterData":e&&s.push("DOMCharacterDataModified");break;case"subtree":e&&s.push("DOMNodeInserted"),e&&s.push("DOMNodeRemoved"),e&&s.push("DOMNodeInsertedIntoDocument"),e&&s.push("DOMNodeRemovedFromDocument")}}),s=8==s.length?"DOMSubtreeModified":s.join(" ")):s="DOMSubtreeModified",this.bind(s,function(t){0==n.length&&setTimeout(function(){e([].concat(n)),n=[]},0),n.push(t)})}}catch(t){}})}(a.prototype),function(t){t.extendProperty("Animate",function(t){return this.animateEvent||this.extendProperty("animateEvent",new window.Animate(this)),this.animateEvent}),t.extendProperty("Touch",function(t){var e=this.ownerDocument.defaultView;return e?(this.touchEvent||this.extendProperty("touchEvent",new e.Touch(this,t)),this.touchEvent):{}}),t.extendProperty("Scroll",function(t,e){var i=this.ownerDocument.defaultView;return i?(this.scrollEvent||this.extendProperty("scrollEvent",new i.Scroll(this,t,e)),this.scrollEvent):{}}),t.extendProperty("getAttrSign",function(t){return t=this.getAttribute(t),["false","none",null].consistOf(t)?t=!1:["","true"].consistOf(t)?t=!0:isNaN(t)||(t=Number(t)),t}),t.extendProperty("getOwnerSelection",function(t){return(this.parentShadowRoot&&1==device.feat.shadowRoot?this.parentShadowRoot:this.ownerDocument.defaultView).getSelection()}),t.extendProperty("getSelectionRange",function(t){return(t=t||this.getOwnerSelection()).createRange?t.createRange():t.anchorNode?t.getRangeAt(0):null}),t.extendProperty("setSelectionRangePos",function(t){var e=this.getOwnerSelection();switch(this.nodeName){case"INPUT":case"TEXTAREA":t="Array"==t.getInstanceType()?t:[this.selectionStart,this.selectionEnd],e.rangeCount>0&&e.removeAllRanges(),this.setSelectionRange(t[0],t[1]);break;case"HTMLAREA":var i,n,s,o=this.ownerDocument;void 0===t&&(t=this.getSelectionRange(e)),"Range"==t.getInstanceType()?(e.removeAllRanges(),e.addRange(t)):e&&(s=0,n=(!1)(i=function(t,r){var a,h,l,c,u,d;for(d=[],l=0,c=(u=r.childNodes).length;l<c&&(a=u[l],!n);l++)if(3===a.nodeType){if(s+a.length>=t){n=!0,(h=o.createRange()).setStart(a,t-s),e.removeAllRanges(),e.addRange(h);break}d.push(s+=a.length)}else d.push(i(t,a));return d})(t,this))}}),t.extendProperty("getSelectionRangeInsert",function(t){var e=this.getOwnerSelection(),i=this.getSelectionRange(e);if(null==i)return null;if(void 0==t)return i;i.collapse(!1);var n=i.createContextualFragment(t),s=n.lastChild;return i.insertNode(n),s&&(i.setEndAfter(s),i.setStartAfter(s)),this.setSelectionRangePos(i),i}),t.extendProperty("getSelectionRangePosition",function(t){switch(this.nodeName){case"INPUT":case"TEXTAREA":var e,i,n,s,o;return void 0===t&&(t=this.selectionStart),t==this.preSelectionPos?this.preSelectionRect:(n=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},o=this.value.slice(0,t),i=this.value.slice(t),s="<span style='position: relative; display: inline;'>"+n(o)+"</span>",s+="<span id='mirror' style='position: relative; display: inline;'>|</span>",s+="<span style='position: relative; display: inline;'>"+n(i)+"</span>",(e=new Mirror(this).create(s).rect("#mirror")).left-=this.scrollLeft,e.top-=this.scrollTop,this.preSelectionPos=t,this.preSelectionRect=e,e);case"HTMLAREA":var r,a;return a=this.getSelectionRangeOffset(),r=this.offset(),a.left-=r.left,a.top-=r.top,a}}),t.extendProperty("getSelectionRangeOffset",function(t){switch(this.nodeName){case"INPUT":case"TEXTAREA":var e=this.offset(),i=this.getSelectionRangePosition(t);return{left:e.left+i.left,top:e.top+i.top,height:i.height};case"HTMLAREA":var n,s,o,r=this.ownerDocument.defaultView.document,a=this.getOwnerSelection(),h=this.getSelectionRange(a);return h&&(h.collapse(!1),h.endOffset-1>0&&h.endContainer!==this&&((n=h.cloneRange()).setStart(h.endContainer,h.endOffset-1),n.setEnd(h.endContainer,h.endOffset),e={height:(s=n.getBoundingClientRect()).height,left:s.left+s.width,top:s.top},n.detach()),e&&0!==(null!=e?e.height:void 0)||(n=h.cloneRange(),o=r.createTextNode("|"),n.insertNode(o),n.selectNode(o),e={height:(s=n.getBoundingClientRect()).height,left:s.left,top:s.top},o.remove(),n.detach())),e.left+=top.scrollX,e.top+=top.scrollY,e}})}(h.prototype),function(t){t.extendProperty("set",function(t,e){void 0!==t&&void 0!==e&&(e="string"==typeof e?e.replace(UNIT.__unitRegExp__,function(t,e,i){return e*UNIT[i]+"px"}):e,this.setProperty(device.feat.prefixStyle(t,!0),e))}),t.extendProperty("remove",function(t){for(var e=[device.feat.prefix+t,t],i=0,n=e.length;i<n;i++)t=e[i],this.propertyIsEnumerable(t)&&this.removeProperty(t)})}(v.prototype),p(u.prototype)},y=function(t){var e=t.getComputedStyle,i=t.document,n=[],s=n.slice,o={},r={},a={},h=/<(\w+)[^>]*>/,l=/^(?:body|html)$/i,c=function(t,e){return new u(t,e)},u=function(t,e){if(this.length=0,!t)return this;if((t instanceof u||"$query"===t.constructor.name)&&void 0==e)return t;if(c.isFunction(t))return c(i).ready(t);if(c.isArray(t)&&void 0!=t.length){for(var n=0;n<t.length;n++)this[this.length++]=t[n];return this}if(c.isObject(t)&&c.isObject(e)){if(void 0==t.length)t.parentNode==e&&(this[this.length++]=t);else for(var s=0;s<t.length;s++)t[s].parentNode==e&&(this[this.length++]=t[s]);return this}if(c.isObject(t)&&void 0==e)return this[this.length++]=t,this;if(void 0!==e){if(e instanceof u)return e.find(t)}else e=i;return this.selector(t,e)};function d(t,e,n){var s=i.createDocumentFragment();if(n){for(var o=t.length-1;o>=0;o--)s.insertBefore(t[o],s.firstChild);e.insertBefore(s,e.firstChild)}else{for(var r=0;r<t.length;r++)s.appendChild(t[r]);e.appendChild(s)}s=null}function p(t){return t in o?o[t]:o[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t){for(var e=0;e<t.length;e++)t.indexOf(t[e])!=e&&(t.splice(e,1),e--);return t}function m(t,e){var i=[];if(void 0==t)return i;for(;t;t=t.nextSibling)1==t.nodeType&&t!==e&&i.push(t);return i}function g(t,e){try{return e.querySelectorAll(t)}catch(t){return[]}}function v(t,e){if(t)if(t.nodeType)e[e.length++]=t;else for(var i=0,n=t.length;i<n;i++)e[e.length++]=t[i]}c.is$$=function(t){return t instanceof u},c.map=function(t,e){var i,n,s,o=[];if(c.isArray(t))for(n=0;n<t.length;n++)void 0!==(i=e.apply(t[n],[n,t[n]]))&&o.push(i);else if(c.isObject(t))for(s in t)t.hasOwnProperty(s)&&"length"!=s&&void 0!==(i=e(t[s],[s,t[s]]))&&o.push(i);return c(o)},c.isArray=function(t){return t instanceof Array&&void 0!=t.push},c.isFunction=function(t){return"function"==typeof t&&!(t instanceof RegExp)},c.isWindow=function(t){return null!=t&&t==t.window},c.isObject=function(t){return"object"==typeof t&&null!==t},c.isPlainObject=function(t){return c.isObject(t)&&!c.isWindow(t)&&Object.getPrototypeOf(t)==Object.prototype},c.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},c.fn=u.prototype={constructor:u,forEach:n.forEach,reduce:n.reduce,push:n.push,indexOf:n.indexOf,concat:n.concat,selector:function(t,e){if("#"===(t=t.trim())[0]&&-1==t.indexOf(".")&&-1==t.indexOf(",")&&-1===t.indexOf(" ")&&-1===t.indexOf(">"))v(e==i?e.getElementById(t.replace("#","")):g(t,e),this);else if("<"===t[0]&&">"===t[t.length-1]||-1!==t.indexOf("<")&&-1!==t.indexOf(">")){var n=i.createElement("div");n.innerHTML=t.trim(),v(n.childNodes,this)}else v(g(t,e),this);return this},oldElement:void 0,slice:n.slice,length:0,_setupOld:function(t){return void 0==t?c():(t.oldElement=this,t)},map:function(t){var e,i,n=[];for(i=0;i<this.length;i++)void 0!==(e=t.apply(this[i],[i,this[i]]))&&n.push(e);return c(n)},each:function(t){return this.forEach(function(e,i){t.call(e,i,e)}),this},ready:function(t){var e=this[0];return"complete"===e.readyState||"loaded"===e.readyState||"interactive"===e.readyState?t():e.addEventListener("DOMContentLoaded",t,!1),this},find:function(t){if(0===this.length)return this;for(var e,i=[],n=0;n<this.length;n++){e=c(t,this[n]);for(var s=0;s<e.length;s++)i.push(e[s])}return c(f(i))},html:function(t,e){if(0===this.length)return this;if(void 0===t)return this[0].innerHTML;for(var i=0;i<this.length;i++)!1!==e&&c.cleanUpContent(this[i],!1,!0),this[i].innerHTML=t;return this},text:function(t){if(0===this.length)return this;if(void 0===t)return this[0].textContent;for(var e=0;e<this.length;e++)this[e].textContent=t;return this},css:function(t,i,n){var s=void 0!=n?n:this[0];if(0===this.length)return this;if(void 0==i&&"string"==typeof t)return s.style[t]?s.style[t]:e(s)[t];for(var o=0;o<this.length;o++)if(c.isObject(t))for(var r in t)this[o].style.set(r,t[r]);else this[o].style.set(t,i);return this},computedStyle:function(t){if(0!==this.length&&void 0!=t)return e(this[0],"")[t]},empty:function(){for(var t=0;t<this.length;t++)c.cleanUpContent(this[t],!1,!0),this[t].textContent="";return this},hide:function(){if(0===this.length)return this;for(var t=0;t<this.length;t++)"none"!=this.css("display",null,this[t])&&(this[t].setAttribute("afmOldStyle",this.css("display",null,this[t])),this[t].style.display="none");return this},show:function(){if(0===this.length)return this;for(var t=0;t<this.length;t++)"none"==this.css("display",null,this[t])&&(this[t].style.display=this[t].getAttribute("afmOldStyle")?this[t].getAttribute("afmOldStyle"):"block",this[t].removeAttribute("afmOldStyle"));return this},toggle:function(t){if(0===this.length)return this;for(var e=!(!0!==t),i=0;i<this.length;i++)"none"==this.css("display",null,this[i])||void 0!=t&&!1!==e?"none"!=this.css("display",null,this[i])||void 0!=t&&!0!==e||(this[i].style.display=this[i].getAttribute("afmOldStyle")?this[i].getAttribute("afmOldStyle"):"block",this[i].removeAttribute("afmOldStyle")):(this[i].setAttribute("afmOldStyle",this.css("display",null,this[i])),this[i].style.display="none");return this},val:function(t){if(0===this.length)return void 0===t?void 0:this;if(void 0==t)return this[0].value;for(var e=0;e<this.length;e++)this[e].value=t;return this},attr:function(t,e){if(0===this.length)return void 0===e?void 0:this;if(void 0===e&&!c.isObject(t))return this[0].afmCacheId&&r[this[0].afmCacheId][t]?this[0].afmCacheId&&r[this[0].afmCacheId][t]:this[0].getAttribute(t);for(var i=0;i<this.length;i++)if(c.isObject(t))for(var n in t)c(this[i]).attr(n,t[n]);else c.isArray(e)||c.isObject(e)||c.isFunction(e)?(this[i].afmCacheId||(this[i].afmCacheId=c.uuid()),r[this[i].afmCacheId]||(r[this[i].afmCacheId]={}),r[this[i].afmCacheId][t]=e):null===e?(this[i].removeAttribute(t),this[i].afmCacheId&&r[this[i].afmCacheId][t]&&delete r[this[i].afmCacheId][t]):this[i].setAttribute(t,e);return this},removeAttr:function(t){for(var e=this,i=0;i<this.length;i++)t.split(/\s+/g).forEach(function(n){e[i].removeAttribute(n),e[i].afmCacheId&&r[e[i].afmCacheId][t]&&delete r[e[i].afmCacheId][t]});return this},prop:function(t,e){if(0===this.length)return void 0===e?void 0:this;var i;if(void 0===e&&!c.isObject(t))return this[0].afmCacheId&&a[this[0].afmCacheId][t]?this[0].afmCacheId&&a[this[0].afmCacheId][t]:!(i=this[0][t])&&t in this[0]?this[0][t]:i;for(var n=0;n<this.length;n++)if(c.isObject(t))for(var s in t)c(this[n]).prop(s,t[s]);else c.isArray(e)||c.isObject(e)||c.isFunction(e)?(this[n].afmCacheId||(this[n].afmCacheId=c.uuid()),a[this[n].afmCacheId]||(a[this[n].afmCacheId]={}),a[this[n].afmCacheId][t]=e):null===e&&void 0!==e?c(this[n]).removeProp(t):this[n][t]=e;return this},removeProp:function(t){for(var e=this,i=0;i<this.length;i++)t.split(/\s+/g).forEach(function(n){e[i][n]&&(e[i][n]=void 0),e[i].afmCacheId&&a[e[i].afmCacheId][t]&&delete a[e[i].afmCacheId][t]});return this},remove:function(t){var e=c(this).filter(t);if(void 0==e)return this;for(var i=0;i<e.length;i++)c.cleanUpContent(e[i],!0,!0),e[i]&&e[i].parentNode&&e[i].parentNode.removeChild(e[i]);return this},addClass:function(t){if(void 0==t)return this;for(var e=0;e<this.length;e++){var i=this[e].className,n=[],s=this;t.split(/\s+/g).forEach(function(t){s.hasClass(t,s[e])||n.push(t)}),this[e].className+=(i?" ":"")+n.join(" "),this[e].className=this[e].className.trim()}return this},removeClass:function(t){if(void 0==t)return this;for(var e=0;e<this.length;e++){if(void 0==t)return this[e].className="",this;var i=this[e].className;"object"==typeof this[e].className&&(i=" "),t.split(/\s+/g).forEach(function(t){i=i.replace(p(t)," ")}),i.length>0?this[e].className=i.trim():this[e].className=""}return this},toggleClass:function(t,e){if(void 0==t)return this;for(var i=0;i<this.length;i++)"boolean"!=typeof e&&(e=this.hasClass(t,this[i])),c(this[i])[e?"removeClass":"addClass"](t);return this},replaceClass:function(t,e){if(void 0==t||void 0==e)return this;for(var i=0;i<this.length;i++)if(void 0!=t){var n=this[i].className;t.split(/\s+/g).concat(e.split(/\s+/g)).forEach(function(t){n=n.replace(p(t)," ")}),(n=n.trim()).length>0?this[i].className=(n+" "+e).trim():this[i].className=e}else this[i].className=e;return this},hasClass:function(t,e){return 0!==this.length&&(e||(e=this[0]),p(t).test(e.className))},append:function(e,n){if(e&&void 0!=e.length&&0===e.length)return this;var s;for((c.isArray(e)||c.isObject(e))&&(e=c(e)),s=0;s<this.length;s++)if(e.length&&"string"!=typeof e)d(e=c(e),this[s],n);else{var o=h.test(e)?c(e):void 0;void 0!=o&&0!==o.length||(o=i.createTextNode(e)),void 0==o.nodeName||"script"!=o.nodeName.toLowerCase()||o.type&&"text/javascript"!==o.type.toLowerCase()?o instanceof u?d(o,this[s],n):void 0!=n?this[s].insertBefore(o,this[s].firstChild):this[s].appendChild(o):t.eval(o.innerHTML)}return this},appendTo:function(t,e){return c(t).append(this),this},prependTo:function(t){return c(t).append(this,!0),this},prepend:function(t){return this.append(t,1)},before:function(t,e){if(0===this.length)return this;if(!t)return this;t=c(t);for(var i=0;i<t.length;i++)e?this[0].parentNode.insertBefore(t[i],this[0].nextSibling):this[0].parentNode.insertBefore(t[i],this[0]);return this},after:function(t){this.before(t,!0)},get:function(t){return(t=void 0==t?0:t)<0&&(t+=this.length),this[t]?this[t]:void 0},position:function(){if(!this.length)return this;var t=this[0],e=this.offsetParent(),i=this.offset(),n=l.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(c(t).css("margin-top"))||0,i.left-=parseFloat(c(t).css("margin-left"))||0,n.top+=parseFloat(c(e[0]).css("border-top-width"))||0,n.left+=parseFloat(c(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||i.body;t&&!l.test(t.nodeName)&&"static"==c(t).css("position");)t=t.offsetParent;return t})},offset:function(){var e;return 0===this.length?this:this[0]==t?{left:0,top:0,right:0,bottom:0,width:t.innerWidth,height:t.innerHeight}:{left:(e=this[0].getBoundingClientRect()).left+t.pageXOffset,top:e.top+t.pageYOffset,right:e.right+t.pageXOffset,bottom:e.bottom+t.pageYOffset,width:e.right-e.left,height:e.bottom-e.top}},height:function(e){if(0===this.length)return this;if(void 0!=e)return this.css("height",e);if(this[0]==this[0].window)return t.innerHeight;if(this[0].nodeType==this[0].DOCUMENT_NODE)return this[0].documentElement.offsetheight;var i=this.css("height").replace("px","");return i||this.offset().height},width:function(e){if(0===this.length)return this;if(void 0!=e)return this.css("width",e);if(this[0]==this[0].window)return t.innerWidth;if(this[0].nodeType==this[0].DOCUMENT_NODE)return this[0].documentElement.offsetwidth;var i=this.css("width").replace("px","");return i||this.offset().width},parent:function(t,e){if(0===this.length)return this;for(var n=[],s=0;s<this.length;s++)for(var o=this[s];o.parentNode&&o.parentNode!=i&&(n.push(o.parentNode),o.parentNode&&(o=o.parentNode),e););return this._setupOld(c(f(n)).filter(t))},parents:function(t){return this.parent(t,!0)},childrens:function(t){if(0===this.length)return this;for(var e=[],i=0;i<this.length;i++)e=e.concat(m(this[i].firstChild));return this._setupOld(c(e).filter(t))},siblings:function(t){if(0===this.length)return this;for(var e=[],i=0;i<this.length;i++)this[i].parentNode&&(e=e.concat(m(this[i].parentNode.firstChild,this[i])));return this._setupOld(c(e).filter(t))},closest:function(t,e){if(0===this.length)return this;var n=this[0],s=c(t,e);if(0===s.length)return c();for(;n&&-1==s.indexOf(n);)n=n!==e&&n!==i&&n.parentNode;return this.native?c(n)[0]:c(n)},filter:function(t){if(0===this.length)return this;if(void 0==t)return this;for(var e=[],i=0;i<this.length;i++){var n=this[i];n.parentNode&&c(t,n.parentNode).indexOf(n)>=0&&e.push(n)}return this._setupOld(c(f(e)))},not:function(t){if(0===this.length)return this;for(var e=[],i=0;i<this.length;i++){var n=this[i];n.parentNode&&-1==c(t,n.parentNode).indexOf(n)&&e.push(n)}return this._setupOld(c(f(e)))},data:function(t,e){return this.attr("data-"+t,e)},end:function(){return void 0!=this.oldElement?this.oldElement:c()},clone:function(t){if(t=!1!==t,0===this.length)return this;for(var e=[],i=0;i<this.length;i++)e.push(this[i].cloneNode(t));return c(e)},size:function(){return this.length},serialize:function(){if(0===this.length)return"";for(var t=[],e=0;e<this.length;e++)this.slice.call(this[e].elements).forEach(function(e){var i=e.getAttribute("type");if("fieldset"!=e.nodeName.toLowerCase()&&!e.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||e.checked)&&e.getAttribute("name"))if("select-multiple"==e.type)for(var n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.getAttribute("name")+"="+encodeURIComponent(e.options[n].value));else t.push(e.getAttribute("name")+"="+encodeURIComponent(e.value))});return t.join("&")},eq:function(t){return c(this.get(t))},index:function(t){return t?this.indexOf(c(t)[0]):this.parent().children().indexOf(this[0])},is:function(t){return!!t&&this.filter(t).length>0},toArray:function(){for(var t=[],e=0,i=this.length;e<i;e++)t.push(this[e]);return t}},c.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")},c.uuid=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},c.getCssMatrix=function(i){c.is$(i)&&(i=i.get(0));var n=t.WebKitCSSMatrix||t.MSCSSMatrix||t.CSSMatrix;if(void 0===i)return n?new n:{a:0,b:0,c:0,d:0,e:0,f:0};var s=e(i),o=s.webkitTransform||s.transform||s[device.feat.cssPrefix+"Transform"];if(n)return new n(o);if(o){var r=o.replace(/[^0-9\-.,]/g,"").split(",");return{a:+r[0],b:+r[1],c:+r[2],d:+r[3],e:+r[4],f:+r[5]}}return{a:0,b:0,c:0,d:0,e:0,f:0}},c.create=function(t,e){var n,s=new u;if(e||"<"!==t[0]){for(var o in e.html&&(e.innerHTML=e.html,delete e.html),n=i.createElement(t),e)n[o]=e[o];s[s.length++]=n}else(n=i.createElement("div")).innerHTML=t,v(n.childNodes,s);return s},c.query=function(t,e){return t?(e=e||i,(new u).selector(t,e)):new u};var y={},b=1;function w(t){return t._afmid||(t._afmid=b++)}function x(t,e,i,n){if((e=S(e)).ns)var s=function(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}(e.ns);return(y[w(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||s.test(t.ns))&&(!i||t.fn==i||"function"==typeof t.fn&&"function"==typeof i&&t.fn===i)&&(!n||t.sel==n)})}function S(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function _(t,e,i){(t="string"==typeof t?t.split(/\s/):t).each(function(t,n){switch(n){case"transitionstart":this.push("webkitTransitionStart"),this.push("oTransitionStart"),this.push("MSTransitionStart"),this.push("animationstart"),this.push("webkitAnimationStart"),this.push("oAnimationStart"),this.push("MSAnimationStart");break;case"transitionend":this.push("webkitTransitionEnd"),this.push("oTransitionEnd"),this.push("MSTransitionEnd"),this.push("animationend"),this.push("webkitAnimationEnd"),this.push("oAnimationEnd"),this.push("MSAnimationEnd")}i(n,e)})}function T(t,e,i,n,s){var o=w(t),r=y[o]||(y[o]=[]);_(e,i,function(e,i){var o=s&&s(i,e),a=o||i,h=function(e){var i=a.apply(t,[e].concat(e.data));return!1===i&&e.preventDefault(),i},l={}.extend(S(e),{fn:i,proxy:h,sel:n,del:o,i:r.length});r.push(l),t.addEventListener(l.e,h,!1)})}function E(t,e,i,n){var s=w(t);_(e||"",i,function(e,i){x(t,e,i,n).forEach(function(e){delete y[s][e.i],t.removeEventListener(e.e,e.proxy,!1)})})}c.event={add:T,remove:E},c.fn.bind=function(t,e){for(var i=0;i<this.length;i++)T(this[i],t,e);return this},c.fn.unbind=function(t,e){for(var i=0;i<this.length;i++)E(this[i],t,e);return this},c.fn.one=function(t,e){return this.each(function(i,n){T(this,t,e,null,function(t,e){return function(){if(t){var i=t.apply(n,arguments);return!1!==i&&E(n,e,t),i}}})})};var P=function(){return!0},k=function(){return!1},A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function O(t,e,i,n){T(t,e,i,n,function(e){return function(i){var s,o=c(i.target).closest(n,t).get(0);if(o)return s={}.extend(function(t){var e={}.extend({originalEvent:t},t);return A.each(function(i,n){e[i]=function(){if(this[n]=P,"stopImmediatePropagation"!=i&&"stopPropagation"!=i||(t.cancelBubble=!0,t[i]))return t[i].apply(t,arguments)},e[n]=k}),e}(i),{currentTarget:o,liveFired:t}),e.apply(o,[s].concat([].slice.call(arguments,1)))}})}function C(t,e){if(e&&t.dispatchEvent){var i=c.Event("destroy",{bubbles:!1});t.dispatchEvent(i)}var n=w(t);if(n&&y[n]){for(var s in y[n])t.removeEventListener(y[n][s].e,y[n][s].proxy,!1);delete y[n]}}function D(t,e){if(t){var i=t.childNodes;if(i&&i.length>0)for(var n;n<i.length;n++)D(i[n],e);C(t,e)}}c.fn.delegate=function(t,e,i){for(var n=0;n<this.length;n++)O(this[n],e,i,t);return this},c.fn.undelegate=function(t,e,i){for(var n=0;n<this.length;n++)E(this[n],e,i,t);return this},c.fn.on=function(t,e,i){return void 0===e||c.isFunction(e)?this.bind(t,e):this.delegate(e,t,i)},c.fn.off=function(t,e,i){return void 0===e||c.isFunction(e)?this.unbind(t,e):this.undelegate(e,t,i)},c.fn.trigger=function(t,e,i){"string"==typeof t&&(t=c.Event(t,i)),t.data=e;for(var n=0;n<this.length;n++)this[n].dispatchEvent(t);return this},c.Event=function(t,e){var n=i.createEvent("Events"),s=!0;if(e)for(var o in e)"bubbles"==o?s=!!e[o]:n[o]=e[o];return n.initEvent(t,s,!0,null,null,null,null,null,null,null,null,null,null,null,null),n},c.bind=function(t,e,i){if(t){t.__events||(t.__events={}),c.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)t.__events[e[n]]||(t.__events[e[n]]=[]),t.__events[e[n]].push(i)}},c.trigger=function(t,e,i){if(t){var n=!0;if(!t.__events)return n;c.isArray(e)||(e=[e]),c.isArray(i)||(i=[]);for(var s=0;s<e.length;s++)if(t.__events[e[s]])for(var o=t.__events[e[s]].slice(0),r=0;r<o.length;r++)c.isFunction(o[r])&&!1===o[r].apply(t,i)&&(n=!1);return n}},c.unbind=function(t,e,i){if(t.__events){c.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)if(t.__events[e[n]])for(var s=t.__events[e[n]],o=0;o<s.length;o++)if(void 0==i&&delete s[o],s[o]==i){s.splice(o,1);break}}},c.proxy=function(t,e,i){return function(){return i?t.apply(e,i):t.apply(e,arguments)}};var I=function(t,e){for(var i=0;i<t.length;i++)D(t[i],e)};c.cleanUpContent=function(t,e,i){if(t){var n=t.childNodes;n&&n.length>0&&c.asap(I,{},[s.apply(n,[0]),i]),e&&C(t,i)}};var M=[],R=[],L=[];return c.asap=function(e,i,n){if(!c.isFunction(e))throw"$.asap - argument is not a valid function";M.push(e),R.push(i||{}),L.push(n||[]),t.postMessage("afm-asap","*")},t.addEventListener("message",function(e){e.source==t&&"afm-asap"==e.data&&(e.stopPropagation(),M.length>0&&M.shift().apply(R.shift(),L.shift()))},!0),["click","keydown","keyup","keypress","submit","load","resize","change","select","error"].forEach(function(t){c.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){c.fn[t]=function(e){if(0!==this.length){if(e)this.bind(t,e);else for(var i=0;i<this.length;i++)try{this[i][t]()}catch(t){}return this}}}),c},b=()=>{class t{constructor(t){let e;this.sandbox=this.iframe=e=document.createElement("iframe"),t||(e.style.display="none",document.head.appendChild(e),this.init())}init(){let t=this.sandbox.contentDocument;return t.open(),t.write(""),t.close(),this.window=this.sandbox.contentWindow.window,this.document=this.sandbox.contentWindow.document,this}unify(t){return v(this.window),t||T(this.window),this}open(){return this.sandbox.contentDocument.open(),this}write(t,e){let i;return i=t||e?"<!DOCTYPE html><html><head>"+(t||"")+(e||"")+"</head><body></body></html>":'<head><meta charset="utf-8"></head>',this.sandbox.contentDocument.write(i),this}close(){this.sandbox.contentDocument.close()}exit(){document.head.removeChild(this.sandbox)}load(t,e){let i="";for(let e=(t="object"==typeof t?t:[t]).length-1;e>=0;e--)i+="<object data="+t[e]+"</object>";this.sandboxWindow.open(),this.sandboxWindow.write(i),this.sandboxWindow.close(),this.sandboxWindow.onload=function(){e()}}}let e=new t,i=e.window,n=i.Function;e.unify(!0),e.exit();let s=new t,o=s.window,r=o.Function;return s.unify(!0),{sandbox:t,sandboxWindow:i,SandboxFunction:n,shadowRootWindow:o,ShadowRootFunction:r}},w=()=>{device.feat.prefixStyle;const t=requestAnimationFrame,e=getComputedStyle,i={in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0, 1, .5, 1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},n=device.feat.prefixStyle("transition"),s=window.getComputedStyle||window.currentStyle;return class{constructor(t){"string"==typeof t&&(t=$$(t)[0]),t&&(this.el=t,this._events={},this._props={},this._proper=[],this._caller=[],this._transforms={},this._transforming=!1,this._transitionProps=[],this.el.style.set("transition-duration","0ms"))}on(t,e){return t.split(" ").each((t,i)=>{this._events.initial(i,[]).push(e)}),this}one(t,e){function i(){e.apply(this,arguments),this.off(t,i)}return t.split(" ").each((t,e)=>{this._events.initial(e,[]).push(i)}),this}off(t,e){return t.split(" ").each((t,i)=>{if(!this._events[i])return;let n=this._events[i].indexOf(e);n>-1&&this._events[i].splice(n,1)}),this}trigger(t){let e=arguments,i=this._events[t];if(i)for(let t of i)t.apply(this,[].slice.call(e,1))}_transitionend(t){if(!this.getDuration()||!n)return setTimeout(t,0);this.el.one("transitionend",e=>{if(e.target!==this.el)return!1;t()})}transform(t){let e=t.match(/\w+\b/);return this._transforms[e]=t,this}skew(t,e){return this.transform("skew("+t+"deg, "+(e||0)+"deg)")}skewX(t){return this.transform("skewX("+t+"deg)")}skewY(t){return this.transform("skewY("+t+"deg)")}to(t,e,i){return this.transform("translate3d("+(t?t+"px":0)+","+(e?e+"px":0)+","+(i?i+"px":0)+")"),this._x=t,this._y=e,this._z=i,this}translate(){return this.to.apply(this,arguments)}translate3d(){return this.to.apply(this,arguments)}x(t){return this._x=t,this.transform("translateX("+t+"px)")}translateX(){return this.x.apply(this,arguments)}y(t){return this._y=t,this.transform("translateY("+t+"px)")}translateY(){return this.y.apply(this,arguments)}z(t){return this._z=z,this.transform("translateZ("+t+"px)")}translateZ(){return this.z.apply(this,arguments)}scale(t,e){return this.transform("scale("+t+", "+(e||t)+")")}opacity(t){return this.style("opacity",t)}scaleX(t){return this.transform("scaleX("+t+")")}matrix(t,e,i,n,s,o){return this.transform("matrix("+[t,e,i,n,s,o].join(",")+")")}scaleY(t){return this.transform("scaleY("+t+")")}rotate(t){return this.transform("rotate("+t+"deg)")}rotateX(t){return this.transform("rotateX("+t+"deg)")}rotateY(t){return this.transform("rotateY("+t+"deg)")}rotateZ(t){return this.transform("rotateZ("+t+"deg)")}rotate3d(t,e,i,n){return this.transform("rotate3d("+t+", "+e+","+i+","+n+"deg)")}perspective(t){return this.el.parentNode.style.set("transform-style","preserve-3d"),this.el.parentNode.style.set("perspective",t+"px"),this}ease(t){return t=i[t]||t||"ease",this.style("transition-timing-function",t)}animate(t,e){for(let t in e)e.hasOwnProperty(t)&&this.style("animation-"+t,e[t]);return this.style("animation-name",t)}duration(t){return t="string"==typeof t?1e3*parseFloat(t):t,this.style("transition-duration",t+"ms")}getDuration(){return!!this.el.transition||!!parseFloat(e(this.el).transitionDuration,10)}delay(t){return t=this._delay="string"==typeof t?1e3*parseFloat(t):t,this.style("transition-delay",t+"ms")}origin(t,e,i){return i=t,"object"==typeof t&&(e=t[1]||0,t=t[0]||0),isNaN(t)||isNaN(e)?e&&(i=t+" "+e):i=t+"px "+e+"px",this.style("transform-origin",i)}width(t){return this.style("width",void 0===t?"":t+"px")}height(t){return this.style("height",void 0===t?"":t+"px")}add(t,e){if(!s)return;let i=this;return this.on("start",function(){let n=parseInt(i.current(t),10);i.set(t,n+e+"px")})}sub(t,e){if(!s)return;let i=this;return this.on("start",function(){let n=parseInt(i.current(t),10);i.set(t,n-e+"px")})}current(t){return s(this.el).getPropertyValue(t)}transition(t){return this._transitionProps.indexOf(t)||this._transitionProps.push(t),this}style(t,e){return this._props[t]=void 0===e?"":e,this}_applyTransform(){let t=[];this._transforms.translate3d||this._transforms.translateZ||(this._transforms.translateZ="translateZ(0)");for(let e in this._transforms)t.push(this._transforms[e]);return t.length&&this.style("transform",t.join(" ")),this}applyProperties(){return this._transforming=!0,this.el.css(this._proper.shift()),this._transitionend(()=>{this.clear(),this.next()}),this}next(){this._caller.length&&this._caller.shift()(),0===this._caller.length?this.init():this.applyProperties()}clear(){this._transforms={}}init(){return this.getDuration()&&this.el.style.set("transition-duration","0ms"),this.clear(),this._transforming=!1,this}then(t){return this._applyTransform(),this.style("transition-property",this._transitionProps.join(", ")),this._proper.push(this._props),this._props={},this._caller.push(()=>t&&t.call(this)),this}end(e){return this.then(e),this._transforming?this:(t(()=>{this.applyProperties()}),this)}}};var x={linear:{style:"cubic-bezier(0, 0, 1, 1)",fn:function(t){return t}},quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return Math.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){return(t-=1)*t*(5*t+4)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){return 0===t?0:1==t?1:.4*Math.pow(2,-10*t)*Math.sin((t-.055)*(2*Math.PI)/.22)+1}}};const S=()=>{const t=viewportScale,i=device.feat,n=i.prefixStyle,s={touch:i.touch,isBadTransition:i.isBadTransition,supportTransition:i.supportTransition,feat:{hasObserver:i.observer,hasPointer:navigator.msPointerEnabled,hasTouch:i.touch,hasTransform:!1!==n("transform"),hasTransition:n("transition"),hasPerspective:n("perspective")},prefixStyle:{transform:n("transform"),transition:n("transition"),transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")},prefixPointerEvent:function(t){return window.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t}},o={eventType:{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3},addEvent:function(t,e,i,n){t.addEventListener(e,i,!!n)},removeEvent:function(t,e,i,n){t.removeEventListener(e,i,!!n)},getRect:function(t){if(t instanceof SVGElement){let e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height,clientWidth:e.width,clientHeight:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight,clientWidth:t.clientWidth,clientHeight:t.clientHeight}},offset:function(t){let e=-t.offsetLeft,i=-t.offsetTop;for(;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}}};return(i,n,r)=>{const a=i.getComputedStyle,h=i.requestAnimationFrame,l=(i.requestIdleCallback,function(t){return t*UI.scale});class c{constructor(t,e){this.options={history:!0,bindToWrapper:!0,scrollbars:!0,fadeScrollbars:!0,resizeScrollbars:!0,scrollbarAccuracy:10,interactive:!0,indicator:null,mouseWheel:!0,mouseWheelSpeed:20,mouseWheelAction:"normal",deferred:!1,infiniteCacheBuffer:50,momentum:!0,deceleration:.003,speedLimit:3,stepLimit:150,maxPage:1e3,startX:0,startY:0,scrollX:!1,scrollY:!0,directionLockThreshold:5,directionLockThresholdX:!1,directionLockThresholdY:!1,bounce:!0,bounceDrag:2,bounceDragRate:70,bounceTime:400,bounceEasing:"",boundariesLimit:.15,bounceBreakThrough:!0,pull:!1,snap:!1,snapEasing:"",snapDuration:400,snapThreshold:.15,zoom:!1,zoomMin:1,zoomMax:4,startZoom:1,zoomOrigin:"0 0 0",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|HTMLAREA|BUTTON|SELECT)$/},stopPropagation:"auto",coverPropagation:!0,resizePolling:60,useTransition:!0}.extend(e),this._options=e,this.uuid="[["+App.id+"]]:scroll::"+(App.name||"top")+":"+(t.id||t.uuid),this.wrapper=t,this.scroller=this.scrolling=t.scrolling,this.pullup=t.pullup,this.pulldown=t.pulldown,this.pullright=t.pullright,this.pullleft=t.pullleft,this.scrollcover=t.scrollcover,(this.pullup||this.pulldown||this.pullright||this.pullleft)&&(this.options.pull=!0),(this.scroller||(App.console.warn("<scrolling>","warn","is not defined"),this.scroller=this.wrapper.children[0],this.scroller))&&(e.indicator&&(this.scrollbar=t.scrollbar),!e.speedLimit&&e.snap&&(this.options.speedLimit=1),this.scrollerStyle=this.scroller.style,this.wrapperWidth=this.wrapper.offsetWidth,this.wrapperHeight=this.wrapper.offsetHeight,this.options.useTransition=s.supportTransition&&s.feat.hasTransition&&this.options.useTransition,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.startX=l(this.options.startX),this.options.startY=l(this.options.startY),this.options.stepLimit=l(this.options.stepLimit),this.options.speedLimit=l(this.options.speedLimit),this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.snapEasing="string"==typeof this.options.snapEasing?x[this.options.snapEasing]||x.circular:this.options.snapEasing,this.options.bounceEasing="string"==typeof this.options.bounceEasing?x[this.options.bounceEasing]||x.quadratic:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.indicators=this.scrollbar?{el:this.scrollbar,interactive:e.interactive}:null,this.options.scrollX&&this.options.scrollY?this.wrapper.setAttribute("flow-free",""):this.options.scrollX?this.wrapper.setAttribute("flow-x",""):this.options.scrollY&&this.wrapper.setAttribute("flow-y",""),this._init(),this.revert(!0,!this.options.deferred))}handleEvent(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t),this.options.zoom&&t.touches&&t.touches.length>1&&this._zoomStart(t);break;case"touchmove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&t.touches&&t.touches[1])return void this._zoom(t);this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":if(this.scaled)return void this._zoomEnd(t);this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.mouseWheelAction)return void this._wheelZoom(t);this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}on(t,e){t.split(" ").each((t,i)=>{this._events.initial(i,[]).push(e)})}one(t,e){function i(){e.apply(this,arguments),this.off(t,i)}t.split(" ").each((t,e)=>{this._events.initial(e,[]).push(i)})}off(t,e){t.split(" ").each((t,i)=>{if(!this._events[i])return;let n=this._events[i].indexOf(e);n>-1&&this._events[i].splice(n,1)})}disable(){this.enabled=!1}enable(){this.enabled=!0}stop(){this.isInTransition=!1,this.isAnimating=!1}revert(t,e){e&&(this._initKaleidoscope(),this._refresh(),t&&this.scrollTo(this.options.startX,this.options.startY,-1),this.enable(),this._execEvent("revert"))}destroy(){this._initEvents(!0),this._execEvent("destroy")}refresh(){let t=()=>{h(()=>this._refresh())};this.isMoving()||this.isScrolling()?this.one("scrollend",t):t()}getComputedPosition(){let t,e,i=a(this.scroller,null);return{x:t=+((i=i[s.prefixStyle.transform].split(")")[0].split(", "))[12]||i[4]),y:e=+(i[13]||i[5])}}drawingEnd(){this.options.infinite||(this.options.scrollY&&this.scrollerHeight!==this.scroller.offsetHeight||this.options.scrollX&&this.scrollerWidth!==this.scroller.offsetWidth)&&this.refresh()}isScrolling(){return this.isInTransition||this.isAnimating||!1}isMoving(){return this.moving}isBounce(){let t,e=this.x,i=this.y,n=!1;return this.hasHorizontalScroll?this.x>this.minScrollX?(e=this.minScrollX,n=!0,t="left"):this.x<this.maxScrollX&&(e=this.maxScrollX,n=!0,t="right"):e=this.x,this.hasVerticalScroll?this.y>this.minScrollY?(i=this.minScrollY,n=!0,t="top"):this.y<this.maxScrollY&&(i=this.maxScrollY,n=!0,t="bottom"):i=this.y,!!n&&{x:e,y:i,pos:t}}resetPosition(t){let e=this.isBounce();return t=t||0,e?(this.scrollTo(e.x,e.y,t,x.quadratic),this._execEvent("bouncing",e.pos)):this.bounceDragPhase=0,this.borderBouncing=e,e}zoom(t,e,i,n){if(t<this.options.zoomMin?t=this.options.zoomMin:t>this.options.zoomMax&&(t=this.options.zoomMax),t==this.scale)return;let s=t/this.scale;e=void 0===e?this.wrapperWidth/2:e,i=void 0===i?this.wrapperHeight/2:i,n=void 0===n?300:n,e=e+this.wrapperOffset.left-this._x,i=i+this.wrapperOffset.top-this._y,e=e-e*s+this._x,i=i-i*s+this._y,this.scale=t,this._refresh(),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this.scrollTo(e,i,n)}next(t,e){let i=this.currentPage.pageX,n=this.currentPage.pageY;++i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,t,e)}prev(t,e){let i=this.currentPage.pageX,n=this.currentPage.pageY;--i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,t,e)}goToPage(t,e,i,n){n=n||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);let s=this.pages[t][e].x,o=this.pages[t][e].y;i=void 0===i?this.options.snapDuration||r.max(r.max(r.min(r.abs(s-this.x),1e3),r.min(r.abs(o-this.y),1e3)),300):i,this.currentPage={x:s,y:o,pageX:t,pageY:e},this.scrollTo(s,o,i,n)}scrollBy(t,e,i,n,s){0===t&&0===e||(t=this._x+t,e=this._y+e,i=i||0,this.scrollTo(t,e,i,n,s))}scrollTo(t,e,i,n,s){return i=i||0,n=n||x.circular,this.isInTransition=this.options.useTransition&&i>0,t===this._x&&e===this._y&&-1!==i?(this.isInTransition=!1,void(i&&this._execEvent("scrollend","end"))):(!1===s&&(t>=this.minScrollX?t=this.minScrollX:t<this.maxScrollX&&(t=this.maxScrollX),e>=this.minScrollY?e=this.minScrollY:e<this.maxScrollY&&(e=this.maxScrollY)),i<=0?(this._promiseKeyFrame("translate",[t,e],!0),this._promiseKeyFrame("transitionTime",null,!0),void this._drawing()):(this.transitionStartTime=Date.now(),this.transitionCountTime=i,void(this.options.useTransition&&n.style?(this._promiseKeyFrame("translate",[t,e],!0),this._promiseKeyFrame("transitionTimingFunction",[n.style],!0),this._promiseKeyFrame("transitionTime",[i],!0),this._drawing(),this._transitionScroll()):this._animate(t,e,i,n.fn))))}scrollToElement(t,e,i,n,s){if(!(t=t.nodeType?t:this.scroller.querySelector(t)))return;let a=o.offset(t);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top;let h=o.getRect(t),l=o.getRect(this.wrapper);!0===i&&(i=r.round(h.offsetWidth/2-l.offsetWidth/2)),!0===n&&(n=r.round(h.offsetHeight/2-l.offsetHeight/2)),a.left-=i||0,a.top-=n||0,a.left=a.left>this.minScrollX?this.minScrollX:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>this.minScrollY?this.minScrollY:a.top<this.maxScrollY?this.maxScrollY:a.top,e=void 0===e||null===e||"auto"===e?r.max(r.abs(this.x-a.left),r.abs(this.y-a.top)):e,this.scrollTo(a.left,a.top,e,s)}setupFinite(){this.infiniteCache=[],this.infiniteDataLength=0,this.datasetInfiniteLock=!1,this.minScrollX=0,this.minScrollY=0,this.turnoverTimes=0}setupInfinite(){this.scrollerHeight=0,this.infiniteCache=[],this.infinitePhase=0,this.infiniteMaxPhase=0,this.infiniteContentWidth=0,this.infiniteContentHeight=0,this.infiniteContentPos=[0,0],this.infiniteContentCenter=0,this.infiniteContainerCenter=0,this.infiniteElementsEdge=[0,0],this.infiniteElementsPos=[],this.infiniteUpdatePos=[],this.infiniteDataLength=0,this.datasetInfiniteLock=!1,this.minScrollX=0,this.minScrollY=0,this.turnoverTimes=0}resetInfinite(){this.infiniteElements||this._initInfinite(),this.infiniteElements.each((t,e)=>{this.setInfiniteDataFiller(e,e._phase)}),this.scrollTo(0,0),this.setupInfinite(),this.reorderInfinite()}datasetInfinite(t){if(!0===this.datasetInfiniteLock)return this._execEvent("infinitedataend"),t&&t.call(this,!0);let e=this.infiniteCache.length,i=this.turnoverTimes;this.datasetInfiniteLock=!0,this.getInfiniteDataset.call(this,e,i,(i,n)=>{if(!i||!i.length||this.turnoverTimes>this.options.maxPage)return this._execEvent("infinitedataend"),void(this.datasetInfiniteLock=!0);this.turnoverTimes++,n||(this.datasetInfiniteLock=!1),this._execEvent("infinitedataready"),this.updateInfiniteData(e,i),this._execEvent("infinitedataloaded"),this._execEvent("modify"),t&&t.call(this),n&&(this._execEvent("infinitedataend"),this.datasetInfiniteLock=!0)})}checkInfiniteDataBuffer(){!this.datasetInfiniteLock&&this.infiniteSurplusBuffer<=this.options.infiniteCacheBuffer&&this.datasetInfinite()}detectInfiniteBalance(t){return this.broken||this.moving?0:1==t&&this.infinitePhase<this.infiniteLength?-1:1==t&&this.y>-this.wrapperHeight&&this.infinitePhase==this.infiniteLength?0:(this.infiniteContainerCenter=-this.y+this.wrapperHeight/2,this.infiniteContentCenter=this.infiniteContentPos[0]+this.infiniteContentHeight/2,this.infiniteContentCenter-this.infiniteContainerCenter-t*this.wrapperHeight)}reorderInfinite(t){if(this.updating)return this.infiniteContentPos=[0,0];this.infiniteContentHeight=this.infiniteContentPos[1]-this.infiniteContentPos[0],this.infiniteSurplusBuffer=this.infiniteDataLength-this.infinitePhase,this.checkInfiniteDataBuffer(),0!==this.infiniteDataLength&&this.rearrangeInfinite(this.directionY||1,t)}rearrangeInfinite(t,e){if(this.infiniteRearranging)return;let i,n,s,o,a,l;r.min(this.infiniteLength,this.infiniteDataLength);this.infiniteRearranging=!0;let c=t=>{this.infiniteRearranging=!1,this.updateInfinitePos(),e&&e.call(this),t&&this._execEvent("infinitecachedend")},u=()=>this.detectInfiniteBalance(1)>=0?c():(this.infiniteSurplusBuffer=this.infiniteDataLength-this.infinitePhase,this.infiniteSurplusBuffer<=0?c(1):(o=this.infinitePhase++,a=o%this.infiniteLength,l=r.max((o+1-this.infiniteLength)%this.infiniteLength,0),(i=this.infiniteElements[a])._index=a,i.__phase=i._phase||0,i._phase=o,this.updateInfiniteContent(i),s=this.infiniteItemSize||i._offsetHeight,n=this.infiniteContentPos[1],this.promiseInfinitePos(i,n),this.infiniteElementsPos[a]=[n,n+s],this.infiniteElementsEdge=[l,a],this.infiniteContentPos[0]=this.infiniteElementsPos[l][0],this.infiniteContentPos[1]+=s,this.refreshInfinitePos(o,n+s),0,void(this.updating?u():h(u)))),d=()=>this.detectInfiniteBalance(-1)<=0?c():this.infinitePhase-this.infiniteLength<=0?c():(o=--this.infinitePhase,a=o%this.infiniteLength,l=(o-1)%this.infiniteLength,(i=this.infiniteElements[a])._index=a,i.__phase=i._phase,i._phase=o-this.infiniteLength,this.updateInfiniteContent(i),s=this.infiniteItemSize||i._offsetHeight,n=this.infiniteContentPos[0]-s,this.promiseInfinitePos(i,n),this.infiniteElementsPos[a]=[n,n+s],this.infiniteElementsEdge=[a,l],this.infiniteContentPos[0]-=s,this.infiniteContentPos[1]=this.infiniteElementsPos[l][1],(0===i._phase||n<this.minScrollY)&&(this.minScrollY=-n),0,void(this.updating?d():h(d)));switch(t){case 1:this.updating?u():h(u);break;case-1:this.updating?d():h(d)}}addInfiniteElements(){let t=n.createElement("infinite");this.scroller.appendChild(t),this.infiniteElements.push(t),this.infiniteLength=this.infiniteElements.length}refreshInfinitePos(t,e){(t+=1)<this.infiniteMaxPhase||(this.scrollerHeight=e+(this.infiniteSurplusBuffer-1)*(e/t),this.maxScrollY=r.min(this.wrapperHeight-this.scrollerHeight,this.minScrollY),1!==this.infiniteSurplusBuffer&&t%(this.infiniteLength*this.options.scrollbarAccuracy)!=0||this._execEvent("modify"),this.infiniteMaxPhase=t)}refreshInfiniteAllPos(t){let e,i,n,s,o,a=t||0,h=this.infiniteLength,l=this.infiniteElementsEdge[0],c=this.infiniteContentPos[1]-this.infiniteContentPos[0];for(this.infiniteContentPos[1]=this.infiniteContentPos[0];a<h;a++)e=(l+a)%this.infiniteLength,s=(i=this.infiniteElements[e]).offsetHeight,i._offsetHeight=s,n=this.infiniteContentPos[1],this.promiseInfinitePos(i,n),this.infiniteElementsPos[e]=[n,n+s],this.infiniteContentPos[1]+=s;this.updateInfinitePos(),o=this.infiniteContentPos[1]-this.infiniteContentPos[0]-c,this.scrollerHeight+=o,this.maxScrollY=r.min(this.wrapperHeight-this.scrollerHeight,0),this._execEvent("modify")}promiseInfinitePos(t,e){this.infiniteUpdatePos.push(arguments)}setInfiniteTranslate(t,e){t.style[s.prefixStyle.transform]="translate3d(0px, "+e+"px, 0px)"}updateInfinitePos(){h(()=>{this.infiniteUpdatePos.each((t,e)=>{this.setInfiniteTranslate.apply(this,e)}),this.infiniteUpdatePos=[]})}updateInfiniteContent(t){t.style[s.prefixStyle.transform]="translate3d(-10000px, -10000px, 0px)",this.getInfiniteDataFiller.call(this,t,t._phase,t.__phase),t._offsetHeight=t.offsetHeight}updateInfiniteData(t,e,i){e.each((e,i)=>{this.infiniteCache[t++]=i,this.options.finite&&this.getFiniteCacheBuffer.call(this,i,t-1)}),this.infiniteDataLength=t}updateInfiniteCache(t){return this.getInfiniteCacheBuffer.call(this,this.infiniteCache[t],t)}update(t,e){this.updating=!0,e?this.updated=!1:(this.updated=!0,this.datasetInfiniteLock=!1,this.options.finite?this.setupFinite():this.setupInfinite()),this.datasetInfinite(function(i){if(this.options.finite)e||(this.scroller.innerHTML=null),this.scroller.appendChild(this.finiteFragment),this.updating=!1;else{if(i)return this.updating=!1;this.rearrangeInfinite(1,function(){this.updateInfinitePos(),this.updating=!1})}!i&&t&&t.call(this)})}_execEvent(t){let e=arguments,i=this._events[t];if(i)for(let t of i)t.apply(this,[].slice.call(e,1))}_refresh(t){let e=o.getRect(this.wrapper),i=o.getRect(this.scroller);this.wrapperWidth=e.clientWidth,this.wrapperHeight=e.clientHeight,this.options.infinite||(this.scrollerWidth=r.round(i.width*this.scale),this.scrollerHeight=r.round(i.height*this.scale),this.minScrollX=this.options.minScrollX||0,this.minScrollY=this.options.minScrollY||0),this.maxScrollX=this.wrapperWidth-this.scrollerWidth-this.minScrollX,this.maxScrollY=this.wrapperHeight-this.scrollerHeight-this.minScrollY,this.canHorizontalScroll=this.maxScrollX<this.minScrollX,this.canVerticalScroll=this.maxScrollY<this.minScrollY,this.hasHorizontalScroll="auto"==this.options.scrollX?this.canHorizontalScroll:this.options.scrollX,this.hasVerticalScroll="auto"==this.options.scrollY?this.canVerticalScroll:this.options.scrollY,this.options.infinite&&(this.hasVerticalScroll=!0),this.hasHorizontalScroll||(this.maxScrollX=this.minScrollX,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=this.minScrollY,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=o.offset(this.wrapper),this._execEvent("refresh"),t||this.resetPosition()}_drawing(t){this._drawingKeyFrame||(this._drawingKeyFrame=!0,this._drawKeyFrame(t))}_clearKeyFrame(){this._keyFrame=[],this._drawingKeyFrame=!1}_promiseKeyFrame(t,e,i){let n=this._keyFrame;if(i){let i=n[n.length-1];if(i)return void(i[t]=e)}n.push({[t]:e})}_drawKeyFrame(t){let e=this._keyFrame.shift();if(!e)return t&&t.call(this),void(this._drawingKeyFrame=!1);for(let t in e)this["_"+t].apply(this,e[t]);h(()=>{this._drawKeyFrame(t)})}_translate(t,e,i,n,o){if((null!=t||(t=(n=this.getComputedPosition()).x+this.dropX,e=n.y+this.dropY,n=null,!isNaN(t)))&&(t=t||0,e=e||0,i=i||0,n=n||this.options.zoom?this.scale:null,(t!==this.x||e!==this.y||i!==this.z||n!==this.s)&&(this.scrollerStyle[s.prefixStyle.transform]="translate3d("+t+"px,"+e+"px, "+i+"px)"+(n?" scale("+n+")":""),this.x=t,this.y=e,this.z=i,this.s=n,o||(this._x=t,this._y=e),this.indicators)))for(let t=this.indicators.length;t--;)this.indicators[t].updatePosition()}_transitionTime(t){if(t!==this.transitionDuration&&(this.scrollerStyle[s.prefixStyle.transitionDuration]=t?t+"ms":"",this.transitionDuration=t,this.indicators))for(let e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)}_transformOrigin(t){this.scrollerStyle[s.prefixStyle.transformOrigin]=t||this.options.zoomOrigin}_transitionTimingFunction(t){if((t=t||"")!==this.transitionTimingFunction&&(this.scrollerStyle[s.prefixStyle.transitionTimingFunction]=t,this.transitionTimingFunction=t,this.indicators))for(let e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)}_transitionScroll(t,e,i){let n=()=>{if(!this.isInTransition)return;if(Date.now-this.transitionStartTime>2*this.transitionCountTime)return this._execEvent("scrollend","end");let t=this.getComputedPosition();this.dropX=r.round(t.x-this.x)||this.dropX||0,this.dropY=r.round(t.y-this.y)||this.dropY||0,this.x=r.round(t.x),this.y=r.round(t.y),this._execEvent("scroll","scrolling"),h(n)};n()}_checkPerformance(){return this.transitionDelayTime=this._transitionTimeLeft(),this.transitionDelayRate=this.transitionDelayTime/this.transitionCountTime,!(this.transitionDelayRate>.15&&this.transitionCountTime>=2e3&&(application.console.warn(""+this.transitionDelayTime+"ms","",""+this.transitionDelayRate),application.console.warn("","","0.15"),this.transitionDelayRate>.5))}_transitionTimeLeft(){return Date.now()-this.transitionStartTime-this.transitionCountTime}_transitionEnd(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),s.supportTransition&&0==this._checkPerformance()&&(this.options.useTransition=!1,s.supportTransition=!1,device.feat.supportTransition=!1),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._promiseKeyFrame("translate",[this.x,this.y],!0),this._drawing(),this._execEvent("scrollend","end")),this.drawingEnd())}_animate(t,e,i,n){let s=this._x,o=this._y,a=Date.now()-1e3/60,l=a+i;if(this.isAnimating)return;let c=()=>{let u,d,p,f=Date.now(),m=f-a;if(f>=l)return this.isAnimating=!1,this._translate(t,e),void(this.resetPosition(this.options.bounceTime)||this._execEvent("scrollend","end"));p=n(m/i),u=(t-s)*p+s,d=(e-o)*p+o,this._translate(r.round(u),r.round(d)),this.isAnimating&&h(c),this._execEvent("scroll","scrolling")};this.isAnimating=!0,c()}_momentum(e,i){let n,s,o,a,h,c,u,d,p,f,m,g,v;switch(e){case"x":n=this._x,s=this.startX,o=this.minScrollX,a=this.maxScrollX;break;case"y":n=this._y,s=this.startY,o=this.minScrollY,a=this.maxScrollY}return h=this.options.bounce&&this.options.bounceBreakThrough?this.wrapperWidth:0,u=4,f=(p=n-s)<0?-1:1,c=r.min(r.abs(p)/i,this.options.speedLimit),v=r.max(this.options.deceleration-this.acceleration,6e-4)*t,(g=n+(d=r.max(c*c/v,c>.5?2e3*c/u:0))*f)<a?(g=h?a-h*this.options.boundariesLimit*(c/l(8)):a,d=r.abs(g-n),u=1):g>o&&(g=h?h*this.options.boundariesLimit*(c/l(8)):0,d=r.abs(n)+g,u=1),m=d/c*u,{destination:r.round(g),duration:m,speed:c}}_acceleration(){this.isScrolling()&&-1!=this.scrollTrendY&&-1!=this.scrollTrendX&&this.speedM>2?this.gapTime<1e3?this.acceleration=r.min(this.acceleration+5e-4,.001):this.acceleration=r.min(this.acceleration-5e-4,0):this.acceleration=0}_observer(t,e){t.observer({childList:!0,subtree:!0,characterData:!0,attributeFilter:["id","class","style","src","width","height"]},t=>{clearTimeout(this.observerTimeout),t.length&&(this.observerTimeout=setTimeout(()=>{e.call(this,t)},1e3))})}_resize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.refresh()},this.options.resizePolling)}_directionLocked(t,i,n,s){if(!(!1===this.broken&&this.moveTime-this.endTime>200&&t<l(5)&&i<l(5))){if(this.options.directionLockThresholdX&&(t>i+l(this.options.directionLockThresholdX)?this.directionLocked="h":this.directionLocked="v"),this.options.directionLockThresholdY&&(i>t+l(this.options.directionLockThresholdY)?this.directionLocked="v":this.directionLocked="h"),this.directionLocked||this.options.freeScroll||(t>i+l(this.options.directionLockThreshold)?this.directionLocked="h":i>=t+l(this.options.directionLockThreshold)?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);n=0}return{x:n,y:s}}}_initPrevant(){this.scroller.on("preventscroll",t=>{let e=t.data.scroll,i=t.data.prevent;this.preventscroll=i,i&&this._execEvent("scrollend","end"),e.options.coverPropagation&&this.isScrolling()&&(e.stopAnimation=!0,this.preventscroll=!1)})}_pieceEvent(t){return o.eventType[t.type]===this.initiated}_preventscroll(t){this.wrapper.trigger("preventscroll",{prevent:t,scroll:this})}_prevent(t,e,i,n,s,a){let h=!1;if(i=r.round(i||this._x),n=r.round(n||this._y),!this.enabled)return!0;switch(e){case 1:if(this.initiated&&!this._pieceEvent(t))return!0;if(this.preventscroll=!1,this.stopAnimation=!1,1!=o.eventType[t.type]){let e;if(0!==(e=t.which?t.button:t.button<2?0:4==t.button?1:2))return!0}break;case 2:if(!this._pieceEvent(t))return!0;if(this.preventscroll)return!0;break;case 3:if(!this._pieceEvent(t))return!0;if(t.touches&&t.touches.length>0)return!0;break;case 4:this.preventscroll=!1;break;case 5:if(t.preventDefault(),this.preventscroll)return!0}if(this.options.preventDefault&&[1,3].consistOf(e)&&t.changedTouches&&!App.preventDefaultException(t,this.options.preventDefaultException)&&t.preventDefault(),0!=this.options.stopPropagation&&[2,5].consistOf(e))if(1==this.options.stopPropagation)t.stopPropagation();else if("auto"==this.options.stopPropagation&&(this.canHorizontalScroll&&"h"==this.directionLocked&&!(i>=this.minScrollX||i<=this.maxScrollX)||this.canVerticalScroll&&"v"==this.directionLocked&&!(n>=this.minScrollY||n<=this.maxScrollY))&&(h=!0),"x"==this.options.stopPropagation&&r.abs(s)>r.abs(a)?h=!0:"y"==this.options.stopPropagation&&r.abs(a)>r.abs(s)&&(h=!0),this._preventscroll(h),this.options.coverPropagation&&1==e&&this.stopAnimation)return!0;return!1}_start(t){if(this._prevent(t,1))return;let e=t.touches?t.touches[t.touches.length-1]:t;this.initiated=o.eventType[t.type],this.moved=!1,this.moving=!1,this.broken=!1,this.holding=!0,this.distX=0,this.distY=0,this.moveTrendX=0,this.moveTrendY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._clearKeyFrame(),this.options.useTransition&&this.isInTransition?(this.broken=!0,this.isInTransition=!1,this._promiseKeyFrame("translate",[null,null,null,null]),this._promiseKeyFrame("transitionTime",null,!0),s.isBadTransition&&this._promiseKeyFrame("transitionTime",[1e-4],!0),this._promiseKeyFrame("transitionTimingFunction",null,!0),this._drawing(),this._execEvent("scrollend","break")):!this.options.useTransition&&this.isAnimating&&(this.broken=!0,this.isAnimating=!1,this._execEvent("scrollend","break")),this.startTime=Date.now(),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this._execEvent("beforescrollstart","hold")}_move(t){if(this._prevent(t,2))return;let e,i,n,s,o,a,h=t.touches?t.touches[t.touches.length-1]:t,l=0,c=h.pageX-this.pointX,u=h.pageY-this.pointY,d=Date.now(),p=r.min(d-this.movedTimestamp,300);if(this.moveTime=d,o=c>0?-1:c<0?1:0,a=u>0?-1:u<0?1:0,c=r.min(r.abs(c),this.options.stepLimit)*-o,u=r.min(r.abs(u),this.options.stepLimit)*-a,this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=r.round(c),this.distY+=r.round(u),n=r.abs(this.distX),s=r.abs(this.distY),this.speedX=r.abs(c)/p,this.speedY=r.abs(u)/p,this.speedM=r.max(this.speedX,this.speedY),this.bounceDragPhase++,(l=this._directionLocked(n,s,c,u))&&(c=this.hasHorizontalScroll?l.x:0,u=this.hasVerticalScroll?l.y:0,e=this._x+c,i=this._y+u,(e>this.minScrollX||e<this.maxScrollX)&&(this.bounceDragPhase=e>this.minScrollX?e-this.minScrollX:this.maxScrollX-e,e=this.options.bounce?this._x+c/(this.options.bounceDrag+this.bounceDragPhase/this.options.bounceDragRate):e>this.minScrollX?this.minScrollX:this.maxScrollX),(i>this.minScrollY||i<this.maxScrollY)&&(this.bounceDragPhase=i>this.minScrollY?i-this.minScrollY:this.maxScrollY-i,i=this.options.bounce?this._y+u/(this.options.bounceDrag+this.bounceDragPhase/this.options.bounceDragRate):i>this.minScrollY?this.minScrollY:this.maxScrollY),this.moveTrendX=this.hasHorizontalScroll?this.directionX==o?1:-1:0,this.moveTrendY=this.hasVerticalScroll?this.directionY==a?1:-1:0,-1!=this.moveTrendX&&-1!=this.moveTrendY||this._clearKeyFrame(),this.directionX=o,this.directionY=a,!this._prevent(t,2,e,i,l.x,l.y))){if(this._x===e&&this._y===i||(this.moved||(this._execEvent("scrollstart"),this.startTime=Date.now()),this.moved=!0,this.moving=!0,this.broken=!1,this.holding=!1,this._x=e,this._y=i,this._promiseKeyFrame("translate",[e,i,null,null,!0]),this._promiseKeyFrame("transitionTime",null,!0),this._drawing()),this.movedTimestamp=d,d-this.startTime>300)return this.startTime=d,this.startX=this._x,this.startY=this._y,this._execEvent("scroll","movestep");this._execEvent("scroll","moving")}}_end(t){if(this._prevent(t,3))return;let e,i,n=t.changedTouches?t.changedTouches.length:0,s=(n&&t.changedTouches[n],Date.now()-this.startTime),o=r.round(this._x),a=r.round(this._y),h=o-this.startX,l=a-this.startY,c=(r.abs(h),r.abs(l),h>0?-1:h<0?1:0),u=l>0?-1:l<0?1:0,d=0,p="";if(this.moving=!1,this.initiated=0,this.gapTime=Date.now()-this.endTime,this.endTime=Date.now(),!this.resetPosition(this.options.bounceTime)){if(!this.moved&&!this.options.snap)return this._execEvent("scrollcancel");if(this.options.momentum&&s<300&&(e=this.hasHorizontalScroll?this._momentum("x",s):{destination:o,duration:0},i=this.hasVerticalScroll?this._momentum("y",s):{destination:a,duration:0},o=e.destination,a=i.destination,d=r.max(e.duration,i.duration),this.speed=r.max(e.speed||0,i.speed||0)),this.options.snap){let t=this._nearestSnap(o,a);this.currentPage=t,d=this.options.snapDuration||r.max(r.max(r.min(r.abs(o-t.x),1e3),r.min(r.abs(a-t.y),1e3)),300),o=t.x,a=t.y,this.directionX=0,this.directionY=0,p=this.options.snapEasing}if(o!=this._x||a!=this._y)return(o>this.minScrollY||o<this.maxScrollX||a>this.minScrollY||a<this.maxScrollY)&&(p=x.quadratic),this.scrollTrendX=this.hasHorizontalScroll?this._directionX==c?1:-1:0,this.scrollTrendY=this.hasVerticalScroll?this._directionY==u?1:-1:0,this._acceleration(),this.directionX=c,this.directionY=u,this._directionX=c,this._directionY=u,this.moved=!1,this.moving=!1,void this.scrollTo(o,a,d,p);this._execEvent("scrollend","end")}}_zoomStart(t){let e=r.abs(t.touches[0].pageX-t.touches[1].pageX),i=r.abs(t.touches[0].pageY-t.touches[1].pageY);this.touchesDistanceStart=r.sqrt(e*e+i*i),this.startScale=this.scale,this.originX=r.abs(t.touches[0].pageX+t.touches[1].pageX)/2-this.x,this.originY=r.abs(t.touches[0].pageY+t.touches[1].pageY)/2-this.y,this._execEvent("zoomStart")}_zoom(t){if(this._prevent(t,2))return;let e,i,n,s=r.abs(t.touches[0].pageX-t.touches[1].pageX),o=r.abs(t.touches[0].pageY-t.touches[1].pageY),a=r.sqrt(s*s+o*o),h=1/this.touchesDistanceStart*a*this.startScale;this.scaled=!0,h<this.options.zoomMin?h=.5*this.options.zoomMin*r.pow(2,h/this.options.zoomMin):h>this.options.zoomMax&&(h=2*this.options.zoomMax*r.pow(.5,this.options.zoomMax/h)),e=h/this.startScale,i=this.originX-this.originX*e+this.startX,n=this.originY-this.originY*e+this.startY,this.scale=h,this.scrollTo(i,n,0)}_zoomEnd(t){if(this._prevent(t,3))return;let e,i,n;this.isInTransition=!1,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this._refresh(),n=this.scale/this.startScale,e=this.originX-this.originX*n+this.startX,i=this.originY-this.originY*n+this.startY,e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this._x==e&&this._y==i||this.scrollTo(e,i,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}_wheelZoom(t){let e,i,n=this;if(void 0===this.wheelTimeout){if(this._prevent(t,4))return;n._execEvent("scrollstart")}if(!this._prevent(t,5)){if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){n._prevent(t,6)||n._execEvent("zoomEnd")},400),"deltaX"in t)e=-t.deltaY/r.abs(t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaY/r.abs(t.wheelDeltaY);else if("wheelDelta"in t)e=t.wheelDelta/r.abs(t.wheelDelta);else{if(!("detail"in t))return;e=-t.detail/r.abs(t.wheelDelta)}i=this.scale+(e||0)/5,this.zoom(i,t.pageX,t.pageY,0)}}_wheel(t){let e,i,n,s,o,a,h,l,c=0,u=this;if(!this.preventWheel){if(void 0===this.wheelTimeout){if(this._prevent(t,4))return;this._execEvent("scrollstart")}if(!this._prevent(t,5)){if(this.bounceDragPhase>10)return this.preventWheel=!0,void setTimeout(function(){u.preventWheel=!1},1200);if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){u._prevent(t,6)||u.resetPosition(u.options.bounceTime)||(u._promiseKeyFrame("translate",[u._x,u._y]),u._drawing(),u._execEvent("scrollend","end"),u.wheeling=!1,u.borderBouncing=!1,u.directionLocked=void 0,u.wheelTimeout=void 0)},400),"deltaX"in t)e=-t.deltaX,i=-t.deltaY;else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,n=r.abs(e),s=r.abs(i),this.options.snap)return o=this.currentPage.pageX,a=this.currentPage.pageY,e>0?o--:e<0&&o++,i>0?a--:i<0&&a++,void this.goToPage(o,a);!this.hasWheelDeltaX&&e&&(this.hasWheelDeltaX=!0),!this.hasVerticalScroll&&!this.hasWheelDeltaX&&n<s&&(e=i,i=0,this.directionLocked),(c=this._directionLocked(n,s,e,i))&&(h=this.hasHorizontalScroll?c.x:0,l=this.hasVerticalScroll?c.y:0,o=this._x+h,a=this._y+l,(o>this.minScrollX||o<this.maxScrollX)&&("all"===this.options.bounce?(this.bounceDragPhase++,o=this._x+e/(this.options.bounceDrag+this.bounceDragPhase)):o=o>this.minScrollX?this.minScrollX:this.maxScrollX),(a>this.minScrollY||a<this.maxScrollY)&&("all"===this.options.bounce?(this.bounceDragPhase++,a=this._y+i/(this.options.bounceDrag+this.bounceDragPhase)):a=a>this.minScrollY?this.minScrollY:this.maxScrollY),this.directionX=this.hasHorizontalScroll?this._x-o>0?1:-1:0,this.directionY=this.hasVerticalScroll?this._y-a>0?1:-1:0,this.wheeling=!0,this.scrollTo(o,a,0),this._execEvent("scroll","wheel"),this._execEvent("wheel","wheel"))}}}_key(t){if(!this.enabled)return;let e,i=this.options.snap,n=i?this.currentPage.pageX:this._x,s=i?this.currentPage.pageY:this._y,o=Date.now(),a=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._promiseKeyFrame("translate",[r.round(e.x),r.round(e.y)]),this._drawing(),this.isInTransition=!1),this.keyAcceleration=o-a<200?r.min(this.keyAcceleration+.25,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?n+=i?1:this.wrapperWidth:s+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?n-=i?1:this.wrapperWidth:s-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:n=i?this.pages.length-1:this.maxScrollX,s=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=this.minScrollX,s=this.minScrollY;break;case this.options.keyBindings.left:n+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=i?1:5+this.keyAcceleration>>0;break;default:return}i?this.goToPage(n,s):(n>this.minScrollX?(n=this.minScrollX,this.keyAcceleration=0):n<this.maxScrollX&&(n=this.maxScrollX,this.keyAcceleration=0),s>this.minScrollY?(s=this.minScrollY,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(n,s),this.keyTime=o)}_nearestSnap(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};let i=0,n=this.pages.length,s=0;if(r.abs(t-this.absStartX)<this.snapThresholdX&&r.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>this.minScrollX?t=this.minScrollX:t<this.maxScrollX&&(t=this.maxScrollX),e>this.minScrollY?e=this.minScrollY:e<this.maxScrollY&&(e=this.maxScrollY);i<n;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(n=this.pages[i]?this.pages[i].length:0;s<n;s++)if(e>=this.pages[0][s].cy){e=this.pages[0][s].y;break}return i==this.currentPage.pageX&&((i+=this.directionX)<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),s==this.currentPage.pageY&&((s+=this.directionY)<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),e=this.pages[0][s].y),{x:t,y:e,pageX:i,pageY:s}}_pulling(t,e){let i=1,n=0,o=0,a=0,h=t.style,c=-l(t.getAttribute("threshold")||void 0),u=-l(t.getAttribute("rise")),d=!!t.attributes.getNamedItem("auto"),p=t.getAttribute("event-target")||"scroll",f=t.getAttribute("prevent-default")||!this.options.finite&&!this.options.infinite;switch(r.abs(c)>=0||(c=-l(50)),"scroll"!==p&&(f=!0),e){case-1:e="minScrollX",i=-1;break;case 1:e="maxScrollX",i=1;break;case-2:e="minScrollY",i=-1;break;case 2:e="maxScrollY",i=1}this.on("scroll",function(r){if(n=this.y-this[e]+(a>3?i*c:0),(o=i*n)<=0&&((0==a||this.updated&&-2==a)&&(a=1),1==a&&(a=2,t.removeAttribute("pullend"),t.removeAttribute("pullover"),t.setAttribute("pullstart","")),2==a&&(a=3,this._execEvent("pullstart",null)),3==a&&o<c&&(d||"moving"==r))){a=4,this.pulling=!0,this._execEvent("pulling",null),t.removeAttribute("pullstart"),t.setAttribute("pulling",""),this[e]+=i*c,f?this.one("scrollend",function(){switch(a=-1,t.removeAttribute("pulling"),t.setAttribute("pullend",""),this._execEvent("pulling",null),p){case"scope":case"module":App.module.refresh(null,e=>{this.one("scrollend",function(){a=0,t.removeAttribute("pullend"),e&&e()}),this.pulling=!1,this._execEvent("pullend",null),this._refresh(!0),this.resetPosition(this.options.bounceTime),0==this.isBounce()&&this._execEvent("scrollend",null)},null,"scope"!==p)}}):(this.one("scrollend",function(){i<0&&(a=-1),t.removeAttribute("pulling"),t.setAttribute("pullend",""),this._execEvent("pulling",null),this.update(function(){this.one("scrollend",function(){(i<0?-1==a:4==a)&&(a=0),t.removeAttribute("pullend")}),this.pulling=!1,this._execEvent("pullend",null),this._refresh(!0),i>0?(t.removeAttribute("pullend"),this.scrollBy(this.hasHorizontalScroll?u:0,this.hasVerticalScroll?u:0,this.options.bounceTime)):this.resetPosition(this.options.bounceTime)},i>0)}),i>0&&this.one("infinitedataend",function(){a=-1,this.one("scrollend",function(){a=-2}),t.removeAttribute("pulling"),t.removeAttribute("pullend"),t.setAttribute("pullover",""),this.pulling=!1,this._execEvent("pullover",null),this._refresh(!0),this.resetPosition(this.options.bounceTime)}));let n=()=>{setTimeout(()=>{4===a&&(this.isBounce()?n():this._execEvent("scrollend",null))},1e3)};n()}a&&(h[s.prefixStyle.transform]="translate3d(0px,"+n+"px, 0px)",t.trigger("pull",{pos:n}))})}_init(){this._initBase(),this._initEvents(),this._initPrevant(),this._initHistory(),this._initObserver()}_initBase(){this._events={},this.initiated=!1,this.x=0,this.y=0,this._x=0,this._y=0,this.minScrollX=0,this.minScrollY=0,this.maxScrollX=0,this.maxScrollY=0,this.scale=r.min(r.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax),this.directionX=0,this.directionY=0,this.acceleration=0,this.bounceDragPhase=0,this.transitionDelayRate=0,this.transitionDelayTime=0,this._keyFrame=[]}_initHistory(){let t,e=this.uuid;if(1==this.options.history)try{2==(t=(t=sessionStorage.getItem(e)).split(",")).length&&(this.options.startX=Number(t[0]),this.options.startY=Number(t[1]))}catch(t){}this.on("scrollend",function(){try{sessionStorage.setItem(e,this.x+","+this.y),App.on("transformstart background",function(){sessionStorage.removeItem(e)})}catch(t){}})}_initKaleidoscope(){this.options.zoom&&this._initZoom(),this.options.mouseWheel&&this._initWheel(),this.options.keyBindings&&this._initKeys(),this.options.snap&&this._initSnap(),this.options.pull&&this._initPull(),this.options.finite&&this._initFinite(),this.options.infinite&&this._initInfinite(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators()}_initEvents(t){let e=t?o.removeEvent:o.addEvent,n=this.options.bindToWrapper?this.wrapper:i;e(i,"orientationchange",this),e(i,"resize",this),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(n,"mousemove",this),e(n,"mousecancel",this),e(n,"mouseup",this)),s.feat.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,s.prefixPointerEvent("pointerdown"),this),e(n,s.prefixPointerEvent("pointermove"),this),e(n,s.prefixPointerEvent("pointercancel"),this),e(n,s.prefixPointerEvent("pointerup"),this)),s.feat.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(n,"touchmove",this),e(n,"touchcancel",this),e(n,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)}_initObserver(){this.options.infinite||this._observer(this.scroller,function(t){this.updating||(this.hasVerticalScroll&&this.scroller.offsetHeight!==this.scrollerHeight||this.hasHorizontalScroll&&this.scroller.offsetWidth!==this.scrollerWidth)&&this.refresh()})}_indicatorsMap(t){if(this.indicators)for(let e of this.indicators)t.call(e)}_initIndicators(){let t,e=this.options.interactive,i="string"!=typeof this.options.scrollbars,n=[];this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:u("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,drag:this.options.bounceDrag,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:u("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,drag:this.options.bounceDrag,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators));for(let t of n)this.indicators.push(new d(this,t));this.options.fadeScrollbars&&(this.on("scrollend scrollcancel",function(t){"break"!==t&&this._indicatorsMap(function(){this.fade()})}),this.on("scrollstart beforescrollstart",function(t){this._indicatorsMap(function(){this.fade(1,"hold"===t)})})),this.on("refresh",function(){this._indicatorsMap(function(){this.refresh()})}),this.on("modify",function(){this._indicatorsMap(function(){this.refresh()})}),this.on("destroy",function(){this._indicatorsMap(function(){this.destroy()}),delete this.indicators})}_initWheel(){o.addEvent(this.wrapper,"wheel",this),o.addEvent(this.wrapper,"mousewheel",this),o.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){o.removeEvent(this.wrapper,"wheel",this),o.removeEvent(this.wrapper,"mousewheel",this),o.removeEvent(this.wrapper,"DOMMouseScroll",this)})}_initKeys(t){let e,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in n)this.options.keyBindings[e]=this.options.keyBindings[e]||n[e];o.addEvent(i,"keydown",this),this.on("destroy",function(){o.removeEvent(i,"keydown",this)})}_initSnap(){void 0==this._options.mouseWheel&&(this.options.mouseWheel=!1),void 0==this._options.speedLimit&&(this.options.speedLimit=l(.5)),void 0==this._options.fadeScrollbars&&(this.options.fadeScrollbars=!1),this.options.indicators&&void 0==this._options.resizeScrollbars&&(this.options.indicators.resize=!1),this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){let t,e,i,n,s,a,h,l=0,c=0,u=0,d=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=r.round(d/2),n=r.round(p/2);u>-this.scrollerWidth;){for(this.pages[l]=[],t=0,s=0;s>-this.scrollerHeight;)this.pages[l][t]={x:r.max(u,this.maxScrollX),y:r.max(s,this.maxScrollY),width:d,height:p,cx:u-i,cy:s-n},s-=p,t++;u-=d,l++}else for(t=(a=this.options.snap).length,e=-1;l<t;l++)h=o.getRect(a[l]),(0===l||h.left<=o.getRect(a[l-1]).left)&&(c=0,e++),this.pages[c]||(this.pages[c]=[]),u=r.max(-h.left,this.maxScrollX),s=r.max(-h.top,this.maxScrollY),i=u-r.round(h.width/2),n=s-r.round(h.height/2),this.pages[c][e]={x:u,y:s,width:h.width,height:h.height,cx:i,cy:n},u>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})}_initZoom(){this._transformOrigin("0 0")}_initPull(){this.pullup&&this._pulling(this.pullup,2),this.pulldown&&this._pulling(this.pulldown,-2),this.pullright&&this._pulling(this.pullright,1),this.pullleft&&this._pulling(this.pullleft,-1)}_initFinite(){this.minScrollX=0,this.minScrollY=0,this.fragments={},this.infiniteCache=[],this.turnoverTimes=0,this.finiteFragment=this.options.finiteFragment,this.getInfiniteDataset=this.options.getInfiniteDataset,this.getFiniteCacheBuffer=this.options.getFiniteCacheBuffer,this.update(function(){this.scrollcover&&(this.scrollcover=this.scrollcover.remove()),this._refresh()})}_initInfinite(){this.minScrollX=0,this.minScrollY=0,this.infiniteElements=this.options.infiniteElements,this.infiniteLength=this.infiniteElements.length,this.infiniteCache=[],this.turnoverTimes=0,this.infiniteDataLength=0,this.scrollerHeight=0,this.preReorderInfiniteY=this.options.startY,this.infiniteItemSize=!!this.options.infiniteItemSize&&l(this.options.infiniteItemSize),this.getInfiniteDataset=this.options.getInfiniteDataset,this.setInfiniteDataFiller=this.options.setInfiniteDataFiller,this.getInfiniteDataFiller=this.options.getInfiniteDataFiller,this.getInfiniteCacheBuffer=this.options.getInfiniteCacheBuffer,this.setupInfinite(),this.infiniteElements.each((t,e)=>{e.style["z-index"]=t+1}),this.one("revert infinitedataloaded",()=>{this._refresh(),h(()=>{this._refresh()})}),this.on("scroll scrollend",t=>{this.borderBouncing||"scrolling"==t&&1===this.scrollTrendY&&this.transitionCountTime-this._transitionTimeLeft()>.6*this.transitionCountTime||this.reorderInfinite()}),this.update(()=>{this.scrollcover&&this.scrollcover.remove(),this.on("refresh",()=>{this.refreshInfiniteAllPos(),this.reorderInfinite()}),this.infiniteElements.each((t,e)=>{this._observer(e,()=>{!0!==this.infiniteRearranging&&e.offsetHeight!==e._offsetHeight&&(this.refreshInfiniteAllPos(),this.reorderInfinite())})}),this._refresh()})}}function u(t,e,i){var s=n.createElement("scrollbar"),o=n.createElement("indicator");return"h"==t?(!0===i&&(s.css({height:"3dpi",right:"2dpi",bottom:"3dpi",left:"2dpi"}),o.css({height:"100%"})),s.setAttribute("x","")):(!0===i&&(s.css({width:"3dpi",top:"2dpi",right:"3dpi",bottom:"2dpi"}),o.css({width:"100%"})),s.setAttribute("y","")),e||(s.style.pointerEvents="none"),s.appendChild(o),s}class d{constructor(t,e){this.wrapper="string"==typeof e.el?n.querySelector(e.el):e.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,drag:3,fade:!1,speedRatioX:0,speedRatioY:0};for(let t in e)this.options[t]=e[t];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(o.addEvent(this.indicator,"touchstart",this),o.addEvent(i,"touchend",this)),this.options.disablePointer||(o.addEvent(this.indicator,"MSPointerDown",this),o.addEvent(i,"MSPointerUp",this)),this.options.disableMouse||(o.addEvent(this.indicator,"mousedown",this),o.addEvent(i,"mouseup",this))),this.options.fade&&(this.wrapperStyle[s.prefixStyle.transitionDuration]="0ms",this.wrapperStyle.opacity="0")}handleEvent(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t)}}destroy(){this.options.interactive&&(o.removeEvent(this.indicator,"touchstart",this),o.removeEvent(this.indicator,"MSPointerDown",this),o.removeEvent(this.indicator,"mousedown",this),o.removeEvent(i,"touchmove",this),o.removeEvent(i,"MSPointerMove",this),o.removeEvent(i,"mousemove",this),o.removeEvent(i,"touchend",this),o.removeEvent(i,"MSPointerUp",this),o.removeEvent(i,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.remove()}fade(t,e){if(t&&this.visible||!t&&!this.visible)return;if(e&&!this.visible)return;clearTimeout(this.fadeTimeout),this.fadeTimeout=null;let i=t?0:250,n=t?0:100;s.isBadTransition&&(i=1e-4),this.wrapperStyle[s.prefixStyle.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(()=>{h(()=>{t=t?"1":"0",this.wrapperStyle.opacity=t,this.visible=+t})},n)}transitionTime(t){this.indicatorStyle[s.prefixStyle.transitionDuration]=t?t+"ms":""}transitionTimingFunction(t){this.indicatorStyle[s.prefixStyle.transitionTimingFunction]=t}updatePosition(){let t=this.scroller,e=t._x,i=t._y,n=this.options.listenX&&r.round(this.sizeRatioX*(e-t.minScrollX))||0,o=this.options.listenY&&r.round(this.sizeRatioY*(i-t.minScrollY))||0;this.options.ignoreBoundaries||(e>t.minScrollX?n=this.options.resize?r.max(n-e,l(8)-this.indicatorWidth):this.minBoundaryX:e<t.maxScrollX&&(n=this.options.resize?r.min(n+(t.maxScrollX-e),this.maxBoundaryX-l(8)):this.maxBoundaryX),i>t.minScrollY?o=this.options.resize?r.max(o-i,l(8)-this.indicatorHeight):this.minBoundaryY:i<t.maxScrollY&&(o=this.options.resize?r.min(o+(t.maxScrollY-i),this.maxBoundaryY-l(8)):this.maxBoundaryY)),this.x=n,this.y=o,this.indicatorStyle[s.prefixStyle.transform]="translate3d("+n+"px,"+o+"px, 0)"}refresh(){let t=this.scroller;this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=t.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=t.hasVerticalScroll?"block":"none":this.indicatorStyle.display=t.hasHorizontalScroll||t.hasVerticalScroll?"block":"none",t.hasHorizontalScroll&&t.hasVerticalScroll?(this.wrapper.removeAttribute("lone"),this.wrapper.setAttribute("both",""),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right=l(8)+"px":this.wrapper.style.bottom=l(8)+"px")):(this.wrapper.removeAttribute("both"),this.wrapper.setAttribute("lone",""),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right=l(2)+"px":this.wrapper.style.bottom=l(2)+"px")),this.minIndicatorWidth=t.options.snap?this.indicator.offsetWidth:l(4),this.minIndicatorHeight=t.options.snap?this.indicator.offsetHeight:l(4);this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.offsetWidth,this.options.resize?(this.indicatorWidth=r.max(r.round(this.wrapperWidth*this.wrapperWidth/(t.scrollerWidth||this.wrapperWidth||l(1))),this.minIndicatorWidth),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.offsetWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.minBoundaryX=-this.indicatorWidth+l(4),this.maxBoundaryX=this.wrapperWidth-l(4),this.sizeRatioX=this.options.speedRatioX||t.maxScrollX&&this.maxPosX/(t.maxScrollX-t.minScrollX)),this.options.listenY&&(this.wrapperHeight=this.wrapper.offsetHeight,this.options.resize?(this.indicatorHeight=r.max(r.round(this.wrapperHeight*this.wrapperHeight/(t.scrollerHeight||this.wrapperHeight||l(1))),this.minIndicatorHeight),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.offsetHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.minBoundaryY=-this.indicatorHeight+l(4),this.maxBoundaryY=this.wrapperHeight-l(4),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||t.maxScrollY&&this.maxPosY/(t.maxScrollY-t.minScrollY)),this.updatePosition()}_start(t){let e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=Date.now(),this.options.disableTouch||o.addEvent(i,"touchmove",this),this.options.disablePointer||o.addEvent(i,"MSPointerMove",this),this.options.disableMouse||o.addEvent(i,"mousemove",this),this.scroller._execEvent("beforescrollstart","hold")}_move(t){let e,i,n,s,o=t.touches?t.touches[0]:t;Date.now();this.moved||this.scroller._execEvent("scrollstart"),this.moved=!0,e=o.pageX-this.lastPointX,this.lastPointX=o.pageX,i=o.pageY-this.lastPointY,this.lastPointY=o.pageY,n=this.x+e,s=this.y+i,this._pos(n,s),t.preventDefault(),t.stopPropagation()}_end(t){if(!this.initiated)return;this.initiated=!1,t.preventDefault(),t.stopPropagation(),o.removeEvent(i,"touchmove",this),o.removeEvent(i,"MSPointerMove",this),o.removeEvent(i,"mousemove",this);let e=this.scroller;if(e.options.snap){let t=e._x,i=e._y,n=e._nearestSnap(t,i),s=this.options.snapDuration||r.max(r.max(r.min(r.abs(t-n.x),1e3),r.min(r.abs(i-n.y),1e3)),300);t==n.x&&i==n.y||(e.directionX=0,e.directionY=0,e.currentPage=n,e.scrollTo(n.x,n.y,s,e.options.snapEasing))}this.moved&&e._execEvent("scrollend")}_pos(t,e){let i=this.scroller,n=i._x,s=i._y;t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?r.round(t/this.sizeRatioX):n,e=this.options.listenY?r.round(e/this.sizeRatioY):s,i.scrollTo(t,e)}}return c.METHOD=o,c.BROWSER=s,c.EASEING=x,c}},_=(t,e,i)=>{var n=device.ui.scale||1,s=["","webkit","moz","MS","ms","o"],o=e.createElement("div"),r="function",a=Math.round,h=Math.abs,l=Date.now;function c(t,e,i){return setTimeout(g(t,i),e)}function u(t,e,i){return!!Array.isArray(t)&&(d(t,i[e],i),!0)}function d(t,e,n){var s;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(s=0;s<t.length;)e.call(n,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(n,t[s],s,t)}function p(t,e,n){for(var s=Object.keys(e),o=0;o<s.length;)(!n||n&&t[s[o]]===i)&&(t[s[o]]=e[s[o]]),o++;return t}function f(t,e){return p(t,e,!0)}function m(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&p(n,i)}function g(t,e){return function(){return t.apply(e,arguments)}}function v(t,e){return typeof t==r?t.apply(e&&e[0]||i,e):t}function y(t,e){return t===i?e:t}function b(t,e,i){d(S(e),function(e){t.addEventListener(e,i,!1)})}function w(t,e,i){d(S(e),function(e){t.removeEventListener(e,i,!1)})}function x(t,e){return t.indexOf(e)>-1}function S(t){return t.trim().split(/\s+/g)}function _(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function E(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((o=(n=s[a])?n+r:e)in t)return o;a++}return i}var P=1;function k(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var A="ontouchstart"in t,O=E(t,"PointerEvent")!==i,C=A&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D=25,I=1,M=2,R=4,L=8,Y=1,X=2,N=4,z=8,F=16,B=X|N,H=z|F,W=B|H,j=["x","y"],V=["clientX","clientY"];function q(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){v(t.options.enable,[t])&&i.handler(e)},this.init()}function U(t,e,n){var s=n.pointers.length,o=n.changedPointers.length,r=e&I&&s-o==0,a=e&(R|L)&&s-o==0;n.isFirst=!!r,n.isFinal=!!a,r&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,s=e.pointers,o=s.length;n.firstInput||(n.firstInput=K(e));o>1&&!n.firstMultiple?n.firstMultiple=K(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,a=n.firstMultiple,c=a?a.center:r.center,u=e.center=$(s);e.timeStamp=l(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=J(c,u),e.distance=Z(c,u),function(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};e.eventType!==I&&o.eventType!==R||(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}(n,e),e.offsetDirection=G(e.deltaX,e.deltaY),e.scale=a?function(t,e){return Z(e[0],e[1],V)/Z(t[0],t[1],V)}(a.pointers,s):1,e.rotation=a?function(t,e){return J(e[1],e[0],V)-J(t[1],t[0],V)}(a.pointers,s):0,function(t,e){var n,s,o,r,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=L&&(l>D||a.velocity===i)){var c=a.deltaX-e.deltaX,u=a.deltaY-e.deltaY,d=function(t,e,i){return{x:e/t||0,y:i/t||0}}(l,c,u);s=d.x,o=d.y,n=h(d.x)>h(d.y)?d.x:d.y,r=G(c,u),t.lastInterval=e}else n=a.velocity,s=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=n,e.velocityX=s,e.velocityY=o,e.direction=r}(n,e);var d=t.element;(function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1})(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,n),t.emit("Touch.input",n),t.recognize(n),t.session.prevInput=n}function K(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:a(t.pointers[i].clientX),clientY:a(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:$(e),deltaX:t.deltaX,deltaY:t.deltaY}}function $(t){var e=t.length;if(1===e)return{x:a(t[0].clientX),y:a(t[0].clientY)};for(var i=0,n=0,s=0;s<e;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:a(i/e),y:a(n/e)}}function G(t,e){return t===e?Y:h(t)>=h(e)?t>0?X:N:e>0?z:F}function Z(t,e,i){i||(i=j);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function J(t,e,i){i||(i=j);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}q.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(k(this.element),this.evWin,this.domHandler)}};var Q={mousedown:I,mousemove:M,mouseup:R},tt="mousedown",et="mousemove mouseup";function it(){this.evEl=tt,this.evWin=et,this.allow=!0,this.pressed=!1,q.apply(this,arguments)}m(it,q,{handler:function(t){var e=Q[t.type];e&I&&0===t.button&&(this.pressed=!0),e&M&&1!==t.which&&(e=R),this.pressed&&this.allow&&(e&R&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var nt={pointerdown:I,pointermove:M,pointerup:R,pointercancel:L,pointerout:L},st={2:"touch",3:"pen",4:"mouse",5:"kinect"},ot="pointerdown",rt="pointermove pointerup pointercancel";function at(){this.evEl=ot,this.evWin=rt,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&(ot="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),m(at,q,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=nt[n],o=st[t.pointerType]||t.pointerType,r="touch"==o;s&I&&(0===t.button||r)?e.push(t):s&(R|L)&&(i=!0);var a=_(e,t.pointerId,"pointerId");a<0||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var ht={touchstart:I,touchmove:M,touchend:R,touchcancel:L},lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=lt,this.targetIds={},q.apply(this,arguments)}function ut(){q.apply(this,arguments);var t=g(this.handler,this);this.touch=new ct(this.manager,t),this.mouse=new it(this.manager,t)}m(ct,q,{handler:function(t){var e=ht[t.type],i=function(t,e){var i=T(t.touches),n=this.targetIds;if(e&(I|M)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o=T(t.targetTouches),r=T(t.changedTouches),a=[];if(e===I)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;s=0;for(;s<r.length;)n[r[s].identifier]&&a.push(r[s]),e&(R|L)&&delete n[r[s].identifier],s++;if(!a.length)return;return[function(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];_(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}(o.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}),m(ut,q,{handler:function(t,e,i){var n="touch"==i.pointerType,s="mouse"==i.pointerType;if(n)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(R|L)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var dt=E(o.style,"touchAction"),pt=dt!==i,ft="auto",mt="manipulation",gt="none",vt="pan-x",yt="pan-y";function bt(t,e){this.manager=t,this.set(e)}bt.prototype={set:function(t){"compute"==t&&(t=this.compute()),pt&&(this.manager.element.style[dt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return d(this.manager.recognizers,function(e){v(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(x(t,gt))return gt;var e=x(t,vt),i=x(t,yt);if(e&&i)return vt+" "+yt;if(e||i)return e?vt:yt;if(x(t,mt))return mt;return ft}(t.join(" "))},preventDefaults:function(t){if(!pt){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,s=x(n,gt),o=x(n,yt),r=x(n,vt);return s||o&&i&B||r&&i&H?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var wt=1,xt=2,St=4,_t=8,Tt=_t,Et=16;function Pt(t){this.id=P++,this.manager=null,this.options=f(t||{},this.defaults),this.options.enable=y(this.options.enable,!0),this.state=wt,this.simultaneous={},this.requireFail=[]}function kt(t){return t==F?"down":t==z?"up":t==X?"left":t==N?"right":""}function At(t,e){var i=e.manager;return i?i.get(t):t}function Ot(){Pt.apply(this,arguments)}function Ct(){Ot.apply(this,arguments),this.pX=null,this.pY=null}function Dt(){Ot.apply(this,arguments)}function It(){Pt.apply(this,arguments),this._timer=null,this._input=null}function Mt(){Ot.apply(this,arguments)}function Rt(){Ot.apply(this,arguments)}function Lt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Yt(t,e){return(e=e||{}).recognizers=y(e.recognizers,Yt.defaults.preset),new Xt(t,e)}Pt.prototype={defaults:{},set:function(t){return p(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=At(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=At(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return-1===_(e,t=At(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=At(t,this);var e=_(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(n){e.manager.emit(e.options.event+(n?function(t){if(t&Et)return"cancel";if(t&_t)return"end";if(t&St)return"move";if(t&xt)return"start";return""}(i):""),t)}i<_t&&n(!0),n(),i>=_t&&n(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|wt)))return!1;t++}return!0},recognize:function(t){var e=p({},t);if(!v(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Tt|Et|32)&&(this.state=wt),this.state=this.process(e),this.state&(xt|St|_t|Et)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m(Ot,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(xt|St),s=this.attrTest(t);return n&&(i&L||!s)?e|Et:n||s?i&R?e|_t:e&xt?e|St:xt:32}}),m(Ct,Ot,{defaults:{event:"pan",threshold:10*n,pointers:1,direction:W},getTouchAction:function(){var t=this.options.direction,e=[];return t&B&&e.push(yt),t&H&&e.push(vt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&B?(s=0===o?Y:o<0?X:N,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?Y:r<0?z:F,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return Ot.prototype.attrTest.call(this,t)&&(this.state&xt||!(this.state&xt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=kt(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),m(Dt,Ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[gt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&xt)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),m(It,Pt,{defaults:{event:"press",pointers:1,time:500,threshold:5*n},getTouchAction:function(){return[ft]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(R|L)&&!s)this.reset();else if(t.eventType&I)this.reset(),this._timer=c(function(){this.state=Tt,this.tryEmit()},e.time,this);else if(t.eventType&R)return Tt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Tt&&(t&&t.eventType&R?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),m(Mt,Ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[gt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&xt)}}),m(Rt,Ot,{defaults:{event:"swipe",threshold:10*n,velocity:.65,direction:B|H,pointers:1},getTouchAction:function(){return Ct.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(B|H)?e=t.velocity:i&B?e=t.velocityX:i&H&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&h(e)>this.options.velocity&&t.eventType&R},emit:function(t){var e=kt(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(Lt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:10*n,posThreshold:10*n},getTouchAction:function(){return[mt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&I&&0===this.count)return this.failTimeout();if(n&&s&&i){if(t.eventType!=R)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||Z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,r&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=Tt,this.tryEmit()},e.interval,this),xt):Tt}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Tt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Yt.VERSION="2.0.3",Yt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Mt,{enable:!1}],[Dt,{enable:!1},["rotate"]],[Rt,{direction:B}],[Ct,{direction:B},["swipe"]],[Lt],[Lt,{event:"doubletap",taps:2},["tap"]],[It]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Xt(t,e){e=e||{},this.options=f(e,Yt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=function(t){var e=t.options.inputClass;return new(e||(O?at:C?ct:A?ut:it))(t,U)}(this),this.touchAction=new bt(this,this.options.touchAction),Nt(this,!0),d(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Nt(t,e){var i=t.element;d(t.options.cssProps,function(t,n){i.style[E(i.style,n)]=e?t:""})}return Xt.prototype={set:function(t){return p(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&Tt)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(xt|St|_t)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(_(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return d(S(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return d(S(t),function(t){e?i[t].splice(_(i[t],e),1):delete i[t]}),this},emit:function(t,i){this.options.domEvents&&function(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}(t,i);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()},i.stopPropagation=function(){i.srcEvent.stopPropagation()};for(var s=0;s<n.length;)n[s](i),s++}},destroy:function(){this.element&&Nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},p(Yt,{INPUT_START:I,INPUT_MOVE:M,INPUT_END:R,INPUT_CANCEL:L,STATE_POSSIBLE:wt,STATE_BEGAN:xt,STATE_CHANGED:St,STATE_ENDED:_t,STATE_RECOGNIZED:Tt,STATE_CANCELLED:Et,STATE_FAILED:32,DIRECTION_NONE:Y,DIRECTION_LEFT:X,DIRECTION_RIGHT:N,DIRECTION_UP:z,DIRECTION_DOWN:F,DIRECTION_HORIZONTAL:B,DIRECTION_VERTICAL:H,DIRECTION_ALL:W,Manager:Xt,Input:q,TouchAction:bt,TouchInput:ct,MouseInput:it,PointerEventInput:at,TouchMouseInput:ut,Recognizer:Pt,AttrRecognizer:Ot,Tap:Lt,Pan:Ct,Swipe:Rt,Pinch:Dt,Rotate:Mt,Press:It,on:b,off:w,each:d,merge:f,extend:p,inherit:m,bindFn:g,prefixed:E}),Yt},T=t=>{Object.defineProperty(t,"$$",{configurable:!0,writable:!0}),t.$$=t.query=y(t),t.extendProperty("sandbox",b()),t.extendProperty("Sandbox",t.sandbox.sandbox),t.extendProperty("sandboxWindow",t.sandbox.sandboxWindow),t.extendProperty("SandboxFunction",t.sandbox.SandboxFunction),t.extendProperty("shadowRootWindow",t.sandbox.shadowRootWindow),t.extendProperty("ShadowRootFunction",t.sandbox.ShadowRootFunction),t.extendProperty("seval",function(e,i){return new(i?t.ShadowRootFunction:t.SandboxFunction)(" try { return "+e+" } catch (e) {}")()}),t.extendProperty("openWorker",function(e){return new t.Worker(t.URL.createObjectURL(new Blob(["string"==typeof e?e:e.toString()])))}),Object.defineProperty(t,"animate",{configurable:!0,writable:!0}),t.Animate=w(),Object.defineProperty(t,"Scroll",{configurable:!0,writable:!0}),t.Scroll=S()(t,t.document,t.Math),Object.defineProperty(t,"Touch",{configurable:!0,writable:!0}),t.Touch=_(t,t.document,void 0),function(e){var i=t.Node.prototype,n=["trigger","bind","unbind","on","one","off","load"],s=["trigger","bind","unbind","on","one","off","ready"],o=function(t){return function(t){return function(){var i=e(this);return i.native=!0,i[t].apply(i,arguments)}}(t)};for(var r in["constructor","proxy","map","each","find","html","text","css","computedStyle","empty","hide","show","toggle","val","attr","removeAttr","prop","removeProp","remove","addClass","removeClass","toggleClass","replaceClass","hasClass","append","appendTo","prependTo","prepend","before","after","get","position","offsetParent","offset","height","width","parent","parents","childrens","siblings","closest","filter","not","data","end","clone","size","serialize","eq","index","is","bind","unbind","one","delegate","undelegate","on","off","trigger","click","keydown","keyup","keypress","submit","load","resize","change","select","error"].each(function(t,e){try{i[e]=o(e)}catch(t){}}),n)t[a=n[r]]=o(a);for(var r in s){var a=s[r];t.document[a]=o(a)}}(t.$$),function(){var e=0;t.top.addEventListener("scroll",function(){var i={x:top.scrollX,y:top.scrollY};0==e&&(t.onscrollstart&&t.onscrollstart(i),t.trigger("scrollstart",i)),clearTimeout(e),e=setTimeout(function(){e=0,t.onscrollend&&t.onscrollend(i),t.trigger("scrollend",i)},400),t!==top&&(t.onscrollend&&t.onscroll(i),t.trigger("scroll"))},!1)}()},E=[];var P=(t,e)=>{if(e){let e=E.indexOf(t);e>=0&&E.splice(e,1)}else E.push(t)},k=()=>{class t{constructor(t,e){this.id=t,this.param={},this.status={},this.helper={},this.elements={},this.prefetch={},this.dimension=null,this.controller={},this.updatetime={},this.remoteframe=!1,this.storagemaps=[],this.initialparam={},this.initialconfig={},this.events={},this._events={},this.extend(e),this.checkCache()}init(){return this.update=!0,this._events={},this.rsetParam(),this}on(t,e){return t.split(" ").each((t,i)=>{this._events.initial(i,[]).push(e)}),this}one(t,e){let i=()=>{e.apply(this,arguments),this.off(t,i)};return t.split(" ").each((t,e)=>{this._events.initial(e,[]).push(i)}),this}off(t,e){t.split(" ").each((t,i)=>{if(!this._events[i])return;let n=this._events[i].indexOf(e);n>-1&&this._events[i].splice(n,1)})}origin(t,e){var i=this;return new Promise(function(e,n){App.source().async(i.id,i.param,t,"data",e)}).then(function(t){e(t[2])})}checkCache(){let t=this.id,e="[["+t+"]]:Version";try{let i=localStorage.getItem(e);i?i!==this.version&&(t="frameworks"===t?null:t,App.clearLocalStorage(null,t),App.clearSessionStorage(null,t),App.clearFileCache(t)):this.version&&localStorage.setItem(e,this.version)}catch(t){}}getStatus(){return this.status[this.dimension]}turnover(t,e){let i=t.id,n=t.data,s=t.start,o=t.limit,r=t.linker,a=t.origins,h=t.endflag,l=t.turnover,c=t=>{let i=[],n=!0;if(!(i=r?t.getValueByRoute(r):t)||!i[0])return e(null,n);n=h?!!t.getValueByRoute(h):i.length<Number(o),i.map((e,i)=>e.__proto__=t),e(i,n)};this.setParam((t=>(t[i+"_page"]=t.page=t._page=t.$page=Math.ceil(s/o),t[i+"_start"]=t.start=t._start=t.$start=s,t[i+"_limit"]=t.limit=t._limit=t.$limit=o,t[i+"_turnover"]=t.turnover=t._turnover=t.$turnover=l,t))({})),n?c(n):this.origin(a,c)}trigger(t){let e=this,i=arguments,n=this._events[t];if(n)for(let t=n.length-1;t>=0;t--)n[t].apply(e,[].slice.call(i,1))}setParam(t,e){return App.setParam(this.id,t,e),this}fetch(){return new Promise((t,e)=>{this.status[this.dimension]=0,this.prefetch[this.param]=null,App.prefetching(this.id,this.param,e=>{t(e),this.status[this.dimension]=1})})}rsetParam(){return this.param=this.initialparam.clone(),this}clearCache(t,e,i,n){return(e=1==e?this.dimension:e)?delete this.prefetch[e]:this.prefetch={},n||this.init(),i&&(App.clearLocalStorage(null,t),App.clearSessionStorage(null,t)),delete this.dimension,this}cloneAsNew(e){return{}.extend(this,new t(this.id),{id:e,config:{}.extend(this.config),param:{}.extend(this.initialparam),elements:{},initialparam:this.initialparam})}clipView(t){let e=this.elements.mask,i=this.elements.view;t&&e&&i&&(1===t.length?t[1]=t[2]=t[3]=t[0]:2===t.length?(t[2]=t[0],t[3]=t[1]):3===t.length&&(t[3]=t[1]),e.css({display:"block",position:"absolute",top:t[0]+"dp",right:t[1]+"dp",bottom:t[2]+"dp",left:t[3]+"dp",overflow:"hidden"}),i.css({display:"block",position:"absolute",top:"-"+t[0]+"dp",right:"-"+t[1]+"dp",bottom:"-"+t[2]+"dp",left:"-"+t[3]+"dp"}))}addElement(t,e){this.refreshing&&this.elements[t]instanceof Element&&(this.refreshing.push(this.elements[t]),"view"===t&&this.visibility(0)),"sandbox"===t&&(this.sandbox=e),this.elements[t]=e}loading(t){App.transform.loading(this.id,t)}refresh(t,e,i,n){let s=this.id;if(!this.refreshing){if(n)return this.trigger("refresh"),App.trigger("refreshstart",s),t=t||this.dimension,this.clearCache(s,!0,!0,!0),this.setParam(t,!0),this.refreshing=[],App.transform.update(s,t,t=>{e?e(t):t()},t=>{this.visibility(1),this.refreshing&&(this.refreshing.each((t,e)=>{"iframe"===e.localName&&(e.src="about:blank"),e.remove()}),this.refreshing=null),i?i(t):t(),App.trigger("refreshend",s)}),this;this.fetch().then(n=>{if(!this.override(n[2].data))return this.refresh(t,e,i,!0);e&&e(),i&&e()})}}visibility(t){switch(t){case 1:this.elements.view.style.visibility="visible";break;case 0:this.elements.view.style.visibility="hidden"}}override(t,e=this.scope){if(e instanceof Array&&t instanceof Array){if(e.length!==t.length)return!1;for(let i=0,n=t.length;i<n;i++)this.override(t[i],e[i])}for(let i in t)e[i]&&"object"==typeof e[i]&&"object"==typeof t[i]?this.override(t[i],e[i]):e[i]=t[i];return!0}destroy(t){let e=this.elements.sandbox;if(e){let t=e.window,i=e.iframe.contentDocument;e.iframe.src="about:blank",t.location.reload(),i.open(),i.write(""),i.close();for(let e in t)try{delete t[e]}catch(t){}e.iframe.remove(),delete this.elements.sandbox}switch(this.Template=null,this.loaded=null,delete this.Template,t){case 1:this.elements.container.innerHTML=null;break;case-1:this.elements.container.remove(),delete App.modules[this.id]}return this}}return t},A=()=>{class t{constructor(){if(!(this instanceof t))return new t}uri(t,e,i,n,s){let o,r,a,h,l=App.modules[t];if(!l)return App.get(t,()=>{this.uri.apply(this,arguments)});if("string"==typeof i?a=i:(a=i[0],i=i[1]),h=document.getElementById(t+"/"+n+"/"+i))return s.call(this,t,a,h.innerHTML||"","object");if((o=(o=(o=l.resources)?o[n]:null)?o[i]:null)||("frameworks"!==t?o="frameworks::"+i:App.console.error("resources."+n+"["+i+"]","Config error","is not definde")),"function"!=typeof o||void 0!==(o=s.call(this,t,a,t=>o.call(l,e,t),"function"))){if("object"==typeof o)return s.call(this,t,a,o,"object");if("string"==typeof o){if((o=o.trim()).indexOf("::")>0&&2===(o=o.split(/\:\:/)).length)return this.uri(o[0],e,[i,o[1]],n,s);if((0==(o=App.realpath(t,null,o)).indexOf("//")||o.indexOf("://")>0)&&(r=App.get(t).network=!0),o.indexOf("|@")>-1){let t=o.split(/\|\@/),i=t[0];o={url:i,remote:r,method:"GET",cache:600,param:{},headers:{},settings:{},storeage:sessionStorage};for(var c=1,u=t.length;c<u;c++){let i=/(\w+)\((.*)?\)/g.exec(t[c]),n=i[1],s=i[2];switch(n){case"param":case"headers":case"settings":s=0===(s=s||"").indexOf("{")?s:"{"+s+"}",o[n]=o[n].extend(e.getValueByRoute(s)||{});break;case"cache":o.cache=s||0;break;case"storeage":o.cache=s||2592e6,o.storeage=localStorage,o.permanent=!0;break;case"origin":o.settings.origin=s;break;case"caller":case"callee":o.method="JSONP",o.settings[n]=s;break;case"method":o.method=s}}}else o={url:o,remote:r,method:"GET",cache:600,param:{},headers:{},settings:{},storeage:sessionStorage};return s.call(this,t,a,o,"url")}}}ajax(t,e,i,n,s,o,r,a){let h,l=App.get(t);s.remote&&(h=Date.now()),App.promise.ajax(s.method,s.url,s.param,s.headers,s.settings,e,t,this.sessioncache).then(t=>{let c=t[0],u=t[1];if(r)if("source"==e||"style"==e)App.setFileCache(i,r,u.response);else try{o.setItem(r,"["+Date.now()+"]="+u.response);o.getItem();l.storagemaps.push(r)}catch(t){}"data"==e&&(c=this.filter(l,c,n)),requestIdleCallback(()=>{s.remote&&App.trigger("requestserver",{url:s.url,time:Date.now()-h})}),a([i,n,s.url,c])}).catch(()=>(App.trigger("sourceerror",{id:t,url:s.url,params:s.param}),this.error()))}cache(t,e,i,n,s,o,r,a,h){let l,c,u=App.modules[t];u.config;if(o&&(o=(c=(l=/\[([0-9]+)\]\=/.exec(o)||[0,0])[1])?App._EXISTS&&Date.now()-c>1e3*n.cache?null:o.substr(l[0].length):null),o){if("data"===a){if("string"==typeof o)try{o=JSON.parse(o)}catch(t){try{o=App.sandbox.window.eval("("+o+")")}catch(t){o=null}App.console["object"==typeof o?"warn":"error"]("url["+n.url+"]","SyntaxError","Unexpected token in JSON")}o=o?this.filter(u,o,s):null}if(!1===App._EXISTS&&n.permanent&&"number"==typeof u.config.expires&&Date.now()-c>=1e3*u.config.expires&&(u.timeout=!0),o)return h([e,s,n.url,o]),void App.console.info("Data ["+s+"]","From cache",e)}this.ajax(t,a,e,s,n,r,i,h)}filter(t,e,i){let n=t.controller;return"function"==typeof n?n.call(t,e,i)||e:"function"==typeof n[i]&&n[i].call(t,e)||e}async(t,e,i,n,s){let o=[],r=App.get(t);for(let s in i)o.push(new Promise((o,a)=>{this.uri(t,e,i[s],n,(e,i,s,a)=>{switch(a){case"object":"data"==n&&(s=this.filter(r,s,i)),o([e,i,null,s]);break;case"function":const h=t=>{"data"===n&&(t=this.filter(r,t,i)),o([e,i,s,t])};let l=s(h);if(l&&"Promise"===l.getInstanceType())l.then(function(t){h(t)});else{if("object"!=typeof l&&!1!==l)return l;h(l)}break;case"url":let c,u=s.storeage,d=JSON.stringify(s.param),p=s.cache>0?s.url+("{}"==d?"":"$"+encodeURI(d)):null;if(p&&!App.config.debug)if("source"==n||"style"==n)App.getFileCache(e,p,s.cache).then(t=>{o([e,i,s.url,t])}).catch(()=>{this.ajax(t,n,e,i,s,u,p,o)});else{try{c=u.getItem(p)}catch(t){}this.cache(t,e,p,s,i,c,u,n,o)}else this.ajax(t,n,e,i,s,u,p,o)}})}));Promise.all(o).then(t=>{let e=[],i=[],o=[];for(let n=0,s=t.length;n<s;n++){let s=t[n],r=s[0],a=s[1],h=s[2],l=s[3];e[a]=r,i[a]=h,o[a]=l}s([e,i,o,n])})}source(t,e,i,n){return new Promise((s,o)=>{i[n]&&i[n].length?this.async(t,e,i[n],n,s):s([t,null,{},n])})}get(t,e,i,n,s){this.error=s||noop,Promise.all([this.source(t,i,e,"data"),this.source(t,i,e,"style"),this.source(t,i,e,"source")]).then(t=>{let e=[],i=[],s=[];for(let n=0,o=t.length;n<o;n++){let o=t[n],r=o[3];e[r]=o[0]||{},i[r]=o[1]||{},s[r]=o[2]||{}}n(e,i,s)})}fetch(){this.sessioncache=!1,this.get.apply(this,arguments)}prefetch(){this.sessioncache=!0,this.get.apply(this,arguments)}}return t};const O={},C={},D=window.requestAnimationFrame,I={variable:/\[(.*?)(?=\])\]/g,factor:/\((.*?)(?=\))\)/,url:/\burl\((.*?)(?=\))\)/,calc:/\bcalc\((.*)(?=\))\)/,fun:/(\w+)\((.*)(?=\))\)/,eval:/[\(\)]/g,evals:/\@\((.*?)(?=\%\>)\%\>/g,media:/\(([^\)]+)(?=\))\)/,classes:/\bclass[\s]?([^\s\(]+)[\s]?\((.*?)(?=\))\)/,section:/\(([^\)]+)(?=\))\)/,comment:/\/\*[\s\S]*?\*\//g,onload:/\bonload\(?(.*\b)?\)?(\s+url\(\'(.*?)?(?=\'\))\'\))/gi,attr:/([^\:]+):([^\;]*)[\;\}]/,alt:/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+[\;\}](?!\s*\*\/))/gim},M=1,R=2,L=3,Y=4;let X=t=>void 0===t||0==t.length||null==t,N=t=>device.feat.prefixStyle(t,!0);var F=class{constructor(){}init(t,e){return this.id=t,this.module=e,this._keyFrame=[],this.sandbox=application.sandbox,this}setup(t){this.config=t||{root:"modules/",data:{},descendant:!1},this.variable={attributes:{},children:{}},this._descendant=this.config.descendant?this.config.descendant+" ":"",this.sandbox.window.fileCache={},this.sandbox.window.fileLoading=[]}clear(){this.variable={attributes:{},children:{}}}render(t,e,i){let n=this.baseCSS();if(!t)throw"IOING ERROR { module "+e+" css source is null }";for(let s of t)n+=this.compile(e[s],i[s],{root:0});return n}compile(t,e,i,n,s){return this.id=t,this.opts=n||{},this.scope={}.extend(this.config.data,i),this.descendant=!1===this.opts.descendant?"":this._descendant+(this.opts.descendant?this.opts.descendant+" ":""),this.element=s,!0===e?this.baseCSS():this.toCSS(this.data=this.toJSON(e))}baseCSS(t){return CompiledCSSBaseStyle||(CompiledCSSBaseStyle=this.compile("frameworks",CSSBaseStyle))}toJSON(t,e){let i={children:{},attributes:{}},n=null,s=0;for((e=e||{ordered:!1,comments:!1,stripComments:!1,split:!1}).stripComments&&(e.comments=!1,t=t.replace(I.comment,""));null!=(n=I.alt.exec(t));)if(!X(n[M])&&e.comments){let t=n[M].trim();i[s++]=t}else if(X(n[R])){if(!X(n[L]))return i;if(!X(n[Y])){let t=n[Y].trim();"}"==t.charAt(t.length-1)&&(I.alt.lastIndex=I.alt.lastIndex-1);let o=I.attr.exec(t);if(o){let t=o[1].trim(),n=o[2].trim();if(e.ordered)i[s++]={name:t,type:"attr",value:n};else if(t in i.attributes){let e=i.attributes[t];e instanceof Array||(i.attributes[t]=[e]),i.attributes[t].push(n)}else i.attributes[t]=n}else i[s++]=t}}else{let o=n[R].trim(),r=this.toJSON(t,e);if(e.ordered)i[s++]={name:o,type:"rule",value:r};else{let t=e.split?o.split(","):[o];for(let e in t){let n=t[e].trim(),s=n in i.children;if(s&&0==n.indexOf("@")&&(n+=" ",s=!1),s){for(let t in r.attributes)i.children[n].attributes[t]=r.attributes[t];for(let t in r.children)i.children[n].children[t]=r.children[t]}else i.children[n]=r}}}return i}toCSS(t,e,i,n,s){let o="";if(void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!1),t.attributes)for(let n in t.attributes){let r=t.attributes[n];if(r instanceof Array)for(let t=0;t<r.length;t++)o+=this._setAttr(n,r[t],e,i,s);else o+=this._setAttr(n,r,e,i,s)}if(t.children){let s=!0;for(let r in t.children)n&&!s?o+="\n":s=!1,o+=this._setNode(r,t.children[r],e,i)}return o}realpath(t){return application.realpath(this.id,this.opts.sid,t,this.opts.path)}unit(t,e,i,n){return i=0,n=0,e=e||this.scope,-1!==t.indexOf("@(")&&(t=(t=t.replace(I.eval,function(t,e){switch(t){case"(":i++;break;case")":i==++n&&(t="%>")}return t})).replace(I.evals,function(t,i){let n=!1;return"number"==typeof(i=e.getValueByRoute(i.replace(UNIT.__unitRegExp__,function(t,e,i){if("%"==i)switch(name){case"width":i="vw";break;case"height":i="vh"}return n=!0,e*(UNIT[i]||1)})))&&n?i+"px":i})),t=t.replace(UNIT.__unitRegExp__,function(t,e,i){return UNIT.__nativeUnits__[i]?e+i:e*(UNIT[i]||1)+"px"})}eval(t,e){return-1!==t.indexOf("(")&&(device.feat.supportSizeCalc||(t=t.replace(I.calc,function(t,e){return"@("+e+")"}))),t=this.unit(t,e)}_loadBackgroundImage(t,e,i,n,s){let o=this,r=this.sandbox.window.document,a=r.createElement("IMG");a.src=i,a.onload=function(){D(function(){if(t.style.backgroundImage=s?"":e,n){let e=n.split(",");for(let i=0,n=e.length;i<n;i++){let n=e[i].split(":");t.style.set(n[0],n[1])}}a.remove()}),o.sandbox.window.fileCache[i]=!0},a.onerror=function(){a.remove()},r.documentElement.appendChild(a)}_getVariable(t,e){let i=this.scope,n=(this.config,this.variable);return-1!==t.indexOf("[")&&(t=t.replace(I.variable,function(t,s){return t=null,e&&n.children[e]&&(t=n.children[e].getValueByRoute(s)),t||n.attributes.getValueByRoute(s)||C.getValueByRoute(s)||i.getValueByRoute(s)})||t),t}_setAttr(t,e,i,n,s){let o=this,r=(this.id,this.config,"");switch(t=N(t),e=this._getVariable(e,n),e=this.eval(e),t){case"display":if(["box","inline-box"].consistOf(e))return r+="\t".repeat(i)+t+": "+device.feat.prefix+e+";\n",r+="\t".repeat(i)+t+": "+e+";\n";break;case"background-image":case"border-image":case"background":case"content":case"src":-1!=e.indexOf("url(")&&-1!=(e=e.replace(I.url,function(t,e){return"url('"+o.realpath(e||"")+"')"})).indexOf("onload")&&(e=e.replace(I.onload,function(t,e,i,n){if(n){let t=o.element,c=o.opts.target;if(!t){function r(){this.find(s).each(function(){this.style.backgroundImage="none",requestIdleCallback(t=>{o._loadBackgroundImage(this,i,n,e,1)})})}return c?c.on("ready",r):o.module.on("load",function(){(c=o.module.elements.context)&&r.call(c)}),i}{if(o.sandbox.window.fileCache[n])return i;let s,r=t.parentFragment,c=t.previousScroller,u=c&&c.getAttrSign("infinite");if(u)var a,h;function l(l){s=setTimeout(function(){requestIdleCallback(s=>{o._loadBackgroundImage(t,i,n,e)}),u&&r.off("show",a).off("hide",h)},l||0)}u?(a=function(t){let e=c.scrollEvent,i=0;e&&(i=e.wrapperHeight,0==e.acceleration&&(i=Math.min(500*(e.speedM||1),2e3))),l(i)},h=function(){clearTimeout(s)},r.on("show",a).on("hide",h)):l(0)}}return""}));let a=e.indexOf("gradient(");if(a>=0)return r+="\t".repeat(i)+t+": "+e+";\n",e=0==a?device.feat.prefix+e:e.replace(/([\b\w\-]+gradient\()/,function(t,e){return 0==e.indexOf("-")&&(e=e.replace(/\-\w+\-/,"")),device.feat.prefix+e}),r+="\t".repeat(i)+t+": "+e+";\n";break;case"@extend":let h=this.data.children[e];if(h){let e=h.attributes;for(t in e)r+=this._setAttr(t,e[t],i,n);return r}break;case"@class":let l=I.fun.exec(e),c=l[1],u=l[2].split(/[\s]?\,[\s]?/),d=this.data.children["@"+c]||O[c]||{},p=d.args,f=d.attr;for(let t in f)r+=this._setAttr(t,f[t].replace(I.variable,function(t,e){return u[p[e]]||t}),i,n);return r}return"\t".repeat(i)+t+": "+e+";\n"}_setNode(t,e,i,n){let s="",o=e.descendant||this.descendant,r=[],a=0,h=!1,l=!1,c=!1,u={};if(0==t.indexOf("@"))switch(o="",(r=t.split(/\s/))[0]){case"@keyframes":if(c=!1,t="@"+device.feat.keyframesPrefix+"keyframes "+r[1],this.descendant)for(let t in e.children)e.children[t].descendant=" ";break;case"@section":c=!1;let s=I.section.exec(t);s=s?s[1]:"section:error",n=n?n+" "+s:s,a=!0,i--;break;case"@media":c=!1,t=this._getVariable(t,n),t=this.eval(t),h=!0;break;case"@class":c=!0;let l=(t=I.classes.exec(t))[1],d={},p=t[2].split(/[\s]?\,[\s]?/);for(let t=0,e=p.length;t<e;t++)d[p[t]]=t;this.data.children["@"+l]={args:d,attr:e.attributes},"frameworks"==this.id&&(O[l]=this.data.children["@"+l]);break;case"@global":if(c=!0,0==i){u=e.attributes;for(let t in u)C[t]=this._getVariable(u[t],n)}break;case"@var":if(c=!0,0==i||n){u=e.attributes;for(let t in u)n?(this.variable.children[n]||(this.variable.children[n]={}),this.variable.children[n][t]=u[t]):this.variable.attributes[t]=u[t]}break;case"@if":c=!1,a=!0,this.scope.getValueByRoute(I.factor.exec(t)[1])||delete e.children}if(0==c){r=t.split(","),t="";for(let e=0,i=r.length;e<i;e++){let s=r[e].trim();0==s.indexOf("this")?(s=s.substr(4),l=!0):s.match(/\:tap$/)&&(s=s.replace(":tap",".-tap-highlight-")),t+=(o||"")+("string"==typeof n&&0==h?n+(l?"":" "):"")+s+(e==i-1?"":", ")}s+=a?"":"\t".repeat(i)+t+" {\n",s+=this.toCSS(e,i+1,n,!1,t),s+=a?"":"\t".repeat(i)+"}\n"}return s}},B=function(t,e,i,n){return this.DOM={0:{}},this.DOMS={},this.DOM2={},this.css=n,this.Quantum={},this.Function={},this.module=t,this.sandbox=e,this.helper.extend(i),this.i=0,this.o=0,this.entanglement={},this.components={waiting:0},this.mission={},this.renderCountTime=0,this},H=function(t,e,i){return i=parseInt(i||(e.parentNode?e.parentNode.uuid:t.uuid)),i++,this.o++,i=i+"."+this.o,e&&!e.uuid&&e.extendProperty("uuid",i),i},W=function(t,e,i){let n=i?this.i++:t.uuid;return i&&-1==t.quantum.indexOf(t.uuid)&&(this.Quantum[t.uuid]=[],t.quantum.each(function(e,i){i<t.uuid||t.quantum.splice(e,1)}),t.quantum.push(t.uuid)),this.createFragment(n),e.uuid=t.uuid,e._target=n,this.mission[t.order]||(this.mission[t.order]={async:[],events:[],scripts:[],parallel:[],scroller:[],components:[],entanglement:[]}),n},j={key:/\.|\[/,token:/[^\w\_\$\.]/,string:/(['"])[^'"]*\1/,route:/(\[(.*?)(?=\])\])/g,origins:/\{\{([\s\S]*?)(?=\}\})\}\}|\{([\s\S]*?)(?=\})\}/g,imports:/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/gi},V={encode:function(t){return"string"==typeof t?encodeURIComponent(t):t},decode:function(t){return"string"==typeof t?decodeURIComponent(t):t},replace:function(t,e,i){return"string"==typeof t?t.replace(e,i):t}};const q=document;var U=function(t){return void 0===t&&(t=this.i++),this.DOMS[t]||(this.DOMS[t]=q.createDocumentFragment(),this.DOMS[t].extendProperty("uuid",t),this.config.parallel&&(this.DOM2[t]=q.createDocumentFragment(),this.DOM2[t].extendProperty("uuid",t))),this.DOMS[t]};const K=document;var $=function(t,e,i,n){switch(i=i?this.uuid(t,e,i):e.uuid,n=n||e.nodeName){case"SELECTER":n="SELECT"}if(this.DOMS[i]=K.createElement(n),"HTMLUnknownElement"==this.DOMS[i].getInstanceType()&&(this.DOMS[i].__proto__=K.createElement("div").__proto__),this.DOMS[i].extendProperty("uuid",i),this.config.parallel){switch(n){case"VIDEO":case"CANVAS":let t=e.getAttribute("name");if(t||(t=$$.uuid(),e.setAttribute("name",t)),this.DOM2[i]=K.createElement("DIV"),"VIDEO"===e.nodeName){try{this.events.push(function(){K.getCSSCanvasContext("2d",i,this.DOMS[i].videoWidth,this.DOMS[i].videoHeight).getContext("2d").drawImage(this.DOMS[i],0,0,this.DOMS[i].videoWidth,this.DOMS[i].videoHeight)})}catch(t){}t=i}this.DOM2[i].css({"background-image":device.feat.prefix+"canvas("+t+")"});break;default:this.DOM2[i]=K.createElement(n)}this.DOM2[i].extendProperty("uuid",i),this.mission[t.order].parallel.push(function(){this.parallel(this.DOMS[i],this.DOM2[i])})}return this.DOMS[i]};const G=document;var Z=function(t,e,i,n){var s,o=e.uuid;if((s=["STYLE","SCRIPT"].consistOf(e.parentNode.nodeName)?i:this.variable(t,n,i,function(){this.createTextNode(t,e,i,n)},o+":text")).html)return t.uuid=this.target(e),void this.compile(t.clone(),this.parser(s.html),n);this.DOMS[o]?this.DOMS[o].textContent=s:(this.DOMS[o]=G.createTextNode(s),this.DOMS[o].extendProperty("uuid",o),this.config.parallel&&(this.DOM2[o]=G.createTextNode(s),this.DOM2[o].extendProperty("uuid",o)),this.mission[t.order].parallel.push(function(){this.parallel(this.DOMS[o],this.DOM2[o])}))};document;var J=function(t,e,i){var n=e.uuid,s=this.createElement(t,null,n,"style"),o=this.createElement(t,null,n,"shadow-root"),r=o.uuid,a=!!i.createShadowRoot&&i.createShadowRoot();if(a?(e.extendProperty("_target",r),s.innerHTML=this.css.baseCSS(),a.appendChild(s),a.appendChild(o)):(o.className="shadow-root-"+r.replace(/\./g,"-"),s.innerHTML=this.css.compile(this.module.id,CSSBaseStyle,{},{descendant:"."+o.className}),i.appendChild(s),i.appendChild(o)),this.config.parallel){var h=this.DOM2[i.uuid],l=this.DOM2[s.uuid],c=this.DOM2[o.uuid];if(l.innerHTML=s.innerHTML,a){var u=h.createShadowRoot();u.appendChild(l),u.appendChild(c)}else h.appendChild(l),h.appendChild(c)}return{id:r,dom:o,shadow:a}},Q=(t,e,i,n)=>{let s=t.getValueByRoute(e);"object"==typeof s?i[n]._proto_=s:i[n]=s};const tt=document,et=window.requestAnimationFrame;var it=class{constructor(){this.helper=V}init(...t){return B.apply(this,t)}creat(...t){return W.apply(this,t)}state(t){return{id:t,uuid:0,order:0,target:0,quantum:[]}}save(t,e){this.DATA=e,this.SOURCE=t}setup(t){this.config=t}space(t,e){return t.trigger("moduleready"),t.EVALSCOPE={},this.window=t,this.container=e,e.trigger("ready"),this}uuid(...t){return H.apply(this,t)}quantum(t){return this.Quantum[t]||[]}get(t,e,i,n,s){return s=s||this.SOURCE[t],n=n||"",i=i||"",void 0===s&&(s=(s=tt.getElementById(this.module.id+"/source/"+t))?s.innerHTML:void 0),void 0===s?e&&0===t.indexOf("~/")?(s=(s=tt.getElementById(this.module.id+"/source/"+t.split("/").splice(-2,1))||tt.getElementById("components/source/"+t.split("/").splice(-2,1)))?s.innerHTML:void 0)?e.call(this,this.parser(s)):App.promise.get(t.slice(2)).then(function(i){(s=i[0])&&(this.SOURCE[t]=s,e.call(this,this.parser(s)))}.bind(this)).catch(function(){e.call({},null)}):void 0:(s=this.parser(i+s+n),e?void e.call(this,s):s)}set(t,e,i,n){e=(t?t+"::":"")+e,n&&(this.config.sids[e]=this.config.sids[n]),this.SOURCE[e]=i}take(t,e,i,n){return this.get((t?t+"::":"")+e,null,i,n)||this.get(e,null,i,n)}parser(t){return(new DOMParser).parseFromStringToNode("<body>"+t+"</body>","text/html").body}iterator(t){return t.nextNode?t:tt.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1)}spath(t){return this.config.sids[t]}realpath(t,e){return App.realpath(this.module.id,this.spath(t.id),e,t.path)}target(t){var e=t.parentNode;return e?e._target?e._target:e.command?this.target(e):e.uuid:t._target}insert(t,e){var i=t.uuid,n=t.target,s=this.quantum(i),o=s[0],r=e.call(this);o?o.before(r):this.DOMS[n].appendChild(r),o&&s.each(function(t,e){e.remove()}),this.config.parallel&&(o?this.DOM2[o].before(this.DOM2[r.uuid]):this.DOM2[n].appendChild(this.DOM2[r.uuid]))}into(t,e,i){var n=this.DOMS[e],s=this.DOMS[i],o=t.quantum;if(n&&s){s.appendChild(n),s.trigger("ready"),this.config.parallel&&this.DOM2[i]&&this.DOM2[i].appendChild(this.DOM2[e]);for(var r=o.length-1;r>=0;r--)this.Quantum[o[r]].push(n)}}append(t,e){var i=e.uuid,n=this.target(e);if(e.command)return e.remove();this.into(t,i,n)}createFragment(...t){return U.apply(this,t)}createElement(...t){return $.apply(this,t)}setAttribute(t,e,i,n,s){var o="",r=e.uuid;o=this.variable(t,s,n,function(){this.setAttribute(t,e,i,n,s)},r+":attr:"+i),!1!==(o=this.attributeRule(t,e,i,o,s))&&(this.DOMS[r].setAttribute(i,o),this.config.parallel&&this.DOM2[r].setAttribute(i,o))}createTextNode(...t){return Z.apply(this,t)}createShadowRoot(...t){return J.apply(this,t)}getElementById(t,e){var i;return e=e||0,(i=this.DOM[e][t])||0==e?i:this.getElementById(t,this.DOMS[e].scopeid)}getValueByMagic(t,e){var i,n;if(!e)return e;for(var s=0,o=e.length;s<o;s++)0==s?i=t.getValueByRoutes(e[0].splitCells(/\,/)):(n=this.helper[e[s]]||t.helper[e[s]])&&(i=n.apply(null,i));return i}getValueByRoute(t,e){var i,n;if(!e)return e;switch(e.substr(0,1)){case"@":(e=(e=e.substr(1)).replace(/[\(\)]/g,",").split(/\,/)).pop(),n=this.helper[e.shift()],e=e.join(",")}return i=t.getFunctionByRoute(e,this.Function[e]),n&&(i=n.apply(null,i)),i&&i.factory&&(this.Function[e]||(this.Function[e]=i.factory)),i.result}getOriginType(t){var e=!1,i=!0;switch(t.charAt(0)){case"#":t=t.substr(1),i=!1;break;case"!":t=t.substr(2),e=!0,i=!1}return{html:e,watch:i,origin:t}}getRootScope(t){return null===t.__proto__.__proto__?t:this.getRootScope(t.__proto__)}variable(t,e,i,n,s,o){var r,a={};return-1!==i.indexOf("{")&&(i=i.replace(j.origins,function(i,h,l){return l?(l=(a=this.getOriginType(l)).origin.split("|"),r=l[0]):h&&(a=this.getOriginType(h),r=a.origin),n&&s&&1==a.watch&&this.watch(t,e,r,n,s,o),l?this.getValueByMagic(e,l):h?this.getValueByRoute(e,r):void 0}.bind(this)),!0===a.html&&(i={html:i})),i}watch(t,e,i,n,s){function o(i){i&&"variable"==i.staticAnalysis()&&this.react(t,e,i,n,s)}function r(t){for(var i=0,n=(t=(t=function(t){return t.replace(j.route,function(t,e,i){r.call(this,i)}.bind(this))}.call(this,t)).replace(j.string," ").split(j.token)).length;i<n;i++){var s=t[i];if(s){var a=s.split(j.key)[0];void 0===e[a]&&(e[a]=null),o.call(this,s)}}}r.call(this,i)}react(t,e,i,n,s){var o=this,r=i.split("."),a=r.pop(),h=r.join("."),l=h?e.getValueByRoute(h):e[a]?e:this.getRootScope(e);"length"!==a&&l&&"object"==typeof l&&"function"==typeof l.watch&&(void 0===l[a]&&(l[a]=null),this.mission[t.order]&&(this.entanglement.initial(i,[]).push({caller:n,uuid:s}),this.mission[t.order].entanglement.push(function(){l.watch(a,function(t,e,n){if(e!==n){var s={},r=[];o.entanglement[i].splice(-o.entanglement[i].length).each(function(t,e){s[e.uuid]||(s[e.uuid]=!0,r.push(e.caller))}),et(function(){r.each(function(t,i){i.call(o,e,n)})})}})})))}parallel(t,e){var i=this;(!this.config.parallel||1!=this.config.parallel.appoint||t.attributes&&t.attributes.hasOwnProperty("parallel"))&&t.observer({childList:!0,subtree:!1,attributes:!0,characterData:!0,attributeOldValue:!1,characterDataOldValue:!1},function(n){n.each(function(n,s){if(e)switch(s.type){case"attributes":e.setAttribute(s.attributeName,t.getAttribute(s.attributeName));break;case"characterData":e.textContent=t.textContent;break;case"childList":et(function(){s.addedNodes.each(function(t,n){try{if(i.DOM2[n.uuid])e.insertBefore(i.DOM2[n.uuid],n.nextSibling?i.DOM2[n.nextSibling.uuid]:null);else{var s={};i.walker(i.iterator(n),function(t){var o=i.uuid({uuid:e.uuid},t),r=t.cloneNode();s[o]=r,t===n?e.insertBefore(r,n.nextSibling?i.DOM2[n.nextSibling.uuid]:null):s[t.parentNode.uuid].appendChild(r),i.parallel(t,r)})}}catch(t){}}),s.removedNodes.each(function(t,e){i.DOM2[e.uuid]&&i.DOM2[e.uuid].remove()})})}})})}setProperty(t,e){var i=this,n=e.uuid,s=i.state(n).extend({scopeid:t.scopeid,spacename:t.spacename});function o(t){return function(e,n){e&&("object"==typeof e&&(e[1]="string"==typeof e[1]?e[1]:e[1].outerHTML,i.set(s.spacename,e[0],e[1]),e=e[0]),i.include(s,this,e,n,t))}}this.DOMS[n].extendProperties({parentFragment:t.fragment,previousCommit:t.commiter,previousScroller:t.scroller,parentShadowRoot:t.shadowroot,innerTemplate:o(!0),appendTemplate:o(!1),insetBeforeTemplate:o(-1),insetAfterTemplate:o(1)})}attributeRule(t,e,i,n,s){var o=this,r=this.DOMS[e.uuid];switch(e.attributes,i){case"id":case"uuid":var a=t.scopeid||0;n&&(this.DOM.initial(a,{})[n]=r);break;case"transform":this.mission[t.order].events.unshift(function(t){var i=(n=n.split("|"))[0],s=o.commands("prefetch",e).key,a=0;if("#"==i&&(i=App.id),isNaN(i))if(s){var h,l=r.previousScroller,c=l?l.scrollEvent:null,u=r.parentFragment,d=function(){h=setTimeout(function(){var t=o.commands("param",e).value;c&&c.isScrolling()?c.one("scrollend",function(e){"break"!==e&&r.offsetHeight>0&&App.prefetch(i,t)}):App.prefetch(i,t)},2e3)};u?u.on("show",function(t){d()}).on("hide",function(){clearTimeout(h)}):d()}else void 0===App.modules[i]&&App.get(i);r.on("touchstart mousedown",function(){var t=o.commands("param",e).value;requestIdleCallback(function(){isNaN(i)&&App.prefetching(i,t)})}),r.Touch().on(n[1]||"tap",function(t){var n=o.commands("param",e).value,s=o.commands("data-event",e).value;return!(Date.now()-a<200||(a=Date.now(),App.trigger("transform",{id:i,od:App.id,param:n?n.paramsToObject():{},data:s?s.paramsToObject():{},event:t}),App.transform.to(i,n,null,{touches:t}),t.stopPropagation(),1))})}),null===e.getAttribute("tap-highlight")&&e.setAttribute("tap-highlight","-tap-highlight-");break;case"href":if(0===n.indexOf("#"))return n=App.route(n.substr(1)),this.setAttribute(t,e,"transform",n.id,s),this.setAttribute(t,e,"param",n.param,s),!1;this.mission[t.order].events.unshift(function(i){var s=n.split("|"),a=this.realpath(t,s[0]);r.addEventListener("click",preventDefaultEvent,!1),r.Touch().on(s[1]||"tap",function(t){var i=o.commands("target",e).value,n=o.commands("data-event",e).value;return t.stopPropagation(),App.trigger("href",{data:n?n.paramsToObject():{},event:t}),setTimeout(function(){App._EXISTS=-1,i?top.open(a,i):top.location.href=a},200),!1})}),null===e.getAttribute("tap-highlight")&&e.setAttribute("tap-highlight","-tap-highlight-");break;case"src":case"url":case"uri":case"link":case"path":case/^(src:|url:|uri:|link:|href:|path:)+(.*?)$/.test(i)?i:null:n=this.realpath(t,n);break;case"style":n=this.css.compile(this.module.id,n+";",s,{sid:this.spath(t.id),path:t.path,descendant:!1},r);break;case"toggle-class":this.mission[t.order].events.push(function(t){var e=n.split("|"),i=e[0],s=e[1].trim(),o=s.split(" ");s&&r.Touch().on(s,function(t){return 2==o.length?t.type==o[0]?r.addClass(i):r.removeClass(i):r.hasClass(i)?r.removeClass(i):r.addClass(i),!1})});break;case"tap-highlight":this.mission[t.order].events.push(function(t){r.on("touchstart mousedown",function(t){var e,i;n=n||"-tap-highlight-",e=setTimeout(function(){et(function(){r.addClass(n)}),i=setTimeout(function(){et(function(){r.removeClass(n)})},1e4)},60),this.one("touchmove touchend touchcancel mousemove mouseup mousecancel",function(t){["touchmove","mousemove"].consistOf(t.type)&&(clearTimeout(e),clearTimeout(i)),setTimeout(function(){et(function(){r.removeClass(n)})},200)})})});break;case 0==i.indexOf("on-")?i:null:this.mission[t.order].events.unshift(function(s){var a=t.scopeid,h=n.split("::"),l=2==h.length?h[0]:"default",c=i.split("-")[1],u=2==h.length?h[1]:h[0],d=/[^(]+/.exec(u)[0],p=function(e){return function(){var i=[d],n=arguments;f.length?f.each(function(t,e){switch(e=e.trim()){case"this":e=r;break;case"event":e=n[0]}i.push(e)}):i.push(n[0]),function(e){return e.EVALSCOPE[(a?t.scopeid+":":"")+l]||function(t,i){new e.Function(d+".apply(this, [].slice.call(arguments, 1))")(i)}}(e).apply(r,i)}},f=(/\((.*)\)/.exec(u)||[null,""])[1].split(",");switch(c.split("-")[0]){case"event":case"events":c=(u=u.split("|"))[1],u=u[0]}switch(c.split(" ")[0]){case"pan":case"panstart":case"panmove":case"panend":case"pancancel":case"panleft":case"panright":case"panup":case"pandown":case"pinch":case"pinchstart":case"pinchmove":case"pinchend":case"pinchcancel":case"pinchin":case"pinchout":case"press":case"pressup":case"rotate":case"rotatestart":case"rotatemove":case"rotateend":case"rotatecancel":case"swipe":case"swipeleft":case"swiperight":case"swipeup":case"swipedown":case"tap":r.Touch().on(c,function(t){t.self=r;var i=o.commands("data-event",e).value,n=!!o.commands("prevent-default",e).key,a=!!o.commands("stop-propagation",e).key;n&&t.preventDefault(),a&&t.stopPropagation(),p(s)(t),App.trigger("touch",{data:i?i.paramsToObject():{},event:t})}),-1!==c.indexOf("tap")&&null===e.getAttribute("tap-highlight")&&e.setAttribute("tap-highlight","-tap-highlight-");break;default:r.on(c,p(s))}})}return n||""}tagRule(t,e,i,n){var s=this,o=e.uuid,r=this.target(e),a=e.nodeName,h=this.DOMS[o],l=h.attributes;switch(a){case"IF":case"ELSE":case"ELSEIF":e.command=!0,t.uuid=o,t.target=r;var c=this.sign(a,l,"is",-1,["(",")"])||this.sign(a,l,"not",-1,["!(",")"])||l[0].name,u=this.getValueByRoute(i,c),d=e.nextElementSibling,p=e.factor,f="ELSE"!==a&&d&&"ELSE"===d.nodeName,m="ELSE"!==a&&d&&"ELSEIF"===d.nodeName,g=t.clone(),v=e.cloneNode(!0);u||(v.innerHTML="\n"),this.insert(g,function(){return this.compile(g,v,i,!0)}),f?d.setAttribute("is",p?p[0]+"&&!("+p[1]+")":"!("+c+")"):m&&(p=["!("+c+")",d.getAttribute("is")],d.extendProperty("factor",p),d.setAttribute("is",p.join("&&"))),n.call(this,c,t,e);break;case"LOOP":e.command=!0,t.uuid=o,t.target=r,c=this.sign(a,l,"data",0);var y,b=this.getValueByRoute(i,c)||[],w=l[2]?l[2].name:"$value",x=l[3]?l[3].name:"$index";this.insert(t,function(){var n=this.createFragment();return b.each(function(o,r){g=t.clone(),v=e.cloneNode(!0),(y=i.clone())[x]=o,y[w]=r;var a=s.compile(g,v,y,!0);s.into(g,a.uuid,n.uuid)}),n}),h.extendProperty("scope",y),n.call(this,c,t,e);break;case"SWITCH":e.command=!0,t.uuid=o,t.target=r,c=this.sign(a,l,"case",0);var S=this.getValueByRoute(i,c)||!0,_=this.createFragment();this.insert(t,function(){return e.children.each(function(e,n){var o=t.clone(),r=n.nodeName,h=n.attributes,l=s.sign(a,h,!0===S?"is":"value",0),c=!0===S?s.getValueByRoute(i,l):l;if(S==c||"default"==r)return _.appendChild(s.compile(o,n,i,!0)),!1}),_}),n.call(this,c,t,e);break;case"VAR":e.command=!0;var T=this.sign(a,l,"name",0),E=e.textContent;null==T&&this.debug(a,"name=?",!0),i[T]=i.getValueByRoute(E);break;case"INPUT":case"TEXTAREA":case"HTMLAREA":case"SELECT":case"SELECTER":e.command=!1;var P=this.commands("normal",e).key,k=this.commands("react",e),A=(this.commands("free",e).key,this.commands("for-scroll",e).value),O=this.getElementById(A,t.scopeid);if("HTMLAREA"==a&&h.attr({contenteditable:"true","aria-multiline":"true",spellcheck:"true",role:"textbox",dir:"ltr"}).css({overflow:"hidden","word-break":"break-all","word-wrap":"break-word","user-select":"text",cursor:"text"}),k.key){var C=k.value.split("|"),D=(c=C[0],C[1]||"change"),I=h.defaultValue;if(!D||!c)break;void 0!==i.getValueByRoute(c)&&h.bind(D,function(t){i.setValueOfHref(c,"HTMLAREA"===a?this.textContent:this.value||this.getAttribute("default-value")||I||"")})}if(0==a.indexOf("SELECT"))break;this.module.on("hide",function(){h.blur()}),this.mission[t.order].events.push(function(t){var n,o=null,r=top.innerHeight,c=0,u=0,d=null,p=parseInt(s.commands("scroll-offset-top",e).value||0)*device.ui.scale,f=parseInt(s.commands("scroll-offset-bottom",e).value||0)*device.ui.scale,m=s.commands("react-offset",e).value,g=s.commands("react-position",e).value,v=!!s.module.config.sandbox||s.sign(a,l,"react-resize",-1,null,!0,!1),y=m||g,b=0;function w(t,e,i,n,s){s=void 0==s?1:s,t=void 0==t?top.scrollY:t,(1==s?t>e:t<e)||(n=void 0==n?Math.abs((e-t)/i*17.6):n,et(function(){top.scrollTo(0,t+=s*n),w(t,e,i,n,s)}))}function x(){if(this.moving||this.wheeling){var t=h.offset().top;(t+h.offsetHeight<=c+p||t>=r-f)&&h.blur()}}function S(){et(function(){h.getSelectionRangeInsert("")})}function _(t){var e=O||h.closest("scroll");(o=e?e.scrollEvent:null)&&1==t&&(b=o.minScrollY)}function T(){return n-d.top-(0==top.scrollY?c:0)+(s.module.config.sandbox?c:0)}h.on("click",function(){r=top.innerHeight,h.offset().top,n=null}),h.on("focus",function(e){function i(e){t.keyboard.height=c=top.scrollY||r-top.innerHeight,0!=c&&(o.minScrollY=b+c,o.options.minScrollY=o.minScrollY,d=h.getSelectionRangeOffset(),n=c+(r-c-p-f)/2,o.scrollBy(0,T(),300,null,!1),o.on("scroll",x),t.trigger("keyboardup",{height:c}),v&&w(null,0,300,null,-1))}_(1),o&&(device.os.ios&&device.os.iosVersion<12&&o.on("scroll scrollend",S),P||setTimeout(function(){top.one("scrollend",i),setTimeout(function(){0==c&&i()},300);var t=0;device.os.mobileSafari&&device.os.iosVersion<12&&(t=24*viewportScale),w(null,viewportHeight-t,300,null,1)},300))}),h.on("blur",function(){if(_(),o&&(device.os.ios&&device.os.iosVersion<11&&o.off("scroll scrollend",S),!P)){if(0==c)return!1;top.scrollTo(0,0),o.wrapper.scrollTop=0,o.minScrollY=b,o.options.minScrollY=b,o.off("scroll",x),o._refresh(),t.keyboard.height=c=0}}),h.on("focus keyup input paste mouseup",function(t){_(),o&&("keyup"!=t.type||[8,13,37,38,39,40].consistOf(t.keyCode))&&(m?d=h.getSelectionRangeOffset():g&&(d=h.getSelectionRangePosition()),y&&d&&d.each(function(t,e){i.setValueOfHref(y+"."+t,e)}),P||"input"==t.type&&t.timeStamp-u<2e3||o&&n&&(m||(d=h.getSelectionRangeOffset()),u=t.timeStamp,o.scrollBy(0,T(),300,null,!1)))})});break;case"COMMIT":e.command=!1,t.commiter=h,h.extendProperty("commit",function(t){var i={},n=s.commands("method",e).value,o=s.commands("action",e).value;h.find("input, textarea, htmlarea").each(function(t,e){var n=e.name,s=e.value;n&&void 0!==s&&(i[n]=s)}),n=-1==["get","post"].indexOf(n)?"get":n,App.promise[n](o,i).then(t)});break;case"IMG":case"VIDEO":e.command=!1;var M=s.commands("onload-class",e).value;h.onload=h.onerror=h.onabort=function(t){s.reflow(h.previousScroller),M&&"load"==t.type&&h.addClass(M)},h.onselectstart=h.ondragstart=function(t){return t.preventDefault(),!1};break;case"FRAGMENT":e.command=!1,t.fragment=h;break;case"SCROLL":e.command=!1,t.uuid=o,t.scroller=h;var R=this.sign(a,l,"finite",-1,null,!0,!1),L=this.sign(a,l,"infinite",-1,null,!0,!1);if(R)this.compile(t,this.parser("<scrolling></scrolling>"),{});else if(L){var Y=Math.max(h.offsetHeight,h.offsetWidth)||Math.max(device.ui.height,device.ui.width),X=this.commands("item-size",e).value||!1,N=X||this.commands("item-min-size",e).value||100,z=Math.max(N&&Y?Math.ceil(6*Y/(device.ui.scale*N)):this.commands("cycles",e).value||5,5);this.compile(t,this.parser("<scrolling>"+"<infinite></infinite>".repeat(z)+"</scrolling>"),{})}this.mission[t.order].scroller.push(function(n){var r={startX:this.sign(a,l,"start-x",-1,null,!0,0),startY:this.sign(a,l,"start-y",-1,null,!0,0),scrollX:this.sign(a,l,"x",-1,null,!0,!1),scrollY:this.sign(a,l,"y",-1,null,!0,!0),freeScroll:this.sign(a,l,"free",-1,null,!0,!1),stepLimit:this.sign(a,l,"step-limit",-1,null,!1,120),speedLimit:this.sign(a,l,"speed-limit",-1,null,!1,5),scrollbars:this.sign(a,l,"scrollbars",-1,null,!0,!0),indicator:this.sign(a,l,"indicator",-1,null,!0,null),snap:this.sign(a,l,"snap",-1,null,!0,!1),zoom:this.sign(a,l,"zoom",-1,null,!0,!1),bounce:this.sign(a,l,"bounce",-1,null,!0,!0),momentum:this.sign(a,l,"momentum",-1,null,!0,!0),mouseWheel:this.sign(a,l,"mouse-wheel",-1,null,!0,!0),deferred:this.sign(a,l,"deferred",-1,null,!0,!1),deceleration:this.sign(a,l,"deceleration",-1,null,!1,.003),boundariesLimit:this.sign(a,l,"boundaries-limit",-1,null,!1,.15),useTransition:this.sign(a,l,"use-transition",-1,null,!0,!0),interactive:this.sign(a,l,"interactive",-1,null,!0,!0),bindToWrapper:this.sign(a,l,"bind-event-self",-1,null,!0,!0),preventDefault:this.sign(a,l,"prevent-default",-1,null,!0,!0),stopPropagation:this.sign(a,l,"stop-propagation",-1,null,!0,"auto"),coverPropagation:this.sign(a,l,"cover-propagation",-1,null,!0,!0),directionLockThreshold:this.sign(a,l,"direction-lock-threshold",-1,null,!1,5),directionLockThresholdX:this.sign(a,l,"direction-lock-threshold-x",-1,null,!1,!1),directionLockThresholdY:this.sign(a,l,"direction-lock-threshold-y",-1,null,!1,!1)};if((r.indicator||r.scrollbars)&&r.extend({fadeScrollbars:this.sign(a,l,"fade-scrollbars",-1,null,!0,!0)}),r.mouseWheel&&r.extend({mouseWheelSpeed:this.sign(a,l,"mouse-wheel-speed",-1,null,!1,.15),mouseWheelAction:this.sign(a,l,"mouse-wheel-action",-1,null,!1,"normal"),invertWheelDirection:this.sign(a,l,"invert-wheel-direction",-1,null,!1,!1)}),r.snap?r.extend({snapEasing:this.sign(a,l,"snap-easing",-1,null,!1,""),snapDuration:this.sign(a,l,"snap-duration",-1,null,!1,400),snapThreshold:this.sign(a,l,"snap-threshold",-1,null,!1,.15)}):r.zoom&&r.extend({zoomMin:this.sign(a,l,"zoom-min",-1,null,!1,1),zoomMax:this.sign(a,l,"zoom-max",-1,null,!1,6),startZoom:this.sign(a,l,"start-zoom",-1,null,!1,1),zoomOrigin:this.sign(a,l,"zoom-origin",-1,null,!1,"0,0,0")}),R||L){var c="",u=this.sign(a,l,"data-origin",-1),d=u?u.split(","):[],p=this.sign(a,l,"data",-1),f=p?p.split(/\.|\[/).shift():d[0],m=d.length?d:[f],g=i[f]||null,v=this.sign(a,l,"end-flag",-1,null,!1,null),y=this.sign(a,l,"limit",-1,null,!1,10),b=this.sign(a,l,"template",-1,null,!1,null);b||(b=o,this.set(t.spacename,b,e.find("scrolling").html())),c=this.take(t.spacename,b,"<fragment>","</fragment>");var w=function(t,n,r){var h=g&&0===this.infiniteDataLength?i:null;s.module.turnover({id:e.id||e.uuid||o,data:h,start:t,limit:y,linker:p,origins:m,endflag:v,turnover:n},function(t,e){null==t&&0==e&&s.debug(a,"data={Array}",null),r(t,e),g=null})};r.extend({maxPage:this.sign(a,l,"max-page",-1,null,!1,1e3)})}R?r.extend({finite:R,finiteFragment:this.createFragment(),getInfiniteDataset:w,getFiniteCacheBuffer:function(e,n){e&&(e.__proto__=i,e.scroll={x:this.x,y:this.y,index:n},n=o+":"+n,t.uuid=n,t.order=n,s.compile(t,c.cloneNode(!0),e),this.finiteFragment.appendChild(s.DOMS[n]),setTimeout(function(){s.end(n)},0))}}):L&&r.extend({infinite:L,infiniteElements:h.children[0].children,infiniteItemSize:Number(X),infiniteCacheBuffer:this.sign(a,l,"buffer",-1,null,!1,50),getInfiniteDataset:w,setInfiniteDataFiller:function(t,e){var i=o+":"+e,n=t.children[0],r=s.DOMS[i];n&&(r.appendChild(n),n.trigger("hide",{key:e}))},getInfiniteDataFiller:function(t,e,i){var n=o+":"+e;this.setInfiniteDataFiller(t,i),this.updating&&(s.DOMS[n]=null,delete s.DOMS[n]),t.appendChild(s.DOMS[n]||this.updateInfiniteCache(e)),t.children[0].trigger("show",{key:e}),s.end(n)},getInfiniteCacheBuffer:function(e,n){if(e)return e.__proto__=i,e.scroll={x:this.x,y:this.y,index:n},n=o+":"+n,s.DOMS[n]||(t.uuid=n,t.order=n,s.compile(t,c.cloneNode(!0),e)),s.DOMS[n]}}),h.Scroll(r,n),this.module.on("hide",h.scrollEvent.stop)});break;case"SCROLLING":case"SCROLLBAR":case"PULLUP":case"PULLDOWN":case"PULLRIGHT":case"PULLLEFT":case"SCROLLCOVER":t.scroller.extendProperty(a.toLowerCase(),h);break;case"STYLE":e.command=!1;var F=e.getAttribute("src"),B=e.textContent,H=function(e,n){n=s.css.compile(s.module.id,n,i,{path:t.path,target:s.DOMS[t.target],descendant:!(!t.spacename||h.createShadowRoot)&&".shadow-root-"+t.scopeid.replace(/\./g,"-")}),F?e.innerHTML=n:e.textContent=n};F?App.promise.get(this.realpath(t,F)).then(function(t){H(h,t[0]),s.reflow(h.previousScroller)}):H(e,B);break;case"SCRIPT":e.command=!0,F=this.commands("src",e).value;var W=this.commands("sync",e).key,V=this.commands("global",e).key,q="module"===this.commands("type",e).value,U=(P=this.commands("normal",e).key,{}.extend(t)),K=V||q?[]:null,$=t.scopeid?t.path:App.config.root+"modules/"+this.module.id,G=this.commands("name",e).value||"default",Z=e.textContent;if(W){new this.sandbox.window.Function("scope, root",Z+"\n")(i,s.DOM[U.scopeid]),e.textContent=null;break}this.mission[U.order].scripts.push(function(t){function e(){K&&(Z=Z.replace(j.imports,function(t,e,i){return i=$+"/"+e,K.push('"'+i+'"'),t.replace(e,i)}),Z='var __EVAL__ \ndefine("argument", '+(K.length?"["+K.join(",")+"], ":" ")+"function (require, module, exports) { \n"+Z+'\n\n__EVAL__ = function (fn) { return eval("(" + fn.toString() + ").apply(this, [].slice.call(arguments, 1))") } \n'+(V?'__inject__["'+U.spacename+'"].ready()':"")+"\n}) \n"),U.scopeid?V?s.sandbox.window[U.spacename]||new s.sandbox.window.Function("__inject__",Z+'\nfunction __Global__ () { \n this.init() \n} \n__Global__.prototype = { \n init : function () { \n  this._readies = [] \n  this._readied = false \n }, \n call : function () { \n  if ( !this._readied ) { \n   this._readies.push(arguments) \n  } else { \n   return __EVAL__.apply(this, arguments) \n  } \n }, \n ready : function () { \n  var that = this \n    , args = arguments \n  this._readies.each(function (i, args) { \n   return __EVAL__.apply(this, args) \n  }) \n  this._readied = true \n } \n} \n__inject__["'+U.spacename+'"] = new __Global__()')(s.sandbox.window):new t.Function("__inject__, shadow, scope, node, global, components, register, root",Z+'\n__inject__["'+U.scopeid+":"+G+'"] = function (fn) { \nreturn eval("(" + fn.toString() + ").apply(this, [].slice.call(arguments, 1))") \n} \n')(t.EVALSCOPE,U.shadowroot,i,function(t){return s.getElementById(t,U.scopeid)},s.sandbox.window[U.spacename],U.dom,function(t,e){U.dom.extendProperty(t,e)},s.DOMS[U.scopeid]):P?t.eval(Z):new t.Function("__inject__, scope, node, root",Z+' \n__inject__["'+G+'"] = function (fn) { \nreturn eval("(" + fn.toString() + ").apply(this, [].slice.call(arguments, 1))") \n} \n')(t.EVALSCOPE,i,function(t){return s.getElementById(t,0)},s.DOM[0])}Z&&e(),F&&App.promise.get(F).then(function(t){Z=t[0],e()})}),e.textContent=null;break;case"TEMPLATE":e.command=!0,T=this.sign(a,l,"name",0),this.set(t.spacename,T,e.innerHTML,t.id);break;case"INCLUDE":e.command=!0,t.uuid=r,T=this.sign(a,l,"name",0);var J=this.datar(i,l,!0,1,0),Q=this.take(t.spacename,T);g=t.clone(),Q&&(e.innerHTML=null,g.id=T,this.compile(g,Q,J));break;case-1!=a.indexOf("-")?a:"SHADOW":J=this.datar(i,l,!0);var tt="SHADOW"===a,it=(v=e.cloneNode(!0),this.createShadowRoot(t,e,h,J)),nt=it.id,st=it.dom,ot=(U={}.extend(t),s.module.config.components||{}),rt=(F=this.commands("src",e).value,this.commands("path",e).value),at=this.commands("demo",e).key,ht=F||(rt||ot.path||App.config.root+"components")+"/"+a.toLowerCase(),lt=(Q=tt||at?s.parser(e.innerHTML):null,function(t,e,i){st.innerHTML=null,st.scopeid=U.scopeid,U.sid="components",U.uuid=nt,U.dom=h,U.order=nt,U.scopeid=nt,U.spacename=a,U.path=i,U.shadowroot=it.shadow||this.window.validWindow.document,this.compile(U,t,e),this.reflow(h.previousScroller),this.end(nt),h.trigger("load"),h.loadState="complete"}),ct=function(t){t.components=v,Q&&(lt.call(s,Q.cloneNode(!0),t,null),h.trigger("ready"),h.readyState="complete"),tt||s.get("~/"+ht+"/index.html",function(e){lt.call(s,e,t,ht),h.trigger("ready"),h.readyState="complete"}),U.scroller&&s.observer(st,function(t){s.reflow(h.previousScroller)})};this.DOM[nt]={},this.components.waiting++,this.mission[t.order].components.push(function(t){return function(e){ct(t),this.components.waiting--}}(J)),e.innerHTML=null,h.extendProperty("update",ct),h.extendProperty("reflow",function(){s.reflow(h.previousScroller)}),h.extendProperty("ready",function(t){h.readyState&&t(),h.on("ready",t)}),h.extendProperty("load",function(t){h.loadState&&t(),h.on("load",t)}),h.extendProperty("register",function(t){void 0==h[t]?h.extendProperty(t,function(e){h.bind(t,e)}):App.console.error("components register","componentsError",'"'+t+'" is token')})}}sign(t,e,i,n,s,o,r){var a,h,l,c;if(n>=0)a=e[n];else if(h=!0,!(a=e.getNamedItem(i))&&-1===n)return r;return a||this.debug(t,i,e),l=a.name,c=a.value,c=(c=l===i?c:!h&&l)&&s?s[0]+c+s[1]:c,["false","none",null].consistOf(c)?c=!1:["","true"].consistOf(c)?c=!0:isNaN(c)||(c=Number(c)),c}datar(t,e,i,n,s){return e.length?function(o){return i&&(o.__proto__=t),e.each(function(e,i,r,a){var h=i.name,l=i.value;switch(h){case 0===h.indexOf("data:")?h:null:Q(t,l,o,h.slice(5));break;default:l||e!==n?e!==s&&(o[h]=l||!0):o.extend(t.getValueByRoute(h))}},o),o}({}):t}commands(t,e){var i=this.DOMS[e.uuid],n=e.attributes;return i.attributes.getNamedItem(t)?{key:!0,value:i.getAttribute(t)}:n.getNamedItem(t)?{key:!0,value:e.getAttribute(t)}:{key:null,value:null}}observer(t,e){t.observer({childList:!0,subtree:!0,characterData:!0},e)}reflow(t){if(t){var e=t.scrollEvent;e&&(clearTimeout(e.refreshRequestId),e.refreshRequestId=setTimeout(function(){"function"==typeof e.refresh&&e.refresh()},300))}}step(t,e,i){switch(this.uuid(t,e),e.nodeType){case Node.ELEMENT_NODE:this.createElement(t,e),this.setProperty(t,e);for(var n=0;n<e.attributes.length;n++){var s=e.attributes[n].name,o=e.attributes[n].value;this.setAttribute(t,e,s,o,i)}this.tagRule(t,e,i,function(t,e,n){this.watch(e,i,t,function(){this.step(e,n,i),this.end(e.order)},n.uuid)});break;case Node.TEXT_NODE:this.createTextNode(t,e,e.textContent,i)}this.append(t,e)}walker(t,e){for(var i;i=t.nextNode();)e.call(this,i)}include(t,e,i,n,s,o){switch(i="string"==typeof i?this.take(t.spacename,i):i,e="string"==typeof e?this.getElementById(e,t.scopeid):e,s&&(e.innerHTML=null),t.uuid=e.uuid,i=this.compile(t,i,n,!0),o){case-1:e.before(i);break;case 1:e.after(i);break;default:e.appendChild(i)}this.reflow(e.previousScroller),this.end(t.order)}render(t,e,i){return this.save(e,i),this.compile(this.state(t),this.get(t),i,!0),[this.DOMS[0],this.DOM2[0]]}compile(t,e,i,n){var s,o=t.uuid;if(void 0!=e)return s=(e=this.iterator(e)).nextNode(),o=this.creat(t,s,n),this.startTime=Date.now(),this.walker(e,function(e){this.step(t,e,i)}),t.quantum.splice(-1),this.endTime=Date.now(),this.countTime=this.endTime-this.startTime,this.renderCountTime+=this.countTime,this.countTime>(0==o?100:10)&&App.console.warn("<"+s.nodeName.toLowerCase()+"> Consuming too long","Performance warning",this.countTime/1e3+"s"),this.DOMS[o]}dispatch(t,e){if(this.mission[t]&&this.window===this.module.elements.sandbox.window){for(var i=0,n=this.mission[t][e].length;i<n;i++)this.mission[t][e][i].call(this,this.window);this.mission[t][e]=[]}}over(t){0==t&&this.window.window&&(this.window.trigger("moduleload"),App.trigger("moduleload",{id:this.module.id,module:this.module})),0==this.components.waiting&&(this.components.waiting=-1,this.loaded(),this.loaded=noop,App.console.info("Module ["+this.module.id+"]","rendering time-consuming",this.renderCountTime/1e3+"s"),this.window.window&&(this.window.trigger("moduleloadall"),App.trigger("moduleloadall",{id:this.module.id,module:this.module})))}end(t){this.dispatch(t,"parallel"),this.dispatch(t,"entanglement"),this.dispatch(t,"scroller"),this.dispatch(t,"components"),this.dispatch(t,"scripts"),this.dispatch(t,"events"),this.dispatch(t,"async"),this.over(t)}load(t){return this.loaded=t,this}debug(t,e,i,n){if(App.console.error("<"+t+" "+e+"=?>","DOMError","is not defined"),i&&App.console.dir([i]),n)throw"<"+t+"> error"}},nt=()=>{return class{constructor(t){return t&&this.init(t),this}init(t){this.id=t,this.css=new F,this.dom=new it,this.module=App.modules[t],this.config=this.module.config,this.target=this.module.elements.container,this.module.one("failedtoload",t=>{this.errored(this.module),this.errored=noop})}render(t,e,i){return t&&i&&(i[2]="function"==typeof e.onprefetch&&e.onprefetch(i[2])||i[2],this.fetched(e,()=>{this.write(this.compile(t,i[0],i[1],i[2]))})),this}write(t){this.config.sandbox?this.sandbox(t[0],t[1]):this.embed(t[0],t[1])}compile(t,e,i,n){return this.module.scope=n.data={}.extend(App.modules.frameworks.scope||{},{module:this.module,config:this.config,params:this.module.param,device:device},n.data),this.css.init(t,this.module).setup({data:{module:this.module,config:this.config,params:this.module.param,scope:n.data,device:device,os:device.os,dpi:device.ui.dpi,feat:device.feat,prefix:device.feat.prefix},descendant:this.config.sandbox||this.config.shadowbox||["frameworks","system"].consistOf(t)?null:"module-container[name='"+t+"']"}),this.dom.init(this.module,App.sandbox,{}.extend(App.modules.frameworks.helper,this.module.helper),this.css).setup({suri:i,dids:e.data,sids:e.source,parallel:this.config.mirroring}),[this.css.render(this.config.style,e.style,n.style),this.dom.render(this.config.source[0],n.source,n.data)]}include(t){let e=this.module,i=this.config,n=e.dimension,s=e.prefetch[n];return e.remoteframe?this.frame(e):s?this.render(t,e,s):void setTimeout(()=>{App.source().fetch(t,i,e.param,(...i)=>{this.render(t,e,i),e.config.cache&&!e.config.update&&(e.prefetch[e.dimension]=i,e.updatetime[e.dimension]=Date.now())},()=>{this.errored(e)})},0)}scope(t,e,i){let n=this.id,s=this.dom,o=(this.config,this.module),r=t.window;t.document,r.module=this.module,r.App=r.application=App,r.validWindow=r,r.TOP=window,r.DOM=r.DOMS=s.DOM[0],r.DATA=r.SCOPE=r.scope=s.DATA,r.root=e,r.node=s.getElementById,o.addElement("sandbox",t),o.addElement("context",e),o.addElement("content",i),r.onerror=function(){App.trigger("error",{id:n,module:o})},t.window!==window&&(__defineUnify__(t.window),__defineProto__(t.window))}trick(t,e){t.window!==window&&(t.window.validWindow=t.window.vwindow=window,t.window.validDocument=t.window.vdocument=window.document,t.window.document.extendProperty("getElementById",t=>this.dom.DOM[0][t]||e.find("#"+t)[0]||window.document.getElementById(t)),t.window.document.extendProperty("getElementsByName",t=>e.find("*[name="+t+"]").toArray()||window.document.getElementsByName(t)),t.window.document.extendProperty("getElementsByClassName",t=>e.find("."+t).toArray()||window.document.getElementsByClassName(t)),t.window.document.extendProperty("getElementsByTagName",t=>e.find(t).toArray()||window.document.getElementsByTagName(t)),t.window.document.extendProperty("getElementsByTagNameNS",(t,e)=>window.document.getElementsByTagNameNS(t,e)))}wrap(t,e,i,n){let s=document.createElement("style");s.name=t,s.innerHTML=e;let o=document.createElement("module-context");return o.name=t,o.className="module-context","frameworks"!=t||0!=n||this.config.shadowbox?o.appendChild(s):document.head.appendChild(s),o.appendChild(i),o}script(){let t=this.id,e=this.module,i="",n="";return e.config.script.each(function(s,o){(i=e.resources.script[o])?n+="<script src="+App.realpath(t,null,i)+"><\/script> \n":App.console.error('resources.script["'+o+'"]',"Config error","is not definde")}),n}style(t){return"<style>"+t+"</style>"}blakbox(t,e,i,n,s){let o=new Sandbox(!0),r=this.module.config;return o.iframe.attr({name:this.id,src:"about:blank",seamless:"seamless"}).css(n?{display:"none"}:{display:"block",position:"absolute","z-index":"0",width:"100%",height:"100%",border:"0"}),s?o.iframe.attr("sandbox","allow-same-origin"):"string"!=typeof r.sandbox||-1!==r.sandbox.indexOf("allow-same-origin")&&-1!==r.sandbox.indexOf("allow-scripts")||o.iframe.attr("sandbox",r.sandbox),t.appendChild(o.iframe),s?(o.init().open().write(e).close(),o):(o.init().unify(),o.open(),o.window.addEventListener("beforeunload",function(t){-1!==App._EXISTS&&(App._EXISTS=-1,setTimeout(function(){top.location.reload()},0))}),this.scope(o,n||o.document,n||o.iframe),o.write(e,i),o.close(),o.window.addEventListener("touchmove",preventDefaultEvent,!1),o)}mirroring(t,e){let i=this.config.mirroring;if(!i)return;let n=this.module,s=this.blakbox(this.target,this.style(t),null,null,!0);s.iframe.css({"z-index":"-1",filter:i.filter||"none"}),s.document.body.appendChild(e),n.addElement("mirroring",s.iframe)}container(){let t,e,i,n;return["frameworks","system"].consistOf(this.id)?t=this.target:(i=!!(n=this.config.mirroring)&&n.clip,e=document.createElement("module-mask"),t=document.createElement("module-view"),e.appendChild(t),this.target.appendChild(e),this.module.addElement("mask",e),this.module.addElement("view",t),this.module.clipView(i)),this.config.shadowbox&&t.createShadowRoot?t.createShadowRoot():t}frame(t){let e,i,n=document.createElement("iframe");n.src=t.remoteframe,n.setAttribute("app",!0),this.target.appendChild(n),e=n.contentWindow,i=n.contentWindow.document,t.addElement("content",n),t.addElement("context",i),t.addElement("sandbox",{window:e,document:i,iframe:n}),e.onload=(()=>{this.fetched(t,noop),e.App?(e.App.name=t.id,e.addEventListener(2===t.config.preview?"applicationload":"applicationready",()=>{this.readied(t,noop),setTimeout(()=>{this.loaded(t,noop)},0)},!1)):(this.readied(t,noop),setTimeout(()=>{this.loaded(t,noop)},0))}),n.onerror=(()=>{this.errored(t)})}sandbox(t,e){let i=this,n=this.module,s=this.container(),o=this.blakbox(s,this.style(t),this.script());o.document.ready(function(){o.document.body.appendChild(e[0]),i.over(n,o.window,o.document.body),i.mirroring(t,e[1])})}embed(t,e){let i=this.id,n=this.module,s=(this.config,this.wrap(i,t,e[0],0)),o=this.container(),r=this.blakbox(o,null,this.script(),s);o.appendChild(s),this.trick(r,s),this.over(n,r.window,s),this.mirroring(t,e[1])}over(t,e,i){let n=this;2===t.config.preview?n.dom.space(e,i).load(function(){n.readied(t,function(){n.loaded(t)})}).end(0):this.readied(t,function(){n.dom.space(e,i).load(function(){n.loaded(t)}).end(0)})}prefetch(t){return this.fetched=t,this}then(t){return this.readied=t,this}get(t){return this.loaded=t,this.include(this.id),this}error(t){return this.errored=t,this}}},st={flip:function(t){t.in.duration(0).perspective(1e3).to(0,0,0).opacity(0).rotate3d(0,1,0,90*t.direction).end(function(){t.out.duration(300).perspective(1e3).rotate3d(0,1,0,-90*t.direction).end(function(){t.out.duration(0).opacity(0).end(),t.in.duration(0).to(0,0,0).opacity(1).rotate3d(0,1,0,90*t.direction).end(function(){t.in.duration(300).rotate3d(0,1,0,0).end(function(){t.callback(!1)})})})})},fade:function(t){return function(e){let i,n,s,o;switch(t){case 0:i=1,n=0,s=e.in,o=e.out;break;case 1:i=0,n=1,s=o=e.in}s.duration(0).to(0,0,0).opacity(i).end(function(){o.duration(300).opacity(n).end(function(){e.callback(!1)})})}},slide:function(t){return function(e){let i,n,s,o;switch(t){case 0:s=-(o=e.height),i=n=0;break;case 1:i=e.width,n=-i,s=o=0;break;case 2:s=e.height,o=-s,i=n=0;break;case 3:i=-(n=e.width),s=o=0}e.in.duration(0).to(i,s,0).end(function(){e.in.duration(300).to(0,0,0).end(),e.out.duration(300).to(n,o,0).end(function(){e.callback(!1)})})}},zoom:function(t){return function(e){e.in.origin(0==t?e.attach:e.origin).duration(0).to(0,0,0).scale(0==t?2.5:0).end(function(){e.out.origin(1==t?e.attach:e.origin).duration(0).to(0,0,0).opacity(1).scale(1).end(function(){e.in.duration(300).to(0,0,0).scale(1).end(),e.out.duration(300).opacity(0==t?0:1).scale(0==t?0:2.5).end(function(){e.callback(!1)})})})}}};let ot,rt=function(t,e){void 0===e&&(e={}),this.init(t,e)},at=rt.prototype,ht=["canvas","vml"],lt=["oval","spiral","square","rect","roundRect"],ct=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,ut=!!document.createElement("canvas").getContext,dt=!0,pt=function(t,e,i){let n,s=document.createElement(t);for(n in i)s[n]=i[n];return void 0!==e&&e.appendChild(s),s},ft=function(t,e){for(var i in e)t.style[i]=e[i];return t},mt=function(t,e){for(var i in e)t.setAttribute(i,e[i]);return t},gt=function(t,e,i,n){t.save(),t.translate(e,i),t.rotate(n),t.translate(-e,-i),t.beginPath()};at.init=function(t,e){"boolean"==typeof e.safeVML&&(dt=e.safeVML);try{void 0!==document.getElementById(t)?this.mum=document.getElementById(t):this.mum=document.body}catch(t){this.mum=document.body}if(this.mum=t,this.cont=pt("loader",this.mum),ut)ot=ht[0],this.can=pt("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=ft(pt("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(ot=ht[1],void 0===rt.vmlSheet){document.getElementsByTagName("head")[0].appendChild(pt("style")),rt.vmlSheet=document.styleSheets[document.styleSheets.length-1];let t=["group","oval","roundrect","fill"];for(let e=0;e<t.length;++e)rt.vmlSheet.addRule(t[e],"behavior:url(#default#VML); position:absolute;")}this.vml=pt("group",this.cont)}this.setColor(this.color),this.draw(),ft(this.cont,{display:"none"})},at.cont={},at.can={},at.con={},at.cCan={},at.cCon={},at.timer={},at.activeId=0,at.diameter=40,at.setDiameter=function(t){this.diameter=Math.round(Math.abs(t)),this.redraw()},at.getDiameter=function(){return this.diameter},at.cRGB={},at.color="#000000",at.setColor=function(t){this.color=ct.test(t)?t:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},at.getColor=function(){return this.color},at.shape=lt[0],at.setShape=function(t){for(let e in lt)if(t===lt[e]){this.shape=t,this.redraw();break}},at.getShape=function(){return this.shape},at.density=40,at.setDensity=function(t){this.density=dt&&ot===ht[1]?Math.round(Math.abs(t))<=40?Math.round(Math.abs(t)):40:Math.round(Math.abs(t)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},at.getDensity=function(){return this.density},at.range=1.3,at.setRange=function(t){this.range=Math.abs(t),this.redraw()},at.getRange=function(){return this.range},at.speed=2,at.setSpeed=function(t){this.speed=Math.round(Math.abs(t))},at.getSpeed=function(){return this.speed},at.fps=24,at.setFPS=function(t){this.fps=Math.round(Math.abs(t)),this.reset()},at.getFPS=function(){return this.fps},at.getRGB=function(t){return t="#"===t.charAt(0)?t.substring(1,7):t,{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},at.draw=function(){let t,e,i,n,s,o,r,a,h,l,c,u,d,p=0,f=this.density,m=Math.round(f*this.range),g=1e3,v=0,y=this.cCon,b=this.diameter,w=.47;if(ot===ht[0])for(y.clearRect(0,0,g,g),mt(this.can,{width:b,height:b}),mt(this.cCan,{width:b,height:b});p<f;){switch(h=p<=m?1-1/m*p:h=0,r=(o=270-360/f*p)/180*Math.PI,y.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+h.toString()+")",this.shape){case lt[0]:case lt[1]:t=.07*b,n=b*w+Math.cos(r)*(b*w-t)-b*w,s=b*w+Math.sin(r)*(b*w-t)-b*w,y.beginPath(),this.shape===lt[1]?y.arc(.5*b+n,.5*b+s,t*h,0,2*Math.PI,!1):y.arc(.5*b+n,.5*b+s,t,0,2*Math.PI,!1);break;case lt[2]:t=.12*b,n=Math.cos(r)*(b*w-t)+.5*b,s=Math.sin(r)*(b*w-t)+.5*b,gt(y,n,s,r),y.fillRect(n,s-.5*t,t,t);break;case lt[3]:case lt[4]:i=.36*(e=.24*b),n=Math.cos(r)*(i+.13*(b-i))+.5*b,s=Math.sin(r)*(i+.13*(b-i))+.5*b,gt(y,n,s,r),this.shape===lt[3]?y.fillRect(n,s-.5*i,e,i):(a=.55*i,y.moveTo(n+a,s-.5*i),y.lineTo(n+e-a,s-.5*i),y.quadraticCurveTo(n+e,s-.5*i,n+e,s-.5*i+a),y.lineTo(n+e,s-.5*i+i-a),y.quadraticCurveTo(n+e,s-.5*i+i,n+e-a,s-.5*i+i),y.lineTo(n+a,s-.5*i+i),y.quadraticCurveTo(n,s-.5*i+i,n,s-.5*i+i-a),y.lineTo(n,s-.5*i+a),y.quadraticCurveTo(n,s-.5*i,n+a,s-.5*i))}y.closePath(),y.fill(),y.restore(),++p}else{switch(ft(this.cont,{width:b,height:b}),ft(this.vml,{width:b,height:b}),this.shape){case lt[0]:case lt[1]:u="oval",t=140;break;case lt[2]:u="roundrect",t=120;break;case lt[3]:case lt[4]:u="roundrect",t=300}for(e=i=t,n=500-i,s=.5*-i;p<f;){switch(h=p<=m?1-1/m*p:h=0,o=270-360/f*p,this.shape){case lt[1]:e=i=t*h,n=500-.5*t-t*h*.5,s=.5*(t-t*h);break;case lt[3]:case lt[4]:n=500-(e=.95*t),s=.5*-(i=.28*e),v=this.shape===lt[4]?.6:0}c=mt(ft(pt("group",this.vml),{width:g,height:g,rotation:o}),{coordsize:g+","+g,coordorigin:"-500,-500"}),l=ft(pt(u,c,{stroked:!1,arcSize:v}),{width:e,height:i,top:s,left:n}),d=pt("fill",l,{color:this.color,opacity:h}),++p}}this.tick(!0)},at.clean=function(){if(ot===ht[0])this.con.clearRect(0,0,1e3,1e3);else{let t=this.vml;if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)}},at.redraw=function(){this.clean(),this.draw()},at.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},at.tick=function(t){var e=this.con,i=this.diameter;t||(this.activeId+=360/this.density*this.speed),ot===ht[0]?(e.clearRect(0,0,i,i),gt(e,.5*i,.5*i,this.activeId/180*Math.PI),e.drawImage(this.cCan,0,0,i,i),e.restore()):(this.activeId>=360&&(this.activeId-=360),ft(this.vml,{rotation:this.activeId}))},at.show=function(){if("number"!=typeof this.timer){var t=this;this.timer=self.setInterval(function(){t.tick()},Math.round(1e3/this.fps)),ft(this.cont,{display:"block"})}},at.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,ft(this.cont,{display:"none"}))},at.kill=function(){let t=this.cont;"number"==typeof this.timer&&this.hide(),ot===ht[0]?(t.removeChild(this.can),t.removeChild(this.cCan)):t.removeChild(this.vml);for(let t in this)delete this[t]};var vt=rt,yt=()=>{const t=requestAnimationFrame,e=requestIdleCallback;return class{constructor(){this.Animations=st}init(){let t=this;this.LIMIT=[],this.queue=[],this.singleflowtimes=0,window.on("hashchange popstate",function(e){App.equalsParam(t.prehistory,window.location.hash)||(t.prehistory=window.location.hash,t.back(),setTimeout(function(){t.prehistory=null},0))});let e=document.createElement("relative-windows");e.id="relative-viewport",e.style.position="absolute",e.style.zIndex=1,e.style.width=e.style.height="100%",e.style.overflow="hidden",P(e),App.relativeViewport=e;let i=document.createElement("absolute-windows");i.id="absolute-viewport",i.style.position="absolute",i.style.zIndex=1e4,i.style.width=i.style.height="100%",i.style.overflow="hidden",P(i),App.absoluteViewport=i;let n=document.createElement("fixed-windows");n.id="fixed-viewport",n.style.position="fixed",n.style.zIndex=999999,n.style.width="100%",i.style.height="0",n.style.overflow="visible",P(n),App.fixedViewport=n,document.body.appendChild(App.relativeViewport),document.body.appendChild(App.absoluteViewport),document.body.appendChild(App.fixedViewport)}setup(t){this.options=t;let e=t.currpage,i=t.homepage||"frameworks",n=t.exists,s=t.singleflow,o=t.singlelocking;s&&(n||e===i||this.hash(i,null,0),null!=o&&i&&this.hash(i,null,1))}back(){let t=App.route(),e=t.id||this.options.homepage||"frameworks",i=t.param,n=App.modules[e];if(-1===this.options.singlelocking&&App._inHistory===history.length-1)return window.history.back();if(!0===this.options.singlelocking&&("frameworks"===this.id||0===this.module.config.level))return this.singleflowtimes++,this.hash(this.id,this.param,1),void App.trigger("exit",{singleflow:this.singleflowtimes});if(this.singleflowtimes=0,this.id!==e||!App.equalsParam(this.param,i)){if(this.options.singleflow&&n&&0!==n.config.level&&n.config.level>=this.module.config.level)return window.history.back();this.to(e,i,-1),App.trigger("back",{id:e,module:n})}}hash(t,e,i){switch(t=t||this.id,i=void 0===i||i,t=this.reid(t),e=e?e.replace(/\s/g,""):"",i){case 0:window.history.replaceState({id:t},null,"#"+t+"/"+e);break;case 1:window.history.pushState({id:t},null,"#"+t+"/"+e);break;default:window.location.hash=t+"/"+e}App.exists(!0)}status(t,e,i){t=t||this.id,e=(this.module.param||this.param||{}).extend(e).objectToParams(null,1),i?this.hash(t,e):window.history.replaceState({},null,"#"+this.reid(t)+"/"+(e?e.replace(/\s/g,""):"")),this.module.setParam(e)}reid(t){return/\//.test(t)&&0!==t.indexOf("[")?"!"+t+"!":t}get(t,e,i){let n=this.options.nofindpage||"404";return this.loading(e,1),App.get(t,n=>{App.modules[t]||t===n.id||(App.modules[t]=n.cloneAsNew(t)),this.loading(e,0),i(n)},()=>{i(),t!==n&&(this.loading(e,0),this.to(n))}),this}to(t,e,i,n,s){let o=arguments;if(!t)return this;if(0===this._process)return-1==i?this.queue.push(o):this.queue=[],this;if(-1!==i&&(this.queue=[]),this.singleflowtimes=0,!isNaN(t)){switch(Number(t)){case-1:return window.history.back(),this;case 0:return this}return}if(this._process=0,void 0===App.modules[t])return this.get(t,this.od,t=>{this._process=-1,t?this.to.apply(this,o):this.next()});e=App.getParam(e),this.id=t,this.param=e,this.event=n,this.callback=s||noop;let r=this.od,a=r?[t,r]:[t],h=App.modules[t],l=App.modules[r],c=r?[h,l]:[h];return n&&(h.event=n),"frameworks"===t&&(i=-1),this.self=t==r,this.loading(r,0),this.loading(t,0),this.check(h,e),h.rsetParam().setParam(e,!0),1!==h.getStatus()&&(h.update=!0),this.self&&h.dimension===e&&h.loaded&&!h.update?(this._process=1,this):(this.ids=a,this.module=h,this.modulu=l,this.moduli=c,this.animation=!(!App._EXISTS||this.self)&&(-1==i?l:h).config.animation,1!=this.animation&&"inherit"!=this.animation||(this.animation=App.frameworks.config.animation),"string"==typeof this.animation&&(this.animation=this.animations(this.animation)),this.cutting=!(!r||h.config.absolute==l.config.absolute),h.elements.container||this.container(t),this.start(()=>{r||(this.cut(),this.end()),-1!==i&&this.hash(t,e,i),App.id=this.od=t,App.module=h,this.build(t,(t,e)=>{let i=()=>{t&&(e&&e(),this._process=1,this.next())};r?this.transform(()=>{i()}):i()})}),this)}next(){e(()=>{this.queue.length&&this.to.apply(this,this.queue.shift())},{timeout:2e3})}check(t,e){Date.now()-t.updatetime[e]>t.config.cache&&(delete t.prefetch[e],t.dimension=!1),this.prefetched=!!t.prefetch[e]}build(t,e){let i=this.module,n=i.config,s=n.timeout;"number"==typeof s&&(0===s?i.update=!0:i.loaded&&(Date.now()-i.timestamp)/1e3>=s&&(i.timeout=!0)),!0!==i.loaded||!0===i.update||!0===n.update?(i.destroy(1),1==App._EXISTS&&!1!==navigator.onLine&&(this.prefetched||n.preview)?this.include(t,null,e):e(i,()=>{this.include(t)})):e(i,function(){i.timeout&&(i.timeout=!1,i.refresh())})}limit(t,e){let i=this.LIMIT.indexOf(t);!1!==e.config.destroy&&(-1!==i&&this.LIMIT.splice(i,1),this.LIMIT.push(t),this.LIMIT.length>this.options.limit&&App.modules[this.LIMIT.splice(0,1)].clearCache(!0,!0).destroy(-1))}reset(t,e){let i=App.modules[t],n=i.config,s=i.elements.container,o=["frameworks","system"].consistOf(t);s.style.cssText="",o||s.css({position:"absolute","z-index":(Number(i.config.level)||0)+1,background:n.background||"",transform:e?"translate3d(0, 0, 0)":"translate3d(200%, 200%, 0)"})}update(t,e,i,n){this.include(t,function(t,e){i?i(e):e()},function(t,e){n?n(e):e()})}include(t,i,n,s){let o,r,a=this,h=this.module,l=h.dimension;h.status[l]=0,h.timeout=!1,this.limit(t,h),r=setTimeout(()=>{h.loading(1),this.modulu&&h.config.preview&&this.modulu.loading(1)},1200),n&&(o=setTimeout(()=>{this._process=-2,this.refreshing||n()},2e3)),"function"==typeof h.events.preload&&h.events.preload.call(h),h.Template=App.template(t).prefetch(function(t,e){t.trigger("fetch"),clearTimeout(r),a.modulu&&a.modulu.loading(0),i?i(t,e):e()}).then(function(t,i){clearTimeout(o),t.trigger("ready"),n&&-2!==a._process?e(()=>n(t,i),{timeout:500}):(i(),a.next()),a.callback(t),"function"==typeof t.events.load&&t.events.load.call(t),App.trigger("moduleload",{module:t})}).get(function(t){t.timestamp=Date.now(),t.status[l]=1,t.loaded=!0,t.trigger("load"),t.loading(0)}).error(function(t){a._process=-1,t.trigger("error"),t.status[l]=-1,s&&s(t),"function"==typeof t.onerror&&t.onerror()})}loading(t,e){let i,n=App.modules,s=n[t];if(s&&!s.refreshing){if("function"==typeof(i="function"==typeof(i=s.events.loading)?i:!1!==i?App.modules.frameworks.events:null))return i.apply(s,arguments);switch(i=s.elements.loader,e){case 0:if(!i)return;i.hide(),s.elements.loader.hidden=!0,s.elements.loader.cont.remove(),delete s.elements.loader;break;case 1:if(i&&!1===i.hidden)return;const t=38*UNIT.dpi,o={shape:"roundRect",diameter:t*devicePixelRatio,density:12,speed:1,FPS:12,range:.95,color:"#999999"},r=s.config.loader||n.frameworks.config.loader;r&&o.extend(r),(i=new vt(s.elements.container,{safeVML:!0})).setShape(o.shape),i.setDiameter(o.diameter),i.setDensity(o.density),i.setSpeed(o.speed),i.setFPS(o.FPS),i.setRange(o.range),i.setColor(o.color),i.cont.style.position="absolute",i.cont.style.zIndex=999,i.cont.style.top=i.cont.style.left="50%",i.cont.style.marginTop=i.cont.style.marginLeft=-.5*t+"px",i.cont.style.width=i.cont.style.height=t+"px",i.cont.children.each(function(e,i){i.style.width=i.style.height=t+"px"}),i.show(),s.elements.loader=i,s.elements.loader.hidden=!1}}}container(t){let e=App.modules[t],i=e.config,n="system"==t?App.fixedViewport:!1===i.absolute?App.relativeViewport:App.absoluteViewport,s=document.createElement("module-container");s.setAttribute("name",t),s.setAttribute("type",["frameworks","system"].consistOf(t)?t:"module"),P(s),e.addElement("container",s),this.reset(t,this.cutting||!this.animation),n.appendChild(s)}animations(t){var e=this.Animations;switch(t){case"flip":return[e.flip,e.flip];case"fade":return[e.fade(1),e.fade(0)];case"zoom":return[e.zoom(1),e.zoom(0)];case"slide":case"slideLeft":case"slideleft":case"slide-left":return[e.slide(1),e.slide(3)];case"slideRight":case"slideright":case"slide-right":return[e.slide(3),e.slide(1)];case"slideUp":case"slideup":case"slide-up":return[e.slide(0),e.slide(2)];case"slideDown":case"slidedown":case"slide-down":return[e.slide(2),e.slide(0)];default:return!1}}transform(e){let i=this.events,n=this.module,s=this.modulu,o=this.moduli,r=this.cutting,a=1!==o.length&&n.config.level!==s.config.level&&(n.config.level>s.config.level?0:1),h=0!==a,l=function(t){t.callback()},c=r?[!1===n.config.absolute?App.relativeViewport:App.absoluteViewport,!1===s.config.absolute?App.relativeViewport:App.absoluteViewport]:[n.elements.container,s.elements.container],u=new Animate(c[0]),d=new Animate(c[1]),p=0,f=0,m="center",g="center",v=device.ui.width,y=device.ui.height,b=i?i.touches:null;(b=b?b.srcEvent:null)||(b=(b=s.events.touches)?b.srcEvent:{}),b.changedTouches?(p=b.changedTouches[0].pageX,f=b.changedTouches[0].pageY):(p=b.x,f=b.y),p&&f&&(g=[p,f],p<v/4?p=0:p>3*v/4&&(p=v),f<y/4?f=0:f>3*y/4&&(f=y),m=[p,f]),!1!==a&&("function"==typeof this.animation?l=this.animation:"object"==typeof this.animation&&(l=this.animation[2===this.animation.length?a:0]));let w=t=>{r&&this.cut(t),this.end(t),this.dispatch(),e()};t(()=>{l({view:c,x:p,y:f,in:u,out:d,width:v,height:y,viewport:[App.relativeViewport,App.absoluteViewport],modules:o,reverse:h,direction:h?-1:1,backset:a,callback:w,origin:g,attach:m,touches:b})})}dispatch(){let t={ids:this.ids,modules:this.moduli};try{this.cutting&&App.frameworks.trigger(1==this.module.config.absolute?"hide":"show"),this.module.trigger("show",t),this.modulu.trigger("hide",t)}catch(t){}}start(t){if("function"==typeof this.module.events.transformstart&&!1===this.module.events.transformstart.call(this.module))return!1;this.animation&&!this.cutting||this.module.elements.container.css({transform:"translate3d(0, 0, 0)"}),t(),App.trigger("transformstart",{ids:this.ids,modules:this.moduli})}end(t){this.modulu&&(this.animation&&t||(this.modulu.elements.container.css({transform:"translate3d(200%, 200%, 0)"}),this.reset(this.id,!0),!this.self&&(this.modulu.config.update||this.modulu.config.destroy||this.modulu.config.cache<=0)&&this.modulu.destroy(1),this.modulu.remoteframe.App&&this.modulu.remoteframe.App.trigger("background")),this.modulu.elements.container.css({"transition-duration":"0ms"})),"function"==typeof this.module.events.transformend&&this.module.events.transformend.call(this.module),App.trigger("transformend",{ids:this.ids,modules:this.moduli})}cut(t){this.animation&&t||(App.relativeViewport.style.cssText="",App.absoluteViewport.style.cssText="",!1===this.module.config.absolute?(App.absoluteViewport.css({transform:"translate3d(200%, 200%, 0)"}),App.relativeViewport.css({transform:"translate3d(0, 0, 0)"})):(App.relativeViewport.css({transform:"translate3d(200%, 200%, 0)"}),App.absoluteViewport.css({transform:"translate3d(0, 0, 0)"})))}then(t){return this.callback=t||noop,this}}},bt=()=>{const t=new Sandbox,e=t.window,i=t.document,n=i.head;let s=0,o=[];function r(t,i,n,s,r,a,u,d){return"JSONP"===t.toUpperCase()||/=\~/.test(i)?h(i,n,r.caller,r.callee,a,u):new Promise(function(a,h){var p;r=r||{},s=s||{},n=n||{};var f=Object.objectToParams(n),m=!0;"GET"===t&&f&&(i+=(-1!=i.indexOf("?")?"&":"?")+f,f=null);try{p=function(t){var i=new(t?e:window).XMLHttpRequest;return"withCredentials"in i||(i="undefined"!=typeof XDomainRequest?new XDomainRequest:null),i}(d)}catch(t){h()}function g(){b&&clearTimeout(w),p.abort()}function v(){!function(){p.open(t,i,!0),(0==i.indexOf("//")||i.indexOf("://")>0)&&([window.location.host].concat(App.config.origin||[]).each(function(t,e){-1!==(t=i.indexOf(e))&&t<=16&&(m=!1)}),m&&"true"!==r.origin&&(p.withCredentials=!0)),r.contentType&&(s["Content-Type"]=r.contentType);var e="application/x-www-form-urlencoded";for(var n in s)s.hasOwnProperty(n)&&("content-type"===n.toLowerCase()?e=s[n]:p.setRequestHeader(n,s[n]));p.setRequestHeader("Content-type",e)}(),p.send(f)}function y(){g(),0==l(i,g,v,u)&&h()}var b=c.ajaxTimeout;if(b)var w=setTimeout(y,b);p.onerror=y,p.onload=function(){if(b&&clearTimeout(w),4===p.readyState){var t=!p.status||(p.status<200||p.status>=300)&&304!==p.status;delete o[i],t&&h();var e=p.responseText;if(["{","["].consistOf(e.charAt(0)))try{e=JSON.parse(e)}catch(t){try{e=application.sandbox.window.eval("("+e+")")}catch(t){}App.console["object"==typeof e?"warn":"error"]("url["+i+"]","SyntaxError","Unexpected token in JSON")}a([e,p])}},v()})}function a(t){return function(e,i,n,s,o,a){return r(t,e,i,n,s,o,a)}}function h(t,r,a,h,u,d){return new Promise(function(r,p){var f=h||(a?"__call__"+ ++s:"__"+u+"__"+d),m=i.createElement("script"),g=g||{};a&&(g[a]=f);var v=Object.objectToParams(g);function y(){x&&clearTimeout(S);try{n.removeChild(m)}catch(t){}}function b(){(m=i.createElement("script")).charset="utf-8",m.src=t,m.onerror=w,n.appendChild(m)}function w(){y(),0==l(t,y,b,d)&&p()}v&&(t+=(-1!=t.indexOf("?")?"&":"?")+v,v=null),t=t.replace(/=\~/,"="+f),e.onerror=function(t){w(),application.trigger("jsonerror",t)};var x=c.ajaxTimeout;if(x)var S=setTimeout(w,x);e[f]=function(i,n){y(),("data"!=n&&"js"!=n||"object"==typeof i)&&(delete e[f],delete o[t],r([i,{response:i}]))},b()})}function l(t,e,i,n){let s=o[t]||1,r=App.modules[n];if(r&&r.trigger("failedtoload",{id:n,url:t,again:s}),s&&s>=c.TRYAGAIN)return!1;return s++,o[t]=s,!1===navigator.onLine?window.addEventListener("online",function n(){e(),setTimeout(function(){i()},1e3),o[t]||window.removeEventListener("online",n,!1)},!1):setTimeout(function(){i()},7e3*s),s}t.unify(!0),e.define=function(t,i,n){e["__"+t+"__"+i](n,t)},e.style=function(t,i){e["__style__"+t](i,"style")},e.source=function(t,i){e["__source__"+t](i,"source")},e.data=function(t,i){e["__data__"+t](i,"source")};const c={ajax:r,origin:h,get:a("GET"),post:a("POST"),put:a("PUT"),del:a("DELETE"),TRYAGAIN:3,ajaxTimeout:6e4};return c};function wt(t,e,i,n){requestIdleCallback(function(s){console[t]("%c "+(e[0]?e[0]+" ":"")+"%c "+(i[0]?i[0]+" ":"")+"%c "+(n[0]?n[0]+" ":""),"color: #ffffff; background:"+e[1],"color: #ffffff; background:"+i[1],"color: #ffffff; background:"+(n[0]?n[1]:i[1]))})}var xt={log:(t,e,i)=>{wt("log",[e,"#999"],[t,"#333"],[i,"#666"])},info:(t,e,i)=>{wt("info",[e,"#0cf"],[t,"#06c"],[i,"#0c0"])},warn:(t,e,i)=>{wt("warn",[e,"#f60"],[t,"#f30"],[i,"#f90"])},error:(t,e,i)=>{wt("warn",[e,"#f06"],[t,"#903"],[i,"#993"])},dir:t=>{console.dir.apply(console,t)}},St=()=>{const t=k(),e=A(),i=nt(),n=yt();return class{constructor(){this.console=xt,this.promise=bt(),this.sandbox=(new Sandbox).unify(),this.transform=new n(P),this.init()}init(){this._error={},this._events={},this._prefetchs={},this._callbacks={},this._prefetching=[],this._EXISTS=!1,this._inHistory=history.length,this._inPrefetch=!1,this.modules={},this.config={},this.frameworks=null,this.setting(App.config),this.name=App.name||"top",this.version="3.0.4",this.console.log(this.version,"Version","ioing.com"),window.addEventListener("touchstart",function(t){App.preventDefaultException(t,{tagName:/^(INPUT|TEXTAREA|HTMLAREA|BUTTON|SELECT)$/})||t.preventDefault()},!1),window.addEventListener("touchmove",preventDefaultEvent,!1)}setting(t){this.config.extend(t)}on(t,e){return t.split(" ").each((t,i)=>{this._events.initial(i,[]).push(e)}),this}one(t,e){let i=()=>{e.apply(this,arguments),this.off(t,i)};return t.split(" ").each((t,e)=>{this._events.initial(e,[]).push(i)}),this}off(t,e){t.split(" ").each((t,i)=>{if(!this._events[i])return;let n=this._events[i].indexOf(e);n>-1&&this._events[i].splice(n,1)})}trigger(t){let e=arguments;this._events[t]&&this._events[t].each((i,n)=>{try{n.apply(this,[].slice.call(e,1))}catch(e){this.off(t,n),this.console.warn("event:"+t,"Expire","be off")}})}to(){return App.transform.to.apply(App.transform,arguments)}get(e,i,n){if(!e)return;if(this._error[e])return n&&n();if("frameworks"!==e&&void 0===this.modules.frameworks)return this.get("frameworks",()=>{App.get(e,i,n)});let s=this.modules;if(e=decodeURIComponent(e).split("^")[0],i=i||noop,"object"==typeof s[e])return i.apply(this,[s[e]]),s[e];this._callbacks.initial(e,[]).push(i),this.take(e,i=>{void 0===s[e]&&(s[e]=new t(e,define.require(i)),this.filter(e),s[e].initialparam={}.extend(s[e].param),s[e].initialconfig={}.extend(s[e].config),this._callbacks[e].each((t,i)=>{i.apply(this,[s[e]])}),delete this._callbacks[e])},()=>{this._error[e]=!0,n&&n()})}take(t,e,i){let n="",s=this.frameworks,o=(s?s.config:{}).origins;t&&(null===t.match(/^\w+\:/)?n=this.realpath(t,t,"config"):o?o.each((e,i)=>{0==t.indexOf(i)&&(n=t+"/config")}):n=t+"/config",n&&define.require([n],t=>{e&&e(n)},()=>{i&&i()}))}origin(t){let e=null!==t.match(/^\w+\:/),i=e?t.split("/").shift():null;return t=e?t:t.split("^")[0],{root:i||this.config.root+"modules",path:e?t:this.config.root+"modules/"+t}}realpath(t,e,i,n){if(!(i=(i=i.replace(/\"|\'/g,"")).trim()))return"";if(null===i.match(/^\w+\:/)&&0!==i.indexOf("//")){if(1==n)return this.config.root+i;let s=this.origin(t),o=s.root,r=s.path,a=n||(e?o+"/"+e:r);i=0===i.indexOf("/")?o+i:0===i.indexOf("./")?a+i.substr(1):0===i.indexOf("~/")?a+i.substr(1):0===i.indexOf("~~/")?r+i.substr(2):a+"/"+i}return i}source(){return new e}template(t){return new i(t,P)}prefetching(t,e,i){if(!t||!isNaN(t))return;let n=this.modules,s=this._prefetchs;if(t=t.split("^")[0],i=i||noop,void 0===n[t])return this.get(t,()=>{this.prefetching.apply(this,arguments)});e=(e=this.filterParam(e,n[t].config.route))[0]||null,s.initial(t,[]).push(e),s[t].each((e,s)=>{if(!n[t].remoteframe&&1!=n[t].getStatus()&&(n[t].startLoadTime=Date.now(),s=this.getParam(s),!n[t].prefetch[s])){if(n[t].prefetch[s]=!1,!0===n[t].config.update||0===n[t].config.cache)return this.console.warn("Modules["+t+"]","Prefetch","config[update == true or cache == 0] cannot prefetch");App.source().prefetch(t,n[t].config,{}.extend(n[t].initialparam,this.filterParam(s)[0]),(...e)=>{n[t].endLoadTime=Date.now(),App.console.info("Module ["+t+"]","Prefetch",n[t].endLoadTime-n[t].startLoadTime+"ms"),n[t].prefetch[s]=e,n[t].updatetime[s]=Date.now(),setTimeout(()=>{n[t]&&(n[t].prefetch[s]=null,n[t].updatetime[s]=null,delete n[t].prefetch[s],delete n[t].updatetime[s])},n[t].config.cache),i(e)},e=>{delete n[t].prefetch[s],App.console.error("Module ["+t+"]","Prefetch","failed")})}}),delete s[t]}prefetch(t,e){let i=this;this._prefetching.push([t,e]),this._inPrefetch||(this._inPrefetch=!0,function t(){requestIdleCallback(e=>{if(0===i._prefetching.length)return i._inPrefetch=!1;let n=i._prefetching.shift(),s=setTimeout(function(){t()},1200);i.prefetching(n[0],n[1],function(){clearTimeout(s),setTimeout(function(){t()},300)})})}())}refresh(){this.clearSessionStorage(),this.modules.each((t,e)=>{"frameworks"!==t&&(e.elements&&e.elements.container.remove(),delete this.modules[t])})}clearSessionStorage(t,e){try{if(t)("string"==typeof t?[t]:t).each((t,i)=>{sessionStorage.removeItem(e?"[["+e+"]]:"+i:i)});else for(let i=sessionStorage.length;i>=0;i--)t=sessionStorage.key(i),e&&0!=t.indexOf("[["+e+"]]:")||sessionStorage.removeItem(t)}catch(t){}}clearLocalStorage(t,e){try{if(t)("string"==typeof t?[t]:t).each((t,i)=>{localStorage.removeItem(e?"[["+e+"]]:"+i:i)});else for(let i=localStorage.length;i>=0;i--)t=localStorage.key(i),e&&0!=t.indexOf("[["+e+"]]:")||localStorage.removeItem(t)}catch(t){}}checkLocalStorage(t){try{let e=localStorage.getItem("EXPIRES");e?Date.now()-e>t&&(this.clearLocalStorage(),e=!0):localStorage.setItem("EXPIRES",Date.now()),this.expires=e}catch(t){}}setFileCache(t,e,i){let n="[["+t+"]]:"+e,s=this.modules[t];return new Promise(function(o,r){try{"caches"in window&&("https:"===location.protocol||"localhost"===location.hostname)?caches.open(t).then(function(t){t.put(e,new Response(i,{status:200,statusText:Date.now()})),o(e)}):(localStorage.setItem(n,i),s.storagemaps.push(n),o(e))}catch(t){}})}getFileCache(t,e,i){return new Promise(function(n,s){try{"caches"in window&&("https:"===location.protocol||"localhost"===location.hostname)?caches.open(t).then(function(t){return t.match(e)}).then(function(t){return t?i&&Date.now-t.statusText>=i?s(e):t.text():s(e)}).then(function(t){n(t)}):(t=localStorage.getItem(e))?n(t):s(e)}catch(t){s(e)}})}clearFileCache(t){"caches"in window?t?caches.delete(t):caches.keys().then(function(t){for(let e of t)caches.delete(e)}):this.clearLocalStorage()}getParam(t){return t?this.route("/"+t).param:null}setParam(t,e,i){let n=this.modules[t],s=this.filterParam(e,n.config.route);"string"!=typeof e&&null!==e||(n.update=!this.equalsParam(n.dimension,e),n.dimension=e),i&&n.update?(n.init(),n.param.extend(n.initialparam,s[0]),n.config.extend(n.initialconfig,s[1])):n.param.extend(s[0])}filterParam(t,e){let i={},n=("string"==typeof t?t.paramsToObject(null,e):t)||{};return n.each(function(t,e){0===t.indexOf("^")&&(delete n[t],t=t.substr(1),-1!==["level","cache","timeout"].indexOf(t)&&(i[t]=Number(e)))}),[n,i]}equalsParam(t,e){return t="string"==typeof t?t.paramsToObject():t,e="string"==typeof e?e.paramsToObject():e,Object.equals(t,e)}exists(t){try{if(!t)return parseInt(sessionStorage.getItem("EXISTS"))===history.length;sessionStorage.setItem("EXISTS",history.length)}catch(t){return this.console.warn("storage","Warn","error"),!1}}defend(t,e){e&&(t.innerHTML=null),t.observer({childList:!0},t=>{t.each((t,e)=>{e.addedNodes.each(function(t,e){-1==IMMUNITY.indexOf(e)&&"SCRIPT"!==e.nodeName&&e.remove()})})})}route(t){let e,i;return t||(0==this.config.hash&&this.config.root?(t=location.href.indexOf(this.config.root)).length<=16&&(t+=this.config.root.length,t=location.href.substr(t)):t=location.hash.substr(1)),t=(t=(e=!!(e=/(^\!(.*?)(?=\!\/)\!\/)/.exec(t))&&e[2])?t.slice(e.length):t).split(/\/|\$|\?|\&|\,|\=|\:/),e=e||t[0],i=t.slice(1).join("/"),{id:e?decodeURIComponent(e):null,param:i?decodeURIComponent(i):null}}preventDefaultException(t,e){let i=t.target,n=t.path?t.path[0]:null;if(n&&!(n instanceof Node))return!0;i=i||{},n=n||{};for(let t in e){let s=e[t];if(s.test(i[t])||s.test(n[t]))return!0}return!1}filter(t){let e=this.modules[t],i=e.config;["frameworks","system"].consistOf(t)&&(i.sandbox=!1,i.destroy=!1,"system"==t&&(i.shadowbox=!0),"frameworks"==t&&(this.config.debug=e.debug,i.design&&(UNIT.dp=UI.scale=UI.width/i.design),e.baseStyles&&(CSSBaseStyle+=e.baseStyles))),isNaN(i.level)&&(i.level=0),"Array"!==Object.getInstanceType(i.route)&&("string"==typeof i.route?i.route=i.route.split("\\"):i.route=!1),"string"==typeof i.source&&(e.remoteframe=this.realpath(null,null,i.source,!0)),0==device.feat.shadowRoot&&(i.shadowbox=!1),device.feat.isBadTransition||device.feat.prefixStyle("filter")||(i.mirroring=!1),i.mirroring&&i.mirroring.filter&&0===i.mirroring.filter.indexOf("blur(")&&device.feat.prefixStyle("backdrop-filte")&&(i.mirroring=!1),i.cache=void 0==i.cache?36e4:i.cache,i.timeout=void 0==i.timeout?36e4:i.timeout,i.cache&&i.update&&this.console.warn("cache and update cannot coexist","Config error","The cache should be 0"),!1!==i.absolute&&(i.absolute=!0),void 0==i.script&&(i.script=[]),void 0==i.style&&(i.style=[]),void 0==i.source&&(i.source=[]),"function"==typeof this.modules.frameworks.filter&&this.modules.frameworks.filter(t,i)}}};((t,e)=>{let i=document.getElementById("ioing")||document.getElementsByTagName("script")[0],n=(t=>{let e=t.getAttribute("root"),i=[];return e?null===e.match(/^\w+\:/)&&0!==e.indexOf("//")&&((i=location.pathname.split("/")).pop(),e=location.origin+i.join("/")+"/"+e):((i=t.src.split("/")).pop(),e=i.join("/")+"/"),e})(i);t.App={config:{root:n}},e.write("\n<style>* { margin : 0; padding : 0 } \n\n    html, body { position: absolute; width: 100%; height: 100%; background: #fff; overflow: hidden } \n\n    module-mask, module-view { position: absolute; width: 100%; height: 100%; overflow: hidden } \n\n    module-container[type=module] { display: block; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100% } \n\n    iframe[app=true] { width: 100%; height: 100%; border: 0 } \n\n</style>\n"),t.CSSBaseStyle="\n* { box-sizing: border-box; margin : 0; padding : 0; text-size-adjust: 100%; tap-highlight-color: rgba(0, 0, 0, 0) } \n\nhtml { font-size: 1vw; overscroll-behavior: none } \n\nbody { font-size: 12dp } \n\nhtml, body { position: absolute; width: 100%; height: 100%; overflow: hidden } \n\na { text-decoration: none } \n\n*[href], *[transform], *[on-tap] { cursor: pointer } \n\nbutton { background-color: transparent; border: 0; outline: 0 } \n\ninput, textarea, htmlarea { user-select: initial; touch-callout: initial; border: 0; outline: 0; appearance: none } \n\nhtmlarea { display: inline-block; text-rendering: auto; letter-spacing: normal; word-spacing: normal; text-indent: 0px; text-align: start; font: initial } \n\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block } \n\nol, ul { list-style: none } \n\ntable { border-collapse: collapse; border-spacing: 0 } \n\n\nshadow-root { font-size: 12dp } \n\n\nscroll, scrolling, scrollbar, indicator { display: block; box-sizing: border-box } \n\nscroll { position: relative; padding: 0; border: 0; overflow: hidden } \n\nscroll[fullscreen] { position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 2 } \n\nscroll > scrolling, scroll > scrolling > infinite { display: block; position: absolute; z-index: 2; backface-visibility: hidden } \n\nscroll > scrolling { min-width: 100%; min-height: 100% } \n\nscroll[y=false] > scrolling { position: relative; display: table } \n\nscroll > scrolling > infinite { top: 0; left: 0; width: 100% } \n\nscroll > scrolling > infinite > fragment { display: block; position: relative; z-index: 2; width: 100% } \n\nscroll > scrollbar { position: absolute; z-index: 9999; border-radius: 3dpi; overflow: hidden } \n\nscroll > scrollbar > indicator { position: absolute; z-index: 9; border-radius: 3dpi; background: rgba(0, 0, 0, 0.4) } \n\n\npullup, pullright, pulldown, pullleft { display: block; position: absolute; z-index: 9999; text-align: center } \n\npullup { bottom: 0; width: 100% } \n\npulldown { top: 0; width: 100% } \n\npullright { left: 0; height: 100% } \n\npullleft { right: 0; height: 100% } \n\npullstart, pulling, pullend, pullover { display: none } \n\npullup[pullstart] pullstart, pullright[pullstart] pullstart, pulldown[pullstart] pullstart, pullleft[pullstart] pullstart { display: block } \n\npullup[pulling] pulling, pullright[pulling] pulling, pulldown[pulling] pulling, pullleft[pulling] pulling { display: block } \n\npullup[pullend] pullend, pullright[pullend] pullend, pulldown[pullend] pullend, pullleft[pullend] pullend { display: block } \n\npullup[pullover] pullover, pullright[pullover] pullover, pulldown[pullover] pullover, pullleft[pullover] pullover { display: block } \n\n\n*:tap { opacity: .5; filter: brightness(70%); } \n\n\nrelative-windows, absolute-windows { position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 10000; width: 100%; height: 100%; overflow: hidden } \n\n",t.CompiledCSSBaseStyle=null,t.parent&&t.parent.viewportScale?t.viewportScale=t.parent.viewportScale:(()=>{function t(t,e,i){return document.write('<meta id="'+t+'" name="viewport" content="width=device-width,initial-scale='+e+",minimum-scale="+e+",maximum-scale="+e+",user-scalable=no"+(i&&o.androidVersion<5?",target-densitydpi=device-dpi":"")+'">'),document.getElementById(t)}let e=window.innerWidth,i=t("test-viewport","1.0"),n=window.innerWidth,s=document.documentElement.offsetWidth;i.parentNode.removeChild(i);let r=t("real-viewport",1/devicePixelRatio,!0),a=Math.max(window.innerWidth,window.document.documentElement.offsetWidth),h=devicePixelRatio*Math.min(n,s),l=window.innerWidth!=window.screen.width&&n!=e||(window.innerWidth==window.screen.width||window.innerWidth==a)&&n==e&&a==h?Math.max(window.innerWidth/n,document.documentElement.offsetWidth/s):null;null==l&&(r.parentNode.removeChild(r),t("real-viewport","1.0"),l=1),window.viewportScale=l})(),(t=>{if("serviceWorker"in navigator){let e=t.getAttribute("service-worker");e&&e.length&&navigator.serviceWorker.register(e,{scope:"./"}).then(function(t){console.log("service workers success!")}).catch(function(t){console.log(t)})}})(i),t.__defineUnify__=v,t.__defineProto__=T,v(t),T(t)})(window,document),((t,e)=>{const i=St(),n=t.App=t.application=new i;t.trigger("applicationready"),t.trigger("startup"),t.trigger("launch"),e.ready(function(){let i=n.route(),s=i.id,o=i.param,r=n.exists();n.prefetching(s),n.get("frameworks",function(i){this.frameworks=i;let a=i.config,h=a.index,l=a.system;s!==h&&n.prefetching(h),s=s||h,this.checkLocalStorage(1e3*(a.expires||604800)),a.defend&&this.defend(e.body,!0),this.transform.init(),this.transform.setup({singleflow:a.singleflow,singlelocking:a.singlelocking,nofindpage:a.nofind,currpage:s,homepage:h,limit:Math.max(a.limit||50,10),exists:r}),this.to("frameworks",o,-1).then(function(){t.trigger("applicationready"),s?n.to(s,o,a.singleflow?1:0).then(function(){n._EXISTS=!0,t.trigger("applicationload"),n.modules[h]||setTimeout(function(){n.prefetch(h)},2e3)}):(n._EXISTS=!0,t.trigger("applicationload")),l&&n.get("system",function(t){this.transform.container("system"),t.Template=n.template("system").prefetch(function(t,e){e()}).then(function(t,e){e(),n.trigger("systemload",{module:t})}).get(function(t){n.trigger("systemloadall",{module:t})}).error(function(t){n.trigger("systemloaderror",{module:t})})})})},function(){n.console.error("Module[frameworks]","Fatal error","is necessary")})}),t.onerror=function(){return n.console.error(arguments[1]||"(anonymous function)","Error",arguments[2]+":"+arguments[3]),n.trigger("unknownerror",arguments),!1}})(window,document)}]);